function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function r(e){return e&&e.__esModule?e.default:e}var n={},i={},s=t.parcelRequire28d5;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){i[e]=t},t.parcelRequire28d5=s),s.register("1b2ls",(function(t,r){
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var n,i,a;e(t.exports,"Fragment",(()=>n),(e=>n=e)),e(t.exports,"jsx",(()=>i),(e=>i=e)),e(t.exports,"jsxs",(()=>a),(e=>a=e));var o=s("acw62"),l=Symbol.for("react.element"),h=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,c=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function f(e,t,r){var n,i={},s=null,a=null;for(n in void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(a=t.ref),t)u.call(t,n)&&!d.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:l,type:e,key:s,ref:a,props:i,_owner:c.current}}n=h,i=f,a=f})),s.register("acw62",(function(e,t){e.exports=s("2pUnB")})),s.register("2pUnB",(function(t,r){
/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var n,i,s,a,o,l,h,u,c,d,f,p,m,g,y,v,_,x,b,E,T,w,S,A,C,R,P,I,M,k,D,N,O,B,L;e(t.exports,"Children",(()=>n),(e=>n=e)),e(t.exports,"Component",(()=>i),(e=>i=e)),e(t.exports,"Fragment",(()=>s),(e=>s=e)),e(t.exports,"Profiler",(()=>a),(e=>a=e)),e(t.exports,"PureComponent",(()=>o),(e=>o=e)),e(t.exports,"StrictMode",(()=>l),(e=>l=e)),e(t.exports,"Suspense",(()=>h),(e=>h=e)),e(t.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",(()=>u),(e=>u=e)),e(t.exports,"cloneElement",(()=>c),(e=>c=e)),e(t.exports,"createContext",(()=>d),(e=>d=e)),e(t.exports,"createElement",(()=>f),(e=>f=e)),e(t.exports,"createFactory",(()=>p),(e=>p=e)),e(t.exports,"createRef",(()=>m),(e=>m=e)),e(t.exports,"forwardRef",(()=>g),(e=>g=e)),e(t.exports,"isValidElement",(()=>y),(e=>y=e)),e(t.exports,"lazy",(()=>v),(e=>v=e)),e(t.exports,"memo",(()=>_),(e=>_=e)),e(t.exports,"startTransition",(()=>x),(e=>x=e)),e(t.exports,"unstable_act",(()=>b),(e=>b=e)),e(t.exports,"useCallback",(()=>E),(e=>E=e)),e(t.exports,"useContext",(()=>T),(e=>T=e)),e(t.exports,"useDebugValue",(()=>w),(e=>w=e)),e(t.exports,"useDeferredValue",(()=>S),(e=>S=e)),e(t.exports,"useEffect",(()=>A),(e=>A=e)),e(t.exports,"useId",(()=>C),(e=>C=e)),e(t.exports,"useImperativeHandle",(()=>R),(e=>R=e)),e(t.exports,"useInsertionEffect",(()=>P),(e=>P=e)),e(t.exports,"useLayoutEffect",(()=>I),(e=>I=e)),e(t.exports,"useMemo",(()=>M),(e=>M=e)),e(t.exports,"useReducer",(()=>k),(e=>k=e)),e(t.exports,"useRef",(()=>D),(e=>D=e)),e(t.exports,"useState",(()=>N),(e=>N=e)),e(t.exports,"useSyncExternalStore",(()=>O),(e=>O=e)),e(t.exports,"useTransition",(()=>B),(e=>B=e)),e(t.exports,"version",(()=>L),(e=>L=e));var F=Symbol.for("react.element"),U=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),X=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),$=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),q=Symbol.iterator;var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,Z={};function J(e,t,r){this.props=e,this.context=t,this.refs=Z,this.updater=r||K}function ee(){}function te(e,t,r){this.props=e,this.context=t,this.refs=Z,this.updater=r||K}J.prototype.isReactComponent={},J.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},J.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},ee.prototype=J.prototype;var re=te.prototype=new ee;re.constructor=te,Q(re,J.prototype),re.isPureReactComponent=!0;var ne=Array.isArray,ie=Object.prototype.hasOwnProperty,se={current:null},ae={key:!0,ref:!0,__self:!0,__source:!0};function oe(e,t,r){var n,i={},s=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)ie.call(t,n)&&!ae.hasOwnProperty(n)&&(i[n]=t[n]);var o=arguments.length-2;if(1===o)i.children=r;else if(1<o){for(var l=Array(o),h=0;h<o;h++)l[h]=arguments[h+2];i.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps)void 0===i[n]&&(i[n]=o[n]);return{$$typeof:F,type:e,key:s,ref:a,props:i,_owner:se.current}}function le(e){return"object"==typeof e&&null!==e&&e.$$typeof===F}var he=/\/+/g;function ue(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function ce(e,t,r,n,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var a=!1;if(null===e)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case F:case U:a=!0}}if(a)return i=i(a=e),e=""===n?"."+ue(a,0):n,ne(i)?(r="",null!=e&&(r=e.replace(he,"$&/")+"/"),ce(i,t,r,"",(function(e){return e}))):null!=i&&(le(i)&&(i=function(e,t){return{$$typeof:F,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(he,"$&/")+"/")+e)),t.push(i)),1;if(a=0,n=""===n?".":n+":",ne(e))for(var o=0;o<e.length;o++){var l=n+ue(s=e[o],o);a+=ce(s,t,r,l,i)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=q&&e[q]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),o=0;!(s=e.next()).done;)a+=ce(s=s.value,t,r,l=n+ue(s,o++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function de(e,t,r){if(null==e)return e;var n=[],i=0;return ce(e,n,"","",(function(e){return t.call(r,e,i++)})),n}function fe(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var pe={current:null},me={transition:null};n={map:de,forEach:function(e,t,r){de(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return de(e,(function(){t++})),t},toArray:function(e){return de(e,(function(e){return e}))||[]},only:function(e){if(!le(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},i=J,s=G,a=H,o=te,l=z,h=W,u={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:me,ReactCurrentOwner:se},c=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Q({},e.props),i=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=se.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)ie.call(t,l)&&!ae.hasOwnProperty(l)&&(n[l]=void 0===t[l]&&void 0!==o?o[l]:t[l])}var l=arguments.length-2;if(1===l)n.children=r;else if(1<l){o=Array(l);for(var h=0;h<l;h++)o[h]=arguments[h+2];n.children=o}return{$$typeof:F,type:e.type,key:i,ref:s,props:n,_owner:a}},d=function(e){return(e={$$typeof:X,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:j,_context:e},e.Consumer=e},f=oe,p=function(e){var t=oe.bind(null,e);return t.type=e,t},m=function(){return{current:null}},g=function(e){return{$$typeof:V,render:e}},y=le,v=function(e){return{$$typeof:Y,_payload:{_status:-1,_result:e},_init:fe}},_=function(e,t){return{$$typeof:$,type:e,compare:void 0===t?null:t}},x=function(e){var t=me.transition;me.transition={};try{e()}finally{me.transition=t}},b=function(){throw Error("act(...) is not supported in production builds of React.")},E=function(e,t){return pe.current.useCallback(e,t)},T=function(e){return pe.current.useContext(e)},w=function(){},S=function(e){return pe.current.useDeferredValue(e)},A=function(e,t){return pe.current.useEffect(e,t)},C=function(){return pe.current.useId()},R=function(e,t,r){return pe.current.useImperativeHandle(e,t,r)},P=function(e,t){return pe.current.useInsertionEffect(e,t)},I=function(e,t){return pe.current.useLayoutEffect(e,t)},M=function(e,t){return pe.current.useMemo(e,t)},k=function(e,t,r){return pe.current.useReducer(e,t,r)},D=function(e){return pe.current.useRef(e)},N=function(e){return pe.current.useState(e)},O=function(e,t,r){return pe.current.useSyncExternalStore(e,t,r)},B=function(){return pe.current.useTransition()},L="18.2.0"})),s.register("Xw6Mv",(function(t,r){
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var n,i,a,o,l,h,u,c,d,f,p,m;e(t.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",(()=>n),(e=>n=e)),e(t.exports,"createPortal",(()=>i),(e=>i=e)),e(t.exports,"createRoot",(()=>a),(e=>a=e)),e(t.exports,"findDOMNode",(()=>o),(e=>o=e)),e(t.exports,"flushSync",(()=>l),(e=>l=e)),e(t.exports,"hydrate",(()=>h),(e=>h=e)),e(t.exports,"hydrateRoot",(()=>u),(e=>u=e)),e(t.exports,"render",(()=>c),(e=>c=e)),e(t.exports,"unmountComponentAtNode",(()=>d),(e=>d=e)),e(t.exports,"unstable_batchedUpdates",(()=>f),(e=>f=e)),e(t.exports,"unstable_renderSubtreeIntoContainer",(()=>p),(e=>p=e)),e(t.exports,"version",(()=>m),(e=>m=e));var g=s("acw62"),y=s("fO90s");function v(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _=new Set,x={};function b(e,t){E(e,t),E(e+"Capture",t)}function E(e,t){for(x[e]=t,e=0;e<t.length;e++)_.add(t[e])}var T=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),w=Object.prototype.hasOwnProperty,S=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A={},C={};function R(e,t,r,n,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){P[e]=new R(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];P[t]=new R(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){P[e]=new R(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){P[e]=new R(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){P[e]=new R(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){P[e]=new R(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){P[e]=new R(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){P[e]=new R(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){P[e]=new R(e,5,!1,e.toLowerCase(),null,!1,!1)}));var I=/[\-:]([a-z])/g;function M(e){return e[1].toUpperCase()}function k(e,t,r,n){var i=P.hasOwnProperty(t)?P[t]:null;(null!==i?0!==i.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!w.call(C,e)||!w.call(A,e)&&(S.test(e)?C[e]=!0:(A[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(I,M);P[t]=new R(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(I,M);P[t]=new R(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(I,M);P[t]=new R(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){P[e]=new R(e,1,!1,e.toLowerCase(),null,!1,!1)})),P.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){P[e]=new R(e,1,!1,e.toLowerCase(),null,!0,!0)}));var D=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),O=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),G=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),V=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var W=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var $=Symbol.iterator;function Y(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=$&&e[$]||e["@@iterator"])?e:null}var q,K=Object.assign;function Q(e){if(void 0===q)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);q=t&&t[1]||""}return"\n"+q+e}var Z=!1;function J(e,t){if(!e||Z)return"";Z=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var n=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){n=e}e.call(t.prototype)}else{try{throw Error()}catch(e){n=e}e()}}catch(t){if(t&&n&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),s=n.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{Z=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Q(e):""}function ee(e){switch(e.tag){case 5:return Q(e.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return e=J(e.type,!1);case 11:return e=J(e.type.render,!1);case 1:return e=J(e.type,!0);default:return""}}function te(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case B:return"Fragment";case O:return"Portal";case F:return"Profiler";case L:return"StrictMode";case H:return"Suspense";case j:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case G:return(e.displayName||"Context")+".Consumer";case U:return(e._context.displayName||"Context")+".Provider";case z:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case X:return null!==(t=e.displayName||null)?t:te(e.type)||"Memo";case V:t=e._payload,e=e._init;try{return te(e(t))}catch(e){}}return null}function re(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return te(t);case 8:return t===L?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function ne(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ie(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function se(e){e._valueTracker||(e._valueTracker=function(e){var t=ie(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ae(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ie(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function oe(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function le(e,t){var r=t.checked;return K({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function he(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=ne(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function ue(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function ce(e,t){ue(e,t);var r=ne(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?fe(e,t.type,r):t.hasOwnProperty("defaultValue")&&fe(e,t.type,ne(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function de(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function fe(e,t,r){"number"===t&&oe(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var pe=Array.isArray;function me(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ne(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ge(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(v(91));return K({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ye(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(v(92));if(pe(r)){if(1<r.length)throw Error(v(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:ne(r)}}function ve(e,t){var r=ne(t.value),n=ne(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function _e(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function xe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function be(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?xe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ee,Te,we=(Te=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((Ee=Ee||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ee.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return Te(e,t)}))}:Te);function Se(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var Ae={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ce=["Webkit","ms","Moz","O"];function Re(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||Ae.hasOwnProperty(e)&&Ae[e]?(""+t).trim():t+"px"}function Pe(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=Re(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(Ae).forEach((function(e){Ce.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ae[t]=Ae[e]}))}));var Ie=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Me(e,t){if(t){if(Ie[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(v(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(v(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(v(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(v(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var De=null;function Ne(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Oe=null,Be=null,Le=null;function Fe(e){if(e=ki(e)){if("function"!=typeof Oe)throw Error(v(280));var t=e.stateNode;t&&(t=Ni(t),Oe(e.stateNode,e.type,t))}}function Ue(e){Be?Le?Le.push(e):Le=[e]:Be=e}function Ge(){if(Be){var e=Be,t=Le;if(Le=Be=null,Fe(e),t)for(e=0;e<t.length;e++)Fe(t[e])}}function ze(e,t){return e(t)}function He(){}var je=!1;function Xe(e,t,r){if(je)return e(t,r);je=!0;try{return ze(e,t,r)}finally{je=!1,(null!==Be||null!==Le)&&(He(),Ge())}}function Ve(e,t){var r=e.stateNode;if(null===r)return null;var n=Ni(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(v(231,t,typeof r));return r}var We=!1;if(T)try{var $e={};Object.defineProperty($e,"passive",{get:function(){We=!0}}),window.addEventListener("test",$e,$e),window.removeEventListener("test",$e,$e)}catch(Te){We=!1}function Ye(e,t,r,n,i,s,a,o,l){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(e){this.onError(e)}}var qe=!1,Ke=null,Qe=!1,Ze=null,Je={onError:function(e){qe=!0,Ke=e}};function et(e,t,r,n,i,s,a,o,l){qe=!1,Ke=null,Ye.apply(Je,arguments)}function tt(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function rt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(tt(e)!==e)throw Error(v(188))}function it(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=tt(e)))throw Error(v(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(n=i.return)){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return nt(i),e;if(s===n)return nt(i),t;s=s.sibling}throw Error(v(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a)throw Error(v(189))}}if(r.alternate!==n)throw Error(v(190))}if(3!==r.tag)throw Error(v(188));return r.stateNode.current===r?e:t}(e))?st(e):null}function st(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=st(e);if(null!==t)return t;e=e.sibling}return null}var at=y.unstable_scheduleCallback,ot=y.unstable_cancelCallback,lt=y.unstable_shouldYield,ht=y.unstable_requestPaint,ut=y.unstable_now,ct=y.unstable_getCurrentPriorityLevel,dt=y.unstable_ImmediatePriority,ft=y.unstable_UserBlockingPriority,pt=y.unstable_NormalPriority,mt=y.unstable_LowPriority,gt=y.unstable_IdlePriority,yt=null,vt=null;var _t=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(xt(e)/bt|0)|0},xt=Math.log,bt=Math.LN2;var Et=64,Tt=4194304;function wt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function St(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&r;if(0!==a){var o=a&~i;0!==o?n=wt(o):0!==(s&=a)&&(n=wt(s))}else 0!==(a=r&~i)?n=wt(a):0!==s&&(n=wt(s));if(0===n)return 0;if(0!==t&&t!==n&&0==(t&i)&&((i=n&-n)>=(s=t&-t)||16===i&&0!=(4194240&s)))return t;if(0!=(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(r=31-_t(t)),n|=e[r],t&=~i;return n}function At(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ct(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Rt(){var e=Et;return 0==(4194240&(Et<<=1))&&(Et=64),e}function Pt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function It(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-_t(t)]=r}function Mt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-_t(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var kt=0;function Dt(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var Nt,Ot,Bt,Lt,Ft,Ut=!1,Gt=[],zt=null,Ht=null,jt=null,Xt=new Map,Vt=new Map,Wt=[],$t="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yt(e,t){switch(e){case"focusin":case"focusout":zt=null;break;case"dragenter":case"dragleave":Ht=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":Xt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vt.delete(t.pointerId)}}function qt(e,t,r,n,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&Ot(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Kt(e){var t=Mi(e.target);if(null!==t){var r=tt(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=rt(r)))return e.blockedOn=t,void Ft(e.priority,(function(){Bt(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Qt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=lr(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=ki(r))&&Ot(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);De=n,r.target.dispatchEvent(n),De=null,t.shift()}return!0}function Zt(e,t,r){Qt(e)&&r.delete(t)}function Jt(){Ut=!1,null!==zt&&Qt(zt)&&(zt=null),null!==Ht&&Qt(Ht)&&(Ht=null),null!==jt&&Qt(jt)&&(jt=null),Xt.forEach(Zt),Vt.forEach(Zt)}function er(e,t){e.blockedOn===t&&(e.blockedOn=null,Ut||(Ut=!0,y.unstable_scheduleCallback(y.unstable_NormalPriority,Jt)))}function tr(e){function t(t){return er(t,e)}if(0<Gt.length){er(Gt[0],e);for(var r=1;r<Gt.length;r++){var n=Gt[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==zt&&er(zt,e),null!==Ht&&er(Ht,e),null!==jt&&er(jt,e),Xt.forEach(t),Vt.forEach(t),r=0;r<Wt.length;r++)(n=Wt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Wt.length&&null===(r=Wt[0]).blockedOn;)Kt(r),null===r.blockedOn&&Wt.shift()}var rr=D.ReactCurrentBatchConfig,nr=!0;function ir(e,t,r,n){var i=kt,s=rr.transition;rr.transition=null;try{kt=1,ar(e,t,r,n)}finally{kt=i,rr.transition=s}}function sr(e,t,r,n){var i=kt,s=rr.transition;rr.transition=null;try{kt=4,ar(e,t,r,n)}finally{kt=i,rr.transition=s}}function ar(e,t,r,n){if(nr){var i=lr(e,t,r,n);if(null===i)ni(e,t,n,or,r),Yt(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return zt=qt(zt,e,t,r,n,i),!0;case"dragenter":return Ht=qt(Ht,e,t,r,n,i),!0;case"mouseover":return jt=qt(jt,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return Xt.set(s,qt(Xt.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Vt.set(s,qt(Vt.get(s)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if(Yt(e,n),4&t&&-1<$t.indexOf(e)){for(;null!==i;){var s=ki(i);if(null!==s&&Nt(s),null===(s=lr(e,t,r,n))&&ni(e,t,n,or,r),s===i)break;i=s}null!==i&&n.stopPropagation()}else ni(e,t,n,null,r)}}var or=null;function lr(e,t,r,n){if(or=null,null!==(e=Mi(e=Ne(n))))if(null===(t=tt(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=rt(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return or=e,null}function hr(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ct()){case dt:return 1;case ft:return 4;case pt:case mt:return 16;case gt:return 536870912;default:return 16}default:return 16}}var ur=null,cr=null,dr=null;function fr(){if(dr)return dr;var e,t,r=cr,n=r.length,i="value"in ur?ur.value:ur.textContent,s=i.length;for(e=0;e<n&&r[e]===i[e];e++);var a=n-e;for(t=1;t<=a&&r[n-t]===i[s-t];t++);return dr=i.slice(e,1<t?1-t:void 0)}function pr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function mr(){return!0}function gr(){return!1}function yr(e){function t(t,r,n,i,s){for(var a in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?mr:gr,this.isPropagationStopped=gr,this}return K(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=mr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=mr)},persist:function(){},isPersistent:mr}),t}var vr,_r,xr,br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Er=yr(br),Tr=K({},br,{view:0,detail:0}),wr=yr(Tr),Sr=K({},Tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xr&&(xr&&"mousemove"===e.type?(vr=e.screenX-xr.screenX,_r=e.screenY-xr.screenY):_r=vr=0,xr=e),vr)},movementY:function(e){return"movementY"in e?e.movementY:_r}}),Ar=yr(Sr),Cr=yr(K({},Sr,{dataTransfer:0})),Rr=yr(K({},Tr,{relatedTarget:0})),Pr=yr(K({},br,{animationName:0,elapsedTime:0,pseudoElement:0})),Ir=K({},br,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mr=yr(Ir),kr=yr(K({},br,{data:0})),Dr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Or={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Br(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Or[e])&&!!t[e]}function Lr(){return Br}var Fr=K({},Tr,{key:function(e){if(e.key){var t=Dr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=pr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Nr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lr,charCode:function(e){return"keypress"===e.type?pr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?pr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ur=yr(Fr),Gr=yr(K({},Sr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),zr=yr(K({},Tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lr})),Hr=yr(K({},br,{propertyName:0,elapsedTime:0,pseudoElement:0})),jr=K({},Sr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xr=yr(jr),Vr=[9,13,27,32],Wr=T&&"CompositionEvent"in window,$r=null;T&&"documentMode"in document&&($r=document.documentMode);var Yr=T&&"TextEvent"in window&&!$r,qr=T&&(!Wr||$r&&8<$r&&11>=$r),Kr=String.fromCharCode(32),Qr=!1;function Zr(e,t){switch(e){case"keyup":return-1!==Vr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var en=!1;var tn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!tn[e.type]:"textarea"===t}function nn(e,t,r,n){Ue(n),0<(t=si(t,"onChange")).length&&(r=new Er("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var sn=null,an=null;function on(e){Qn(e,0)}function ln(e){if(ae(Di(e)))return e}function hn(e,t){if("change"===e)return t}var un=!1;if(T){var cn;if(T){var dn="oninput"in document;if(!dn){var fn=document.createElement("div");fn.setAttribute("oninput","return;"),dn="function"==typeof fn.oninput}cn=dn}else cn=!1;un=cn&&(!document.documentMode||9<document.documentMode)}function pn(){sn&&(sn.detachEvent("onpropertychange",mn),an=sn=null)}function mn(e){if("value"===e.propertyName&&ln(an)){var t=[];nn(t,an,e,Ne(e)),Xe(on,t)}}function gn(e,t,r){"focusin"===e?(pn(),an=r,(sn=t).attachEvent("onpropertychange",mn)):"focusout"===e&&pn()}function yn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return ln(an)}function vn(e,t){if("click"===e)return ln(t)}function _n(e,t){if("input"===e||"change"===e)return ln(t)}var xn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function bn(e,t){if(xn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!w.call(t,i)||!xn(e[i],t[i]))return!1}return!0}function En(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tn(e,t){var r,n=En(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=En(n)}}function wn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?wn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Sn(){for(var e=window,t=oe();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(e){r=!1}if(!r)break;t=oe((e=t.contentWindow).document)}return t}function An(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Cn(e){var t=Sn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&wn(r.ownerDocument.documentElement,r)){if(null!==n&&An(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=void 0===n.end?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=Tn(r,s);var a=Tn(r,n);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Rn=T&&"documentMode"in document&&11>=document.documentMode,Pn=null,In=null,Mn=null,kn=!1;function Dn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;kn||null==Pn||Pn!==oe(n)||("selectionStart"in(n=Pn)&&An(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Mn&&bn(Mn,n)||(Mn=n,0<(n=si(In,"onSelect")).length&&(t=new Er("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Pn)))}function Nn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var On={animationend:Nn("Animation","AnimationEnd"),animationiteration:Nn("Animation","AnimationIteration"),animationstart:Nn("Animation","AnimationStart"),transitionend:Nn("Transition","TransitionEnd")},Bn={},Ln={};function Fn(e){if(Bn[e])return Bn[e];if(!On[e])return e;var t,r=On[e];for(t in r)if(r.hasOwnProperty(t)&&t in Ln)return Bn[e]=r[t];return e}T&&(Ln=document.createElement("div").style,"AnimationEvent"in window||(delete On.animationend.animation,delete On.animationiteration.animation,delete On.animationstart.animation),"TransitionEvent"in window||delete On.transitionend.transition);var Un=Fn("animationend"),Gn=Fn("animationiteration"),zn=Fn("animationstart"),Hn=Fn("transitionend"),jn=new Map,Xn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vn(e,t){jn.set(e,t),b(t,[e])}for(var Wn=0;Wn<Xn.length;Wn++){var $n=Xn[Wn];Vn($n.toLowerCase(),"on"+($n[0].toUpperCase()+$n.slice(1)))}Vn(Un,"onAnimationEnd"),Vn(Gn,"onAnimationIteration"),Vn(zn,"onAnimationStart"),Vn("dblclick","onDoubleClick"),Vn("focusin","onFocus"),Vn("focusout","onBlur"),Vn(Hn,"onTransitionEnd"),E("onMouseEnter",["mouseout","mouseover"]),E("onMouseLeave",["mouseout","mouseover"]),E("onPointerEnter",["pointerout","pointerover"]),E("onPointerLeave",["pointerout","pointerover"]),b("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),b("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),b("onBeforeInput",["compositionend","keypress","textInput","paste"]),b("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),b("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),b("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yn));function Kn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,i,s,a,o,l){if(et.apply(this,arguments),qe){if(!qe)throw Error(v(198));var h=Ke;qe=!1,Ke=null,Qe||(Qe=!0,Ze=h)}}(n,t,void 0,e),e.currentTarget=null}function Qn(e,t){t=0!=(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,h=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Kn(i,o,h),s=l}else for(a=0;a<n.length;a++){if(l=(o=n[a]).instance,h=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Kn(i,o,h),s=l}}}if(Qe)throw e=Ze,Qe=!1,Ze=null,e}function Zn(e,t){var r=t[Ri];void 0===r&&(r=t[Ri]=new Set);var n=e+"__bubble";r.has(n)||(ri(t,e,2,!1),r.add(n))}function Jn(e,t,r){var n=0;t&&(n|=4),ri(r,e,n,t)}var ei="_reactListening"+Math.random().toString(36).slice(2);function ti(e){if(!e[ei]){e[ei]=!0,_.forEach((function(t){"selectionchange"!==t&&(qn.has(t)||Jn(t,!1,e),Jn(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[ei]||(t[ei]=!0,Jn("selectionchange",!1,t))}}function ri(e,t,r,n){switch(hr(t)){case 1:var i=ir;break;case 4:i=sr;break;default:i=ar}r=i.bind(null,t,r,e),i=void 0,!We||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function ni(e,t,r,n,i){var s=n;if(0==(1&t)&&0==(2&t)&&null!==n)e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var o=n.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=n.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=Mi(o)))return;if(5===(l=a.tag)||6===l){n=s=a;continue e}o=o.parentNode}}n=n.return}Xe((function(){var n=s,i=Ne(r),a=[];e:{var o=jn.get(e);if(void 0!==o){var l=Er,h=e;switch(e){case"keypress":if(0===pr(r))break e;case"keydown":case"keyup":l=Ur;break;case"focusin":h="focus",l=Rr;break;case"focusout":h="blur",l=Rr;break;case"beforeblur":case"afterblur":l=Rr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=Ar;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=Cr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=zr;break;case Un:case Gn:case zn:l=Pr;break;case Hn:l=Hr;break;case"scroll":l=wr;break;case"wheel":l=Xr;break;case"copy":case"cut":case"paste":l=Mr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Gr}var u=0!=(4&t),c=!u&&"scroll"===e,d=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=n;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Ve(p,d))&&u.push(ii(p,m,f)))),c)break;p=p.return}0<u.length&&(o=new l(o,h,null,r,i),a.push({event:o,listeners:u}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===De||!(h=r.relatedTarget||r.fromElement)||!Mi(h)&&!h[Ci])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=n,null!==(h=(h=r.relatedTarget||r.toElement)?Mi(h):null)&&(h!==(c=tt(h))||5!==h.tag&&6!==h.tag)&&(h=null)):(l=null,h=n),l!==h)){if(u=Ar,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Gr,m="onPointerLeave",d="onPointerEnter",p="pointer"),c=null==l?o:Di(l),f=null==h?o:Di(h),(o=new u(m,p+"leave",l,r,i)).target=c,o.relatedTarget=f,m=null,Mi(i)===n&&((u=new u(d,p+"enter",h,r,i)).target=f,u.relatedTarget=c,m=u),c=m,l&&h)e:{for(d=h,p=0,f=u=l;f;f=ai(f))p++;for(f=0,m=d;m;m=ai(m))f++;for(;0<p-f;)u=ai(u),p--;for(;0<f-p;)d=ai(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=ai(u),d=ai(d)}u=null}else u=null;null!==l&&oi(a,o,l,u,!1),null!==h&&null!==c&&oi(a,c,h,u,!0)}if("select"===(l=(o=n?Di(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=hn;else if(rn(o))if(un)g=_n;else{g=yn;var y=gn}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=vn);switch(g&&(g=g(e,n))?nn(a,g,r,i):(y&&y(e,o,n),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&fe(o,"number",o.value)),y=n?Di(n):window,e){case"focusin":(rn(y)||"true"===y.contentEditable)&&(Pn=y,In=n,Mn=null);break;case"focusout":Mn=In=Pn=null;break;case"mousedown":kn=!0;break;case"contextmenu":case"mouseup":case"dragend":kn=!1,Dn(a,r,i);break;case"selectionchange":if(Rn)break;case"keydown":case"keyup":Dn(a,r,i)}var v;if(Wr)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else en?Zr(e,r)&&(_="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(_="onCompositionStart");_&&(qr&&"ko"!==r.locale&&(en||"onCompositionStart"!==_?"onCompositionEnd"===_&&en&&(v=fr()):(cr="value"in(ur=i)?ur.value:ur.textContent,en=!0)),0<(y=si(n,_)).length&&(_=new kr(_,e,null,r,i),a.push({event:_,listeners:y}),v?_.data=v:null!==(v=Jr(r))&&(_.data=v))),(v=Yr?function(e,t){switch(e){case"compositionend":return Jr(t);case"keypress":return 32!==t.which?null:(Qr=!0,Kr);case"textInput":return(e=t.data)===Kr&&Qr?null:e;default:return null}}(e,r):function(e,t){if(en)return"compositionend"===e||!Wr&&Zr(e,t)?(e=fr(),dr=cr=ur=null,en=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=si(n,"onBeforeInput")).length&&(i=new kr("onBeforeInput","beforeinput",null,r,i),a.push({event:i,listeners:n}),i.data=v))}Qn(a,t)}))}function ii(e,t,r){return{instance:e,listener:t,currentTarget:r}}function si(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ve(e,r))&&n.unshift(ii(e,s,i)),null!=(s=Ve(e,t))&&n.push(ii(e,s,i))),e=e.return}return n}function ai(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function oi(e,t,r,n,i){for(var s=t._reactName,a=[];null!==r&&r!==n;){var o=r,l=o.alternate,h=o.stateNode;if(null!==l&&l===n)break;5===o.tag&&null!==h&&(o=h,i?null!=(l=Ve(r,s))&&a.unshift(ii(r,l,o)):i||null!=(l=Ve(r,s))&&a.push(ii(r,l,o))),r=r.return}0!==a.length&&e.push({event:t,listeners:a})}var li=/\r\n?/g,hi=/\u0000|\uFFFD/g;function ui(e){return("string"==typeof e?e:""+e).replace(li,"\n").replace(hi,"")}function ci(e,t,r){if(t=ui(t),ui(e)!==t&&r)throw Error(v(425))}function di(){}var fi=null,pi=null;function mi(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var gi="function"==typeof setTimeout?setTimeout:void 0,yi="function"==typeof clearTimeout?clearTimeout:void 0,vi="function"==typeof Promise?Promise:void 0,_i="function"==typeof queueMicrotask?queueMicrotask:void 0!==vi?function(e){return vi.resolve(null).then(e).catch(xi)}:gi;function xi(e){setTimeout((function(){throw e}))}function bi(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return e.removeChild(i),void tr(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);tr(t)}function Ei(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function Ti(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var wi=Math.random().toString(36).slice(2),Si="__reactFiber$"+wi,Ai="__reactProps$"+wi,Ci="__reactContainer$"+wi,Ri="__reactEvents$"+wi,Pi="__reactListeners$"+wi,Ii="__reactHandles$"+wi;function Mi(e){var t=e[Si];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ci]||r[Si]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=Ti(e);null!==e;){if(r=e[Si])return r;e=Ti(e)}return t}r=(e=r).parentNode}return null}function ki(e){return!(e=e[Si]||e[Ci])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Di(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(v(33))}function Ni(e){return e[Ai]||null}var Oi=[],Bi=-1;function Li(e){return{current:e}}function Fi(e){0>Bi||(e.current=Oi[Bi],Oi[Bi]=null,Bi--)}function Ui(e,t){Bi++,Oi[Bi]=e.current,e.current=t}var Gi={},zi=Li(Gi),Hi=Li(!1),ji=Gi;function Xi(e,t){var r=e.type.contextTypes;if(!r)return Gi;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in r)s[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Vi(e){return null!=(e=e.childContextTypes)}function Wi(){Fi(Hi),Fi(zi)}function $i(e,t,r){if(zi.current!==Gi)throw Error(v(168));Ui(zi,t),Ui(Hi,r)}function Yi(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in t))throw Error(v(108,re(e)||"Unknown",i));return K({},r,n)}function qi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gi,ji=zi.current,Ui(zi,e),Ui(Hi,Hi.current),!0}function Ki(e,t,r){var n=e.stateNode;if(!n)throw Error(v(169));r?(e=Yi(e,t,ji),n.__reactInternalMemoizedMergedChildContext=e,Fi(Hi),Fi(zi),Ui(zi,e)):Fi(Hi),Ui(Hi,r)}var Qi=null,Zi=!1,Ji=!1;function es(e){null===Qi?Qi=[e]:Qi.push(e)}function ts(){if(!Ji&&null!==Qi){Ji=!0;var e=0,t=kt;try{var r=Qi;for(kt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Qi=null,Zi=!1}catch(t){throw null!==Qi&&(Qi=Qi.slice(e+1)),at(dt,ts),t}finally{kt=t,Ji=!1}}return null}var rs=[],ns=0,is=null,ss=0,as=[],os=0,ls=null,hs=1,us="";function cs(e,t){rs[ns++]=ss,rs[ns++]=is,is=e,ss=t}function ds(e,t,r){as[os++]=hs,as[os++]=us,as[os++]=ls,ls=e;var n=hs;e=us;var i=32-_t(n)-1;n&=~(1<<i),r+=1;var s=32-_t(t)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,hs=1<<32-_t(t)+i|r<<i|n,us=s+e}else hs=1<<s|r<<i|n,us=e}function fs(e){null!==e.return&&(cs(e,1),ds(e,1,0))}function ps(e){for(;e===is;)is=rs[--ns],rs[ns]=null,ss=rs[--ns],rs[ns]=null;for(;e===ls;)ls=as[--os],as[os]=null,us=as[--os],as[os]=null,hs=as[--os],as[os]=null}var ms=null,gs=null,ys=!1,vs=null;function _s(e,t){var r=Xh(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function xs(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ms=e,gs=Ei(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ms=e,gs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==ls?{id:hs,overflow:us}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Xh(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ms=e,gs=null,!0);default:return!1}}function bs(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function Es(e){if(ys){var t=gs;if(t){var r=t;if(!xs(e,t)){if(bs(e))throw Error(v(418));t=Ei(r.nextSibling);var n=ms;t&&xs(e,t)?_s(n,r):(e.flags=-4097&e.flags|2,ys=!1,ms=e)}}else{if(bs(e))throw Error(v(418));e.flags=-4097&e.flags|2,ys=!1,ms=e}}}function Ts(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ms=e}function ws(e){if(e!==ms)return!1;if(!ys)return Ts(e),ys=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!mi(e.type,e.memoizedProps)),t&&(t=gs)){if(bs(e))throw Ss(),Error(v(418));for(;t;)_s(e,t),t=Ei(t.nextSibling)}if(Ts(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(v(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){gs=Ei(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}gs=null}}else gs=ms?Ei(e.stateNode.nextSibling):null;return!0}function Ss(){for(var e=gs;e;)e=Ei(e.nextSibling)}function As(){gs=ms=null,ys=!1}function Cs(e){null===vs?vs=[e]:vs.push(e)}var Rs=D.ReactCurrentBatchConfig;function Ps(e,t){if(e&&e.defaultProps){for(var r in t=K({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var Is=Li(null),Ms=null,ks=null,Ds=null;function Ns(){Ds=ks=Ms=null}function Os(e){var t=Is.current;Fi(Is),e._currentValue=t}function Bs(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ls(e,t){Ms=e,Ds=ks=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Do=!0),e.firstContext=null)}function Fs(e){var t=e._currentValue;if(Ds!==e)if(e={context:e,memoizedValue:t,next:null},null===ks){if(null===Ms)throw Error(v(308));ks=e,Ms.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var Us=null;function Gs(e){null===Us?Us=[e]:Us.push(e)}function zs(e,t,r,n){var i=t.interleaved;return null===i?(r.next=r,Gs(t)):(r.next=i.next,i.next=r),t.interleaved=r,Hs(e,n)}function Hs(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var js=!1;function Xs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ws(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $s(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!=(2&zl)){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Hs(e,r)}return null===(i=n.interleaved)?(t.next=t,Gs(n)):(t.next=i.next,i.next=t),n.interleaved=t,Hs(e,r)}function Ys(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Mt(e,r)}}function qs(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?i=s=a:s=s.next=a,r=r.next}while(null!==r);null===s?i=s=t:s=s.next=t}else i=s=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ks(e,t,r,n){var i=e.updateQueue;js=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,h=l.next;l.next=null,null===a?s=h:a.next=h,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=h:o.next=h,u.lastBaseUpdate=l))}if(null!==s){var c=i.baseState;for(a=0,u=h=l=null,o=s;;){var d=o.lane,f=o.eventTime;if((n&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(d=t,f=r,m.tag){case 1:if("function"==typeof(p=m.payload)){c=p.call(f,c,d);break e}c=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(d="function"==typeof(p=m.payload)?p.call(f,c,d):p))break e;c=K({},c,d);break e;case 2:js=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(h=u=f,l=c):u=u.next=f,a|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(d=o).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=c),i.baseState=l,i.firstBaseUpdate=h,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);ql|=a,e.lanes=a,e.memoizedState=c}}function Qs(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!=typeof i)throw Error(v(191,i));i.call(n)}}}var Zs=(new g.Component).refs;function Js(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:K({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var ea={isMounted:function(e){return!!(e=e._reactInternals)&&tt(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=fh(),i=ph(e),s=Ws(n,i);s.payload=t,null!=r&&(s.callback=r),null!==(t=$s(e,s,i))&&(mh(t,e,i,n),Ys(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=fh(),i=ph(e),s=Ws(n,i);s.tag=1,s.payload=t,null!=r&&(s.callback=r),null!==(t=$s(e,s,i))&&(mh(t,e,i,n),Ys(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=fh(),n=ph(e),i=Ws(r,n);i.tag=2,null!=t&&(i.callback=t),null!==(t=$s(e,i,n))&&(mh(t,e,n,r),Ys(t,e,n))}};function ta(e,t,r,n,i,s,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!bn(r,n)||!bn(i,s))}function ra(e,t,r){var n=!1,i=Gi,s=t.contextType;return"object"==typeof s&&null!==s?s=Fs(s):(i=Vi(t)?ji:zi.current,s=(n=null!=(n=t.contextTypes))?Xi(e,i):Gi),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ea,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function na(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ea.enqueueReplaceState(t,t.state,null)}function ia(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=Zs,Xs(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=Fs(s):(s=Vi(t)?ji:zi.current,i.context=Xi(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(Js(e,t,s,r),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ea.enqueueReplaceState(i,i.state,null),Ks(e,r,i,n),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function sa(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(v(309));var n=r.stateNode}if(!n)throw Error(v(147,e));var i=n,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;t===Zs&&(t=i.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!=typeof e)throw Error(v(284));if(!r._owner)throw Error(v(290,e))}return e}function aa(e,t){throw e=Object.prototype.toString.call(t),Error(v(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function oa(e){return(0,e._init)(e._payload)}function la(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Wh(e,t)).index=0,e.sibling=null,e}function s(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,r,n){return null===t||6!==t.tag?((t=Kh(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function l(e,t,r,n){var s=r.type;return s===B?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===V&&oa(s)===t.type)?((n=i(t,r.props)).ref=sa(e,t,r),n.return=e,n):((n=$h(r.type,r.key,r.props,null,e.mode,n)).ref=sa(e,t,r),n.return=e,n)}function h(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Qh(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function u(e,t,r,n,s){return null===t||7!==t.tag?((t=Yh(r,e.mode,n,s)).return=e,t):((t=i(t,r)).return=e,t)}function c(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Kh(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case N:return(r=$h(t.type,t.key,t.props,null,e.mode,r)).ref=sa(e,null,t),r.return=e,r;case O:return(t=Qh(t,e.mode,r)).return=e,t;case V:return c(e,(0,t._init)(t._payload),r)}if(pe(t)||Y(t))return(t=Yh(t,e.mode,r,null)).return=e,t;aa(e,t)}return null}function d(e,t,r,n){var i=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r)return null!==i?null:o(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case N:return r.key===i?l(e,t,r,n):null;case O:return r.key===i?h(e,t,r,n):null;case V:return d(e,t,(i=r._init)(r._payload),n)}if(pe(r)||Y(r))return null!==i?null:u(e,t,r,n,null);aa(e,r)}return null}function f(e,t,r,n,i){if("string"==typeof n&&""!==n||"number"==typeof n)return o(t,e=e.get(r)||null,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case N:return l(t,e=e.get(null===n.key?r:n.key)||null,n,i);case O:return h(t,e=e.get(null===n.key?r:n.key)||null,n,i);case V:return f(e,t,r,(0,n._init)(n._payload),i)}if(pe(n)||Y(n))return u(t,e=e.get(r)||null,n,i,null);aa(t,n)}return null}function p(i,a,o,l){for(var h=null,u=null,p=a,m=a=0,g=null;null!==p&&m<o.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var y=d(i,p,o[m],l);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(i,p),a=s(y,a,m),null===u?h=y:u.sibling=y,u=y,p=g}if(m===o.length)return r(i,p),ys&&cs(i,m),h;if(null===p){for(;m<o.length;m++)null!==(p=c(i,o[m],l))&&(a=s(p,a,m),null===u?h=p:u.sibling=p,u=p);return ys&&cs(i,m),h}for(p=n(i,p);m<o.length;m++)null!==(g=f(p,i,m,o[m],l))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),a=s(g,a,m),null===u?h=g:u.sibling=g,u=g);return e&&p.forEach((function(e){return t(i,e)})),ys&&cs(i,m),h}function m(i,a,o,l){var h=Y(o);if("function"!=typeof h)throw Error(v(150));if(null==(o=h.call(o)))throw Error(v(151));for(var u=h=null,p=a,m=a=0,g=null,y=o.next();null!==p&&!y.done;m++,y=o.next()){p.index>m?(g=p,p=null):g=p.sibling;var _=d(i,p,y.value,l);if(null===_){null===p&&(p=g);break}e&&p&&null===_.alternate&&t(i,p),a=s(_,a,m),null===u?h=_:u.sibling=_,u=_,p=g}if(y.done)return r(i,p),ys&&cs(i,m),h;if(null===p){for(;!y.done;m++,y=o.next())null!==(y=c(i,y.value,l))&&(a=s(y,a,m),null===u?h=y:u.sibling=y,u=y);return ys&&cs(i,m),h}for(p=n(i,p);!y.done;m++,y=o.next())null!==(y=f(p,i,m,y.value,l))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),a=s(y,a,m),null===u?h=y:u.sibling=y,u=y);return e&&p.forEach((function(e){return t(i,e)})),ys&&cs(i,m),h}return function e(n,s,o,l){if("object"==typeof o&&null!==o&&o.type===B&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case N:e:{for(var h=o.key,u=s;null!==u;){if(u.key===h){if((h=o.type)===B){if(7===u.tag){r(n,u.sibling),(s=i(u,o.props.children)).return=n,n=s;break e}}else if(u.elementType===h||"object"==typeof h&&null!==h&&h.$$typeof===V&&oa(h)===u.type){r(n,u.sibling),(s=i(u,o.props)).ref=sa(n,u,o),s.return=n,n=s;break e}r(n,u);break}t(n,u),u=u.sibling}o.type===B?((s=Yh(o.props.children,n.mode,l,o.key)).return=n,n=s):((l=$h(o.type,o.key,o.props,null,n.mode,l)).ref=sa(n,s,o),l.return=n,n=l)}return a(n);case O:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){r(n,s.sibling),(s=i(s,o.children||[])).return=n,n=s;break e}r(n,s);break}t(n,s),s=s.sibling}(s=Qh(o,n.mode,l)).return=n,n=s}return a(n);case V:return e(n,s,(u=o._init)(o._payload),l)}if(pe(o))return p(n,s,o,l);if(Y(o))return m(n,s,o,l);aa(n,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==s&&6===s.tag?(r(n,s.sibling),(s=i(s,o)).return=n,n=s):(r(n,s),(s=Kh(o,n.mode,l)).return=n,n=s),a(n)):r(n,s)}}var ha=la(!0),ua=la(!1),ca={},da=Li(ca),fa=Li(ca),pa=Li(ca);function ma(e){if(e===ca)throw Error(v(174));return e}function ga(e,t){switch(Ui(pa,t),Ui(fa,e),Ui(da,ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:be(null,"");break;default:t=be(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Fi(da),Ui(da,t)}function ya(){Fi(da),Fi(fa),Fi(pa)}function va(e){ma(pa.current);var t=ma(da.current),r=be(t,e.type);t!==r&&(Ui(fa,e),Ui(da,r))}function _a(e){fa.current===e&&(Fi(da),Fi(fa))}var xa=Li(0);function ba(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ea=[];function Ta(){for(var e=0;e<Ea.length;e++)Ea[e]._workInProgressVersionPrimary=null;Ea.length=0}var wa=D.ReactCurrentDispatcher,Sa=D.ReactCurrentBatchConfig,Aa=0,Ca=null,Ra=null,Pa=null,Ia=!1,Ma=!1,ka=0,Da=0;function Na(){throw Error(v(321))}function Oa(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!xn(e[r],t[r]))return!1;return!0}function Ba(e,t,r,n,i,s){if(Aa=s,Ca=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wa.current=null===e||null===e.memoizedState?xo:bo,e=r(n,i),Ma){s=0;do{if(Ma=!1,ka=0,25<=s)throw Error(v(301));s+=1,Pa=Ra=null,t.updateQueue=null,wa.current=Eo,e=r(n,i)}while(Ma)}if(wa.current=_o,t=null!==Ra&&null!==Ra.next,Aa=0,Pa=Ra=Ca=null,Ia=!1,t)throw Error(v(300));return e}function La(){var e=0!==ka;return ka=0,e}function Fa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Pa?Ca.memoizedState=Pa=e:Pa=Pa.next=e,Pa}function Ua(){if(null===Ra){var e=Ca.alternate;e=null!==e?e.memoizedState:null}else e=Ra.next;var t=null===Pa?Ca.memoizedState:Pa.next;if(null!==t)Pa=t,Ra=e;else{if(null===e)throw Error(v(310));e={memoizedState:(Ra=e).memoizedState,baseState:Ra.baseState,baseQueue:Ra.baseQueue,queue:Ra.queue,next:null},null===Pa?Ca.memoizedState=Pa=e:Pa=Pa.next=e}return Pa}function Ga(e,t){return"function"==typeof t?t(e):t}function za(e){var t=Ua(),r=t.queue;if(null===r)throw Error(v(311));r.lastRenderedReducer=e;var n=Ra,i=n.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(null!==i){s=i.next,n=n.baseState;var o=a=null,l=null,h=s;do{var u=h.lane;if((Aa&u)===u)null!==l&&(l=l.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:e(n,h.action);else{var c={lane:u,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};null===l?(o=l=c,a=n):l=l.next=c,Ca.lanes|=u,ql|=u}h=h.next}while(null!==h&&h!==s);null===l?a=n:l.next=o,xn(n,t.memoizedState)||(Do=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=l,r.lastRenderedState=n}if(null!==(e=r.interleaved)){i=e;do{s=i.lane,Ca.lanes|=s,ql|=s,i=i.next}while(i!==e)}else null===i&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ha(e){var t=Ua(),r=t.queue;if(null===r)throw Error(v(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(null!==i){r.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);xn(s,t.memoizedState)||(Do=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function ja(){}function Xa(e,t){var r=Ca,n=Ua(),i=t(),s=!xn(n.memoizedState,i);if(s&&(n.memoizedState=i,Do=!0),n=n.queue,ro($a.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||null!==Pa&&1&Pa.memoizedState.tag){if(r.flags|=2048,Qa(9,Wa.bind(null,r,n,i,t),void 0,null),null===Hl)throw Error(v(349));0!=(30&Aa)||Va(r,t,i)}return i}function Va(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=Ca.updateQueue)?(t={lastEffect:null,stores:null},Ca.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Wa(e,t,r,n){t.value=r,t.getSnapshot=n,Ya(t)&&qa(e)}function $a(e,t,r){return r((function(){Ya(t)&&qa(e)}))}function Ya(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!xn(e,r)}catch(e){return!0}}function qa(e){var t=Hs(e,1);null!==t&&mh(t,e,1,-1)}function Ka(e){var t=Fa();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:e},t.queue=e,e=e.dispatch=mo.bind(null,Ca,e),[t.memoizedState,e]}function Qa(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=Ca.updateQueue)?(t={lastEffect:null,stores:null},Ca.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Za(){return Ua().memoizedState}function Ja(e,t,r,n){var i=Fa();Ca.flags|=e,i.memoizedState=Qa(1|t,r,void 0,void 0===n?null:n)}function eo(e,t,r,n){var i=Ua();n=void 0===n?null:n;var s=void 0;if(null!==Ra){var a=Ra.memoizedState;if(s=a.destroy,null!==n&&Oa(n,a.deps))return void(i.memoizedState=Qa(t,r,s,n))}Ca.flags|=e,i.memoizedState=Qa(1|t,r,s,n)}function to(e,t){return Ja(8390656,8,e,t)}function ro(e,t){return eo(2048,8,e,t)}function no(e,t){return eo(4,2,e,t)}function io(e,t){return eo(4,4,e,t)}function so(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ao(e,t,r){return r=null!=r?r.concat([e]):null,eo(4,4,so.bind(null,t,e),r)}function oo(){}function lo(e,t){var r=Ua();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Oa(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function ho(e,t){var r=Ua();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Oa(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function uo(e,t,r){return 0==(21&Aa)?(e.baseState&&(e.baseState=!1,Do=!0),e.memoizedState=r):(xn(r,t)||(r=Rt(),Ca.lanes|=r,ql|=r,e.baseState=!0),t)}function co(e,t){var r=kt;kt=0!==r&&4>r?r:4,e(!0);var n=Sa.transition;Sa.transition={};try{e(!1),t()}finally{kt=r,Sa.transition=n}}function fo(){return Ua().memoizedState}function po(e,t,r){var n=ph(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},go(e))yo(t,r);else if(null!==(r=zs(e,t,r,n))){mh(r,e,n,fh()),vo(r,t,n)}}function mo(e,t,r){var n=ph(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(go(e))yo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,xn(o,a)){var l=t.interleaved;return null===l?(i.next=i,Gs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(e){}null!==(r=zs(e,t,i,n))&&(mh(r,e,n,i=fh()),vo(r,t,n))}}function go(e){var t=e.alternate;return e===Ca||null!==t&&t===Ca}function yo(e,t){Ma=Ia=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function vo(e,t,r){if(0!=(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Mt(e,r)}}var _o={readContext:Fs,useCallback:Na,useContext:Na,useEffect:Na,useImperativeHandle:Na,useInsertionEffect:Na,useLayoutEffect:Na,useMemo:Na,useReducer:Na,useRef:Na,useState:Na,useDebugValue:Na,useDeferredValue:Na,useTransition:Na,useMutableSource:Na,useSyncExternalStore:Na,useId:Na,unstable_isNewReconciler:!1},xo={readContext:Fs,useCallback:function(e,t){return Fa().memoizedState=[e,void 0===t?null:t],e},useContext:Fs,useEffect:to,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,Ja(4194308,4,so.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ja(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ja(4,2,e,t)},useMemo:function(e,t){var r=Fa();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Fa();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=po.bind(null,Ca,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Fa().memoizedState=e},useState:Ka,useDebugValue:oo,useDeferredValue:function(e){return Fa().memoizedState=e},useTransition:function(){var e=Ka(!1),t=e[0];return e=co.bind(null,e[1]),Fa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ca,i=Fa();if(ys){if(void 0===r)throw Error(v(407));r=r()}else{if(r=t(),null===Hl)throw Error(v(349));0!=(30&Aa)||Va(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,to($a.bind(null,n,s,e),[e]),n.flags|=2048,Qa(9,Wa.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=Fa(),t=Hl.identifierPrefix;if(ys){var r=us;t=":"+t+"R"+(r=(hs&~(1<<32-_t(hs)-1)).toString(32)+r),0<(r=ka++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=Da++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},bo={readContext:Fs,useCallback:lo,useContext:Fs,useEffect:ro,useImperativeHandle:ao,useInsertionEffect:no,useLayoutEffect:io,useMemo:ho,useReducer:za,useRef:Za,useState:function(){return za(Ga)},useDebugValue:oo,useDeferredValue:function(e){return uo(Ua(),Ra.memoizedState,e)},useTransition:function(){return[za(Ga)[0],Ua().memoizedState]},useMutableSource:ja,useSyncExternalStore:Xa,useId:fo,unstable_isNewReconciler:!1},Eo={readContext:Fs,useCallback:lo,useContext:Fs,useEffect:ro,useImperativeHandle:ao,useInsertionEffect:no,useLayoutEffect:io,useMemo:ho,useReducer:Ha,useRef:Za,useState:function(){return Ha(Ga)},useDebugValue:oo,useDeferredValue:function(e){var t=Ua();return null===Ra?t.memoizedState=e:uo(t,Ra.memoizedState,e)},useTransition:function(){return[Ha(Ga)[0],Ua().memoizedState]},useMutableSource:ja,useSyncExternalStore:Xa,useId:fo,unstable_isNewReconciler:!1};function To(e,t){try{var r="",n=t;do{r+=ee(n),n=n.return}while(n);var i=r}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function wo(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function So(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var Ao="function"==typeof WeakMap?WeakMap:Map;function Co(e,t,r){(r=Ws(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){nh||(nh=!0,ih=n),So(0,t)},r}function Ro(e,t,r){(r=Ws(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){So(0,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(r.callback=function(){So(0,t),"function"!=typeof n&&(null===sh?sh=new Set([this]):sh.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function Po(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new Ao;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Fh.bind(null,e,t,r),t.then(e,e))}function Io(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Mo(e,t,r,n,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Ws(-1,1)).tag=2,$s(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ko=D.ReactCurrentOwner,Do=!1;function No(e,t,r,n){t.child=null===e?ua(t,null,r,n):ha(t,e.child,r,n)}function Oo(e,t,r,n,i){r=r.render;var s=t.ref;return Ls(t,i),n=Ba(e,t,r,n,s,i),r=La(),null===e||Do?(ys&&r&&fs(t),t.flags|=1,No(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,nl(e,t,i))}function Bo(e,t,r,n,i){if(null===e){var s=r.type;return"function"!=typeof s||Vh(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=$h(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Lo(e,t,s,n,i))}if(s=e.child,0==(e.lanes&i)){var a=s.memoizedProps;if((r=null!==(r=r.compare)?r:bn)(a,n)&&e.ref===t.ref)return nl(e,t,i)}return t.flags|=1,(e=Wh(s,n)).ref=t.ref,e.return=t,t.child=e}function Lo(e,t,r,n,i){if(null!==e){var s=e.memoizedProps;if(bn(s,n)&&e.ref===t.ref){if(Do=!1,t.pendingProps=n=s,0==(e.lanes&i))return t.lanes=e.lanes,nl(e,t,i);0!=(131072&e.flags)&&(Do=!0)}}return Go(e,t,r,n,i)}function Fo(e,t,r){var n=t.pendingProps,i=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ui(Wl,Vl),Vl|=r;else{if(0==(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ui(Wl,Vl),Vl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:r,Ui(Wl,Vl),Vl|=n}else null!==s?(n=s.baseLanes|r,t.memoizedState=null):n=r,Ui(Wl,Vl),Vl|=n;return No(e,t,i,r),t.child}function Uo(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Go(e,t,r,n,i){var s=Vi(r)?ji:zi.current;return s=Xi(t,s),Ls(t,i),r=Ba(e,t,r,n,s,i),n=La(),null===e||Do?(ys&&n&&fs(t),t.flags|=1,No(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,nl(e,t,i))}function zo(e,t,r,n,i){if(Vi(r)){var s=!0;qi(t)}else s=!1;if(Ls(t,i),null===t.stateNode)rl(e,t),ra(t,r,n),ia(t,r,n,i),n=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,h=r.contextType;"object"==typeof h&&null!==h?h=Fs(h):h=Xi(t,h=Vi(r)?ji:zi.current);var u=r.getDerivedStateFromProps,c="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;c||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==n||l!==h)&&na(t,a,n,h),js=!1;var d=t.memoizedState;a.state=d,Ks(t,n,a,i),l=t.memoizedState,o!==n||d!==l||Hi.current||js?("function"==typeof u&&(Js(t,r,u,n),l=t.memoizedState),(o=js||ta(t,r,o,n,d,l,h))?(c||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=h,n=o):("function"==typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Vs(e,t),o=t.memoizedProps,h=t.type===t.elementType?o:Ps(t.type,o),a.props=h,c=t.pendingProps,d=a.context,"object"==typeof(l=r.contextType)&&null!==l?l=Fs(l):l=Xi(t,l=Vi(r)?ji:zi.current);var f=r.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o!==c||d!==l)&&na(t,a,n,l),js=!1,d=t.memoizedState,a.state=d,Ks(t,n,a,i);var p=t.memoizedState;o!==c||d!==p||Hi.current||js?("function"==typeof f&&(Js(t,r,f,n),p=t.memoizedState),(h=js||ta(t,r,h,n,d,p,l)||!1)?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(n,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),a.props=n,a.state=p,a.context=l,n=h):("function"!=typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return Ho(e,t,r,n,s,i)}function Ho(e,t,r,n,i,s){Uo(e,t);var a=0!=(128&t.flags);if(!n&&!a)return i&&Ki(t,r,!1),nl(e,t,s);n=t.stateNode,ko.current=t;var o=a&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&a?(t.child=ha(t,e.child,null,s),t.child=ha(t,null,o,s)):No(e,t,o,s),t.memoizedState=n.state,i&&Ki(t,r,!0),t.child}function jo(e){var t=e.stateNode;t.pendingContext?$i(0,t.pendingContext,t.pendingContext!==t.context):t.context&&$i(0,t.context,!1),ga(e,t.containerInfo)}function Xo(e,t,r,n,i){return As(),Cs(i),t.flags|=256,No(e,t,r,n),t.child}var Vo,Wo,$o,Yo={dehydrated:null,treeContext:null,retryLane:0};function qo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ko(e,t,r){var n,i=t.pendingProps,s=xa.current,a=!1,o=0!=(128&t.flags);if((n=o)||(n=(null===e||null!==e.memoizedState)&&0!=(2&s)),n?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ui(xa,1&s),null===e)return Es(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,a?(i=t.mode,a=t.child,o={mode:"hidden",children:o},0==(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=o):a=qh(o,i,0,null),e=Yh(e,i,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=qo(r),t.memoizedState=Yo,e):Qo(t,o));if(null!==(s=e.memoizedState)&&null!==(n=s.dehydrated))return function(e,t,r,n,i,s,a){if(r)return 256&t.flags?(t.flags&=-257,Zo(e,t,a,n=wo(Error(v(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=qh({mode:"visible",children:n.children},i,0,null),(s=Yh(s,i,a,null)).flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,0!=(1&t.mode)&&ha(t,e.child,null,a),t.child.memoizedState=qo(a),t.memoizedState=Yo,s);if(0==(1&t.mode))return Zo(e,t,a,null);if("$!"===i.data){if(n=i.nextSibling&&i.nextSibling.dataset)var o=n.dgst;return n=o,Zo(e,t,a,n=wo(s=Error(v(419)),n,void 0))}if(o=0!=(a&e.childLanes),Do||o){if(null!==(n=Hl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(n.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Hs(e,i),mh(n,e,i,-1))}return Rh(),Zo(e,t,a,n=wo(Error(v(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Gh.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,gs=Ei(i.nextSibling),ms=t,ys=!0,vs=null,null!==e&&(as[os++]=hs,as[os++]=us,as[os++]=ls,hs=e.id,us=e.overflow,ls=t),t=Qo(t,n.children),t.flags|=4096,t)}(e,t,o,i,n,s,r);if(a){a=i.fallback,o=t.mode,n=(s=e.child).sibling;var l={mode:"hidden",children:i.children};return 0==(1&o)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Wh(s,l)).subtreeFlags=14680064&s.subtreeFlags,null!==n?a=Wh(n,a):(a=Yh(a,o,r,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,o=null===(o=e.child.memoizedState)?qo(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~r,t.memoizedState=Yo,i}return e=(a=e.child).sibling,i=Wh(a,{mode:"visible",children:i.children}),0==(1&t.mode)&&(i.lanes=r),i.return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Qo(e,t){return(t=qh({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Zo(e,t,r,n){return null!==n&&Cs(n),ha(t,e.child,null,r),(e=Qo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Jo(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Bs(e.return,t,r)}function el(e,t,r,n,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function tl(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(No(e,t,n.children,r),0!=(2&(n=xa.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Jo(e,r,t);else if(19===e.tag)Jo(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ui(xa,n),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===ba(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),el(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ba(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}el(t,!0,r,null,s);break;case"together":el(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rl(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function nl(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),ql|=t.lanes,0==(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(v(153));if(null!==t.child){for(r=Wh(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Wh(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function il(e,t){if(!ys)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function sl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function al(e,t,r){var n=t.pendingProps;switch(ps(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sl(t),null;case 1:case 17:return Vi(t.type)&&Wi(),sl(t),null;case 3:return n=t.stateNode,ya(),Fi(Hi),Fi(zi),Ta(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ws(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==vs&&(_h(vs),vs=null))),sl(t),null;case 5:_a(t);var i=ma(pa.current);if(r=t.type,null!==e&&null!=t.stateNode)Wo(e,t,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(v(166));return sl(t),null}if(e=ma(da.current),ws(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[Si]=t,n[Ai]=s,e=0!=(1&t.mode),r){case"dialog":Zn("cancel",n),Zn("close",n);break;case"iframe":case"object":case"embed":Zn("load",n);break;case"video":case"audio":for(i=0;i<Yn.length;i++)Zn(Yn[i],n);break;case"source":Zn("error",n);break;case"img":case"image":case"link":Zn("error",n),Zn("load",n);break;case"details":Zn("toggle",n);break;case"input":he(n,s),Zn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Zn("invalid",n);break;case"textarea":ye(n,s),Zn("invalid",n)}for(var a in Me(r,s),i=null,s)if(s.hasOwnProperty(a)){var o=s[a];"children"===a?"string"==typeof o?n.textContent!==o&&(!0!==s.suppressHydrationWarning&&ci(n.textContent,o,e),i=["children",o]):"number"==typeof o&&n.textContent!==""+o&&(!0!==s.suppressHydrationWarning&&ci(n.textContent,o,e),i=["children",""+o]):x.hasOwnProperty(a)&&null!=o&&"onScroll"===a&&Zn("scroll",n)}switch(r){case"input":se(n),de(n,s,!0);break;case"textarea":se(n),_e(n);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(n.onclick=di)}n=i,t.updateQueue=n,null!==n&&(t.flags|=4)}else{a=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=xe(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),"select"===r&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[Si]=t,e[Ai]=n,Vo(e,t),t.stateNode=e;e:{switch(a=ke(r,n),r){case"dialog":Zn("cancel",e),Zn("close",e),i=n;break;case"iframe":case"object":case"embed":Zn("load",e),i=n;break;case"video":case"audio":for(i=0;i<Yn.length;i++)Zn(Yn[i],e);i=n;break;case"source":Zn("error",e),i=n;break;case"img":case"image":case"link":Zn("error",e),Zn("load",e),i=n;break;case"details":Zn("toggle",e),i=n;break;case"input":he(e,n),i=le(e,n),Zn("invalid",e);break;case"option":default:i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=K({},n,{value:void 0}),Zn("invalid",e);break;case"textarea":ye(e,n),i=ge(e,n),Zn("invalid",e)}for(s in Me(r,i),o=i)if(o.hasOwnProperty(s)){var l=o[s];"style"===s?Pe(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&we(e,l):"children"===s?"string"==typeof l?("textarea"!==r||""!==l)&&Se(e,l):"number"==typeof l&&Se(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(x.hasOwnProperty(s)?null!=l&&"onScroll"===s&&Zn("scroll",e):null!=l&&k(e,s,l,a))}switch(r){case"input":se(e),de(e,n,!1);break;case"textarea":se(e),_e(e);break;case"option":null!=n.value&&e.setAttribute("value",""+ne(n.value));break;case"select":e.multiple=!!n.multiple,null!=(s=n.value)?me(e,!!n.multiple,s,!1):null!=n.defaultValue&&me(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=di)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return sl(t),null;case 6:if(e&&null!=t.stateNode)$o(0,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(v(166));if(r=ma(pa.current),ma(da.current),ws(t)){if(n=t.stateNode,r=t.memoizedProps,n[Si]=t,(s=n.nodeValue!==r)&&null!==(e=ms))switch(e.tag){case 3:ci(n.nodeValue,r,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&ci(n.nodeValue,r,0!=(1&e.mode))}s&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[Si]=t,t.stateNode=n}return sl(t),null;case 13:if(Fi(xa),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ys&&null!==gs&&0!=(1&t.mode)&&0==(128&t.flags))Ss(),As(),t.flags|=98560,s=!1;else if(s=ws(t),null!==n&&null!==n.dehydrated){if(null===e){if(!s)throw Error(v(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(v(317));s[Si]=t}else As(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;sl(t),s=!1}else null!==vs&&(_h(vs),vs=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&xa.current)?0===$l&&($l=3):Rh())),null!==t.updateQueue&&(t.flags|=4),sl(t),null);case 4:return ya(),null===e&&ti(t.stateNode.containerInfo),sl(t),null;case 10:return Os(t.type._context),sl(t),null;case 19:if(Fi(xa),null===(s=t.memoizedState))return sl(t),null;if(n=0!=(128&t.flags),null===(a=s.rendering))if(n)il(s,!1);else{if(0!==$l||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=ba(e))){for(t.flags|=128,il(s,!1),null!==(n=a.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(s=r).flags&=14680066,null===(a=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ui(xa,1&xa.current|2),t.child}e=e.sibling}null!==s.tail&&ut()>th&&(t.flags|=128,n=!0,il(s,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ba(a))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),il(s,!0),null===s.tail&&"hidden"===s.tailMode&&!a.alternate&&!ys)return sl(t),null}else 2*ut()-s.renderingStartTime>th&&1073741824!==r&&(t.flags|=128,n=!0,il(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(null!==(r=s.last)?r.sibling=a:t.child=a,s.last=a)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ut(),t.sibling=null,r=xa.current,Ui(xa,n?1&r|2:1&r),t):(sl(t),null);case 22:case 23:return wh(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!=(1&t.mode)?0!=(1073741824&Vl)&&(sl(t),6&t.subtreeFlags&&(t.flags|=8192)):sl(t),null;case 24:case 25:return null}throw Error(v(156,t.tag))}function ol(e,t){switch(ps(t),t.tag){case 1:return Vi(t.type)&&Wi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ya(),Fi(Hi),Fi(zi),Ta(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return _a(t),null;case 13:if(Fi(xa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(v(340));As()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Fi(xa),null;case 4:return ya(),null;case 10:return Os(t.type._context),null;case 22:case 23:return wh(),null;default:return null}}Vo=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Wo=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,ma(da.current);var s,a=null;switch(r){case"input":i=le(e,i),n=le(e,n),a=[];break;case"select":i=K({},i,{value:void 0}),n=K({},n,{value:void 0}),a=[];break;case"textarea":i=ge(e,i),n=ge(e,n),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof n.onClick&&(e.onclick=di)}for(h in Me(r,n),r=null,i)if(!n.hasOwnProperty(h)&&i.hasOwnProperty(h)&&null!=i[h])if("style"===h){var o=i[h];for(s in o)o.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(x.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in n){var l=n[h];if(o=null!=i?i[h]:void 0,n.hasOwnProperty(h)&&l!==o&&(null!=l||null!=o))if("style"===h)if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(a||(a=[]),a.push(h,r)),r=l;else"dangerouslySetInnerHTML"===h?(l=l?l.__html:void 0,o=o?o.__html:void 0,null!=l&&o!==l&&(a=a||[]).push(h,l)):"children"===h?"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(h,""+l):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(x.hasOwnProperty(h)?(null!=l&&"onScroll"===h&&Zn("scroll",e),a||o===l||(a=[])):(a=a||[]).push(h,l))}r&&(a=a||[]).push("style",r);var h=a;(t.updateQueue=h)&&(t.flags|=4)}},$o=function(e,t,r,n){r!==n&&(t.flags|=4)};var ll=!1,hl=!1,ul="function"==typeof WeakSet?WeakSet:Set,cl=null;function dl(e,t){var r=e.ref;if(null!==r)if("function"==typeof r)try{r(null)}catch(r){Lh(e,t,r)}else r.current=null}function fl(e,t,r){try{r()}catch(r){Lh(e,t,r)}}var pl=!1;function ml(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&fl(t,r,s)}i=i.next}while(i!==n)}}function gl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function yl(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"==typeof t?t(e):t.current=e}}function vl(e){var t=e.alternate;null!==t&&(e.alternate=null,vl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[Si],delete t[Ai],delete t[Ri],delete t[Pi],delete t[Ii])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _l(e){return 5===e.tag||3===e.tag||4===e.tag}function xl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||_l(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function bl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=di));else if(4!==n&&null!==(e=e.child))for(bl(e,t,r),e=e.sibling;null!==e;)bl(e,t,r),e=e.sibling}function El(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(El(e,t,r),e=e.sibling;null!==e;)El(e,t,r),e=e.sibling}var Tl=null,wl=!1;function Sl(e,t,r){for(r=r.child;null!==r;)Al(e,t,r),r=r.sibling}function Al(e,t,r){if(vt&&"function"==typeof vt.onCommitFiberUnmount)try{vt.onCommitFiberUnmount(yt,r)}catch(e){}switch(r.tag){case 5:hl||dl(r,t);case 6:var n=Tl,i=wl;Tl=null,Sl(e,t,r),wl=i,null!==(Tl=n)&&(wl?(e=Tl,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):Tl.removeChild(r.stateNode));break;case 18:null!==Tl&&(wl?(e=Tl,r=r.stateNode,8===e.nodeType?bi(e.parentNode,r):1===e.nodeType&&bi(e,r),tr(e)):bi(Tl,r.stateNode));break;case 4:n=Tl,i=wl,Tl=r.stateNode.containerInfo,wl=!0,Sl(e,t,r),Tl=n,wl=i;break;case 0:case 11:case 14:case 15:if(!hl&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!=(2&s)||0!=(4&s))&&fl(r,t,a),i=i.next}while(i!==n)}Sl(e,t,r);break;case 1:if(!hl&&(dl(r,t),"function"==typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(e){Lh(r,t,e)}Sl(e,t,r);break;case 21:Sl(e,t,r);break;case 22:1&r.mode?(hl=(n=hl)||null!==r.memoizedState,Sl(e,t,r),hl=n):Sl(e,t,r);break;default:Sl(e,t,r)}}function Cl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new ul),t.forEach((function(t){var n=zh.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function Rl(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,a=t,o=a;e:for(;null!==o;){switch(o.tag){case 5:Tl=o.stateNode,wl=!1;break e;case 3:case 4:Tl=o.stateNode.containerInfo,wl=!0;break e}o=o.return}if(null===Tl)throw Error(v(160));Al(s,a,i),Tl=null,wl=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(e){Lh(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)Pl(t,e),t=t.sibling}function Pl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rl(t,e),Il(e),4&n){try{ml(3,e,e.return),gl(3,e)}catch(t){Lh(e,e.return,t)}try{ml(5,e,e.return)}catch(t){Lh(e,e.return,t)}}break;case 1:Rl(t,e),Il(e),512&n&&null!==r&&dl(r,r.return);break;case 5:if(Rl(t,e),Il(e),512&n&&null!==r&&dl(r,r.return),32&e.flags){var i=e.stateNode;try{Se(i,"")}catch(t){Lh(e,e.return,t)}}if(4&n&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==r?r.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===o&&"radio"===s.type&&null!=s.name&&ue(i,s),ke(o,a);var h=ke(o,s);for(a=0;a<l.length;a+=2){var u=l[a],c=l[a+1];"style"===u?Pe(i,c):"dangerouslySetInnerHTML"===u?we(i,c):"children"===u?Se(i,c):k(i,u,c,h)}switch(o){case"input":ce(i,s);break;case"textarea":ve(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?me(i,!!s.multiple,f,!1):d!==!!s.multiple&&(null!=s.defaultValue?me(i,!!s.multiple,s.defaultValue,!0):me(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ai]=s}catch(t){Lh(e,e.return,t)}}break;case 6:if(Rl(t,e),Il(e),4&n){if(null===e.stateNode)throw Error(v(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(t){Lh(e,e.return,t)}}break;case 3:if(Rl(t,e),Il(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{tr(t.containerInfo)}catch(t){Lh(e,e.return,t)}break;case 4:default:Rl(t,e),Il(e);break;case 13:Rl(t,e),Il(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(eh=ut())),4&n&&Cl(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(hl=(h=hl)||u,Rl(t,e),hl=h):Rl(t,e),Il(e),8192&n){if(h=null!==e.memoizedState,(e.stateNode.isHidden=h)&&!u&&0!=(1&e.mode))for(cl=e,u=e.child;null!==u;){for(c=cl=u;null!==cl;){switch(f=(d=cl).child,d.tag){case 0:case 11:case 14:case 15:ml(4,d,d.return);break;case 1:dl(d,d.return);var p=d.stateNode;if("function"==typeof p.componentWillUnmount){n=d,r=d.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(e){Lh(n,r,e)}}break;case 5:dl(d,d.return);break;case 22:if(null!==d.memoizedState){Nl(c);continue}}null!==f?(f.return=d,cl=f):Nl(c)}u=u.sibling}e:for(u=null,c=e;;){if(5===c.tag){if(null===u){u=c;try{i=c.stateNode,h?"function"==typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(o=c.stateNode,a=null!=(l=c.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,o.style.display=Re("display",a))}catch(t){Lh(e,e.return,t)}}}else if(6===c.tag){if(null===u)try{c.stateNode.nodeValue=h?"":c.memoizedProps}catch(t){Lh(e,e.return,t)}}else if((22!==c.tag&&23!==c.tag||null===c.memoizedState||c===e)&&null!==c.child){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;null===c.sibling;){if(null===c.return||c.return===e)break e;u===c&&(u=null),c=c.return}u===c&&(u=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Rl(t,e),Il(e),4&n&&Cl(e);case 21:}}function Il(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(_l(r)){var n=r;break e}r=r.return}throw Error(v(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(Se(i,""),n.flags&=-33),El(e,xl(e),i);break;case 3:case 4:var s=n.stateNode.containerInfo;bl(e,xl(e),s);break;default:throw Error(v(161))}}catch(t){Lh(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ml(e,t,r){cl=e,kl(e,t,r)}function kl(e,t,r){for(var n=0!=(1&e.mode);null!==cl;){var i=cl,s=i.child;if(22===i.tag&&n){var a=null!==i.memoizedState||ll;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||hl;o=ll;var h=hl;if(ll=a,(hl=l)&&!h)for(cl=i;null!==cl;)l=(a=cl).child,22===a.tag&&null!==a.memoizedState?Ol(i):null!==l?(l.return=a,cl=l):Ol(i);for(;null!==s;)cl=s,kl(s,t,r),s=s.sibling;cl=i,ll=o,hl=h}Dl(e)}else 0!=(8772&i.subtreeFlags)&&null!==s?(s.return=i,cl=s):Dl(e)}}function Dl(e){for(;null!==cl;){var t=cl;if(0!=(8772&t.flags)){var r=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:hl||gl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!hl)if(null===r)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Ps(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Qs(t,s,n);break;case 3:var a=t.updateQueue;if(null!==a){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Qs(t,a,r)}break;case 5:var o=t.stateNode;if(null===r&&4&t.flags){r=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var h=t.alternate;if(null!==h){var u=h.memoizedState;if(null!==u){var c=u.dehydrated;null!==c&&tr(c)}}}break;default:throw Error(v(163))}hl||512&t.flags&&yl(t)}catch(e){Lh(t,t.return,e)}}if(t===e){cl=null;break}if(null!==(r=t.sibling)){r.return=t.return,cl=r;break}cl=t.return}}function Nl(e){for(;null!==cl;){var t=cl;if(t===e){cl=null;break}var r=t.sibling;if(null!==r){r.return=t.return,cl=r;break}cl=t.return}}function Ol(e){for(;null!==cl;){var t=cl;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{gl(4,t)}catch(e){Lh(t,r,e)}break;case 1:var n=t.stateNode;if("function"==typeof n.componentDidMount){var i=t.return;try{n.componentDidMount()}catch(e){Lh(t,i,e)}}var s=t.return;try{yl(t)}catch(e){Lh(t,s,e)}break;case 5:var a=t.return;try{yl(t)}catch(e){Lh(t,a,e)}}}catch(e){Lh(t,t.return,e)}if(t===e){cl=null;break}var o=t.sibling;if(null!==o){o.return=t.return,cl=o;break}cl=t.return}}var Bl,Ll=Math.ceil,Fl=D.ReactCurrentDispatcher,Ul=D.ReactCurrentOwner,Gl=D.ReactCurrentBatchConfig,zl=0,Hl=null,jl=null,Xl=0,Vl=0,Wl=Li(0),$l=0,Yl=null,ql=0,Kl=0,Ql=0,Zl=null,Jl=null,eh=0,th=1/0,rh=null,nh=!1,ih=null,sh=null,ah=!1,oh=null,lh=0,hh=0,uh=null,ch=-1,dh=0;function fh(){return 0!=(6&zl)?ut():-1!==ch?ch:ch=ut()}function ph(e){return 0==(1&e.mode)?1:0!=(2&zl)&&0!==Xl?Xl&-Xl:null!==Rs.transition?(0===dh&&(dh=Rt()),dh):0!==(e=kt)?e:e=void 0===(e=window.event)?16:hr(e.type)}function mh(e,t,r,n){if(50<hh)throw hh=0,uh=null,Error(v(185));It(e,r,n),0!=(2&zl)&&e===Hl||(e===Hl&&(0==(2&zl)&&(Kl|=r),4===$l&&xh(e,Xl)),gh(e,n),1===r&&0===zl&&0==(1&t.mode)&&(th=ut()+500,Zi&&ts()))}function gh(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-_t(s),o=1<<a,l=i[a];-1===l?0!=(o&r)&&0==(o&n)||(i[a]=At(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var n=St(e,e===Hl?Xl:0);if(0===n)null!==r&&ot(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&ot(r),1===t)0===e.tag?function(e){Zi=!0,es(e)}(bh.bind(null,e)):es(bh.bind(null,e)),_i((function(){0==(6&zl)&&ts()})),r=null;else{switch(Dt(n)){case 1:r=dt;break;case 4:r=ft;break;case 16:default:r=pt;break;case 536870912:r=gt}r=Hh(r,yh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function yh(e,t){if(ch=-1,dh=0,0!=(6&zl))throw Error(v(327));var r=e.callbackNode;if(Oh()&&e.callbackNode!==r)return null;var n=St(e,e===Hl?Xl:0);if(0===n)return null;if(0!=(30&n)||0!=(n&e.expiredLanes)||t)t=Ph(e,n);else{t=n;var i=zl;zl|=2;var s=Ch();for(Hl===e&&Xl===t||(rh=null,th=ut()+500,Sh(e,t));;)try{Mh();break}catch(t){Ah(e,t)}Ns(),Fl.current=s,zl=i,null!==jl?t=0:(Hl=null,Xl=0,t=$l)}if(0!==t){if(2===t&&(0!==(i=Ct(e))&&(n=i,t=vh(e,i))),1===t)throw r=Yl,Sh(e,0),xh(e,n),gh(e,ut()),r;if(6===t)xh(e,n);else{if(i=e.current.alternate,0==(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!xn(s(),i))return!1}catch(e){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=Ph(e,n))&&(0!==(s=Ct(e))&&(n=s,t=vh(e,s))),1===t))throw r=Yl,Sh(e,0),xh(e,n),gh(e,ut()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(v(345));case 2:case 5:Nh(e,Jl,rh);break;case 3:if(xh(e,n),(130023424&n)===n&&10<(t=eh+500-ut())){if(0!==St(e,0))break;if(((i=e.suspendedLanes)&n)!==n){fh(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=gi(Nh.bind(null,e,Jl,rh),t);break}Nh(e,Jl,rh);break;case 4:if(xh(e,n),(4194240&n)===n)break;for(t=e.eventTimes,i=-1;0<n;){var a=31-_t(n);s=1<<a,(a=t[a])>i&&(i=a),n&=~s}if(n=i,10<(n=(120>(n=ut()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ll(n/1960))-n)){e.timeoutHandle=gi(Nh.bind(null,e,Jl,rh),n);break}Nh(e,Jl,rh);break;default:throw Error(v(329))}}}return gh(e,ut()),e.callbackNode===r?yh.bind(null,e):null}function vh(e,t){var r=Zl;return e.current.memoizedState.isDehydrated&&(Sh(e,t).flags|=256),2!==(e=Ph(e,t))&&(t=Jl,Jl=r,null!==t&&_h(t)),e}function _h(e){null===Jl?Jl=e:Jl.push.apply(Jl,e)}function xh(e,t){for(t&=~Ql,t&=~Kl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-_t(t),n=1<<r;e[r]=-1,t&=~n}}function bh(e){if(0!=(6&zl))throw Error(v(327));Oh();var t=St(e,0);if(0==(1&t))return gh(e,ut()),null;var r=Ph(e,t);if(0!==e.tag&&2===r){var n=Ct(e);0!==n&&(t=n,r=vh(e,n))}if(1===r)throw r=Yl,Sh(e,0),xh(e,t),gh(e,ut()),r;if(6===r)throw Error(v(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nh(e,Jl,rh),gh(e,ut()),null}function Eh(e,t){var r=zl;zl|=1;try{return e(t)}finally{0===(zl=r)&&(th=ut()+500,Zi&&ts())}}function Th(e){null!==oh&&0===oh.tag&&0==(6&zl)&&Oh();var t=zl;zl|=1;var r=Gl.transition,n=kt;try{if(Gl.transition=null,kt=1,e)return e()}finally{kt=n,Gl.transition=r,0==(6&(zl=t))&&ts()}}function wh(){Vl=Wl.current,Fi(Wl)}function Sh(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,yi(r)),null!==jl)for(r=jl.return;null!==r;){var n=r;switch(ps(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&Wi();break;case 3:ya(),Fi(Hi),Fi(zi),Ta();break;case 5:_a(n);break;case 4:ya();break;case 13:case 19:Fi(xa);break;case 10:Os(n.type._context);break;case 22:case 23:wh()}r=r.return}if(Hl=e,jl=e=Wh(e.current,null),Xl=Vl=t,$l=0,Yl=null,Ql=Kl=ql=0,Jl=Zl=null,null!==Us){for(t=0;t<Us.length;t++)if(null!==(n=(r=Us[t]).interleaved)){r.interleaved=null;var i=n.next,s=r.pending;if(null!==s){var a=s.next;s.next=i,n.next=a}r.pending=n}Us=null}return e}function Ah(e,t){for(;;){var r=jl;try{if(Ns(),wa.current=_o,Ia){for(var n=Ca.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}Ia=!1}if(Aa=0,Pa=Ra=Ca=null,Ma=!1,ka=0,Ul.current=null,null===r||null===r.return){$l=1,Yl=t,jl=null;break}e:{var s=e,a=r.return,o=r,l=t;if(t=Xl,o.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var h=l,u=o,c=u.tag;if(0==(1&u.mode)&&(0===c||11===c||15===c)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=Io(a);if(null!==f){f.flags&=-257,Mo(f,a,o,0,t),1&f.mode&&Po(s,h,t),l=h;var p=(t=f).updateQueue;if(null===p){var m=new Set;m.add(l),t.updateQueue=m}else p.add(l);break e}if(0==(1&t)){Po(s,h,t),Rh();break e}l=Error(v(426))}else if(ys&&1&o.mode){var g=Io(a);if(null!==g){0==(65536&g.flags)&&(g.flags|=256),Mo(g,a,o,0,t),Cs(To(l,o));break e}}s=l=To(l,o),4!==$l&&($l=2),null===Zl?Zl=[s]:Zl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,qs(s,Co(0,l,t));break e;case 1:o=l;var y=s.type,_=s.stateNode;if(0==(128&s.flags)&&("function"==typeof y.getDerivedStateFromError||null!==_&&"function"==typeof _.componentDidCatch&&(null===sh||!sh.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t,qs(s,Ro(s,o,t));break e}}s=s.return}while(null!==s)}Dh(r)}catch(e){t=e,jl===r&&null!==r&&(jl=r=r.return);continue}break}}function Ch(){var e=Fl.current;return Fl.current=_o,null===e?_o:e}function Rh(){0!==$l&&3!==$l&&2!==$l||($l=4),null===Hl||0==(268435455&ql)&&0==(268435455&Kl)||xh(Hl,Xl)}function Ph(e,t){var r=zl;zl|=2;var n=Ch();for(Hl===e&&Xl===t||(rh=null,Sh(e,t));;)try{Ih();break}catch(t){Ah(e,t)}if(Ns(),zl=r,Fl.current=n,null!==jl)throw Error(v(261));return Hl=null,Xl=0,$l}function Ih(){for(;null!==jl;)kh(jl)}function Mh(){for(;null!==jl&&!lt();)kh(jl)}function kh(e){var t=Bl(e.alternate,e,Vl);e.memoizedProps=e.pendingProps,null===t?Dh(e):jl=t,Ul.current=null}function Dh(e){var t=e;do{var r=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(r=al(r,t,Vl)))return void(jl=r)}else{if(null!==(r=ol(r,t)))return r.flags&=32767,void(jl=r);if(null===e)return $l=6,void(jl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(jl=t);jl=t=e}while(null!==t);0===$l&&($l=5)}function Nh(e,t,r){var n=kt,i=Gl.transition;try{Gl.transition=null,kt=1,function(e,t,r,n){do{Oh()}while(null!==oh);if(0!=(6&zl))throw Error(v(327));r=e.finishedWork;var i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(v(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-_t(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}(e,s),e===Hl&&(jl=Hl=null,Xl=0),0==(2064&r.subtreeFlags)&&0==(2064&r.flags)||ah||(ah=!0,Hh(pt,(function(){return Oh(),null}))),s=0!=(15990&r.flags),0!=(15990&r.subtreeFlags)||s){s=Gl.transition,Gl.transition=null;var a=kt;kt=1;var o=zl;zl|=4,Ul.current=null,function(e,t){if(fi=nr,An(e=Sn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch(e){r=null;break e}var a=0,o=-1,l=-1,h=0,u=0,c=e,d=null;t:for(;;){for(var f;c!==r||0!==i&&3!==c.nodeType||(o=a+i),c!==s||0!==n&&3!==c.nodeType||(l=a+n),3===c.nodeType&&(a+=c.nodeValue.length),null!==(f=c.firstChild);)d=c,c=f;for(;;){if(c===e)break t;if(d===r&&++h===i&&(o=a),d===s&&++u===n&&(l=a),null!==(f=c.nextSibling))break;d=(c=d).parentNode}c=f}r=-1===o||-1===l?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(pi={focusedElem:e,selectionRange:r},nr=!1,cl=t;null!==cl;)if(e=(t=cl).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,cl=e;else for(;null!==cl;){t=cl;try{var p=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Ps(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(v(163))}}catch(e){Lh(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,cl=e;break}cl=t.return}p=pl,pl=!1}(e,r),Pl(r,e),Cn(pi),nr=!!fi,pi=fi=null,e.current=r,Ml(r,e,i),ht(),zl=o,kt=a,Gl.transition=s}else e.current=r;if(ah&&(ah=!1,oh=e,lh=i),s=e.pendingLanes,0===s&&(sh=null),function(e){if(vt&&"function"==typeof vt.onCommitFiberRoot)try{vt.onCommitFiberRoot(yt,e,void 0,128==(128&e.current.flags))}catch(e){}}(r.stateNode),gh(e,ut()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(nh)throw nh=!1,e=ih,ih=null,e;0!=(1&lh)&&0!==e.tag&&Oh(),s=e.pendingLanes,0!=(1&s)?e===uh?hh++:(hh=0,uh=e):hh=0,ts()}(e,t,r,n)}finally{Gl.transition=i,kt=n}return null}function Oh(){if(null!==oh){var e=Dt(lh),t=Gl.transition,r=kt;try{if(Gl.transition=null,kt=16>e?16:e,null===oh)var n=!1;else{if(e=oh,oh=null,lh=0,0!=(6&zl))throw Error(v(331));var i=zl;for(zl|=4,cl=e.current;null!==cl;){var s=cl,a=s.child;if(0!=(16&cl.flags)){var o=s.deletions;if(null!==o){for(var l=0;l<o.length;l++){var h=o[l];for(cl=h;null!==cl;){var u=cl;switch(u.tag){case 0:case 11:case 15:ml(8,u,s)}var c=u.child;if(null!==c)c.return=u,cl=c;else for(;null!==cl;){var d=(u=cl).sibling,f=u.return;if(vl(u),u===h){cl=null;break}if(null!==d){d.return=f,cl=d;break}cl=f}}}var p=s.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}cl=s}}if(0!=(2064&s.subtreeFlags)&&null!==a)a.return=s,cl=a;else e:for(;null!==cl;){if(0!=(2048&(s=cl).flags))switch(s.tag){case 0:case 11:case 15:ml(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,cl=y;break e}cl=s.return}}var _=e.current;for(cl=_;null!==cl;){var x=(a=cl).child;if(0!=(2064&a.subtreeFlags)&&null!==x)x.return=a,cl=x;else e:for(a=_;null!==cl;){if(0!=(2048&(o=cl).flags))try{switch(o.tag){case 0:case 11:case 15:gl(9,o)}}catch(e){Lh(o,o.return,e)}if(o===a){cl=null;break e}var b=o.sibling;if(null!==b){b.return=o.return,cl=b;break e}cl=o.return}}if(zl=i,ts(),vt&&"function"==typeof vt.onPostCommitFiberRoot)try{vt.onPostCommitFiberRoot(yt,e)}catch(e){}n=!0}return n}finally{kt=r,Gl.transition=t}}return!1}function Bh(e,t,r){e=$s(e,t=Co(0,t=To(r,t),1),1),t=fh(),null!==e&&(It(e,1,t),gh(e,t))}function Lh(e,t,r){if(3===e.tag)Bh(e,e,r);else for(;null!==t;){if(3===t.tag){Bh(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===sh||!sh.has(n))){t=$s(t,e=Ro(t,e=To(r,e),1),1),e=fh(),null!==t&&(It(t,1,e),gh(t,e));break}}t=t.return}}function Fh(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=fh(),e.pingedLanes|=e.suspendedLanes&r,Hl===e&&(Xl&r)===r&&(4===$l||3===$l&&(130023424&Xl)===Xl&&500>ut()-eh?Sh(e,0):Ql|=r),gh(e,t)}function Uh(e,t){0===t&&(0==(1&e.mode)?t=1:(t=Tt,0==(130023424&(Tt<<=1))&&(Tt=4194304)));var r=fh();null!==(e=Hs(e,t))&&(It(e,t,r),gh(e,r))}function Gh(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Uh(e,r)}function zh(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(v(314))}null!==n&&n.delete(t),Uh(e,r)}function Hh(e,t){return at(e,t)}function jh(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xh(e,t,r,n){return new jh(e,t,r,n)}function Vh(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Wh(e,t){var r=e.alternate;return null===r?((r=Xh(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function $h(e,t,r,n,i,s){var a=2;if(n=e,"function"==typeof e)Vh(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case B:return Yh(r.children,i,s,t);case L:a=8,i|=8;break;case F:return(e=Xh(12,r,t,2|i)).elementType=F,e.lanes=s,e;case H:return(e=Xh(13,r,t,i)).elementType=H,e.lanes=s,e;case j:return(e=Xh(19,r,t,i)).elementType=j,e.lanes=s,e;case W:return qh(r,i,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case U:a=10;break e;case G:a=9;break e;case z:a=11;break e;case X:a=14;break e;case V:a=16,n=null;break e}throw Error(v(130,null==e?e:typeof e,""))}return(t=Xh(a,r,t,i)).elementType=e,t.type=n,t.lanes=s,t}function Yh(e,t,r,n){return(e=Xh(7,e,n,t)).lanes=r,e}function qh(e,t,r,n){return(e=Xh(22,e,n,t)).elementType=W,e.lanes=r,e.stateNode={isHidden:!1},e}function Kh(e,t,r){return(e=Xh(6,e,null,t)).lanes=r,e}function Qh(e,t,r){return(t=Xh(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zh(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pt(0),this.expirationTimes=Pt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pt(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Jh(e,t,r,n,i,s,a,o,l){return e=new Zh(e,t,r,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Xh(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xs(s),e}function eu(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:O,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}function tu(e){if(!e)return Gi;e:{if(tt(e=e._reactInternals)!==e||1!==e.tag)throw Error(v(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Vi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(v(171))}if(1===e.tag){var r=e.type;if(Vi(r))return Yi(e,r,t)}return t}function ru(e,t,r,n,i,s,a,o,l){return(e=Jh(r,n,!0,e,0,s,0,o,l)).context=tu(null),r=e.current,(s=Ws(n=fh(),i=ph(r))).callback=null!=t?t:null,$s(r,s,i),e.current.lanes=i,It(e,i,n),gh(e,n),e}function nu(e,t,r,n){var i=t.current,s=fh(),a=ph(i);return r=tu(r),null===t.context?t.context=r:t.pendingContext=r,(t=Ws(s,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=$s(i,t,a))&&(mh(e,i,a,s),Ys(e,i,a)),a}function iu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function su(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function au(e,t){su(e,t),(e=e.alternate)&&su(e,t)}Bl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Hi.current)Do=!0;else{if(0==(e.lanes&r)&&0==(128&t.flags))return Do=!1,function(e,t,r){switch(t.tag){case 3:jo(t),As();break;case 5:va(t);break;case 1:Vi(t.type)&&qi(t);break;case 4:ga(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Ui(Is,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ui(xa,1&xa.current),t.flags|=128,null):0!=(r&t.child.childLanes)?Ko(e,t,r):(Ui(xa,1&xa.current),null!==(e=nl(e,t,r))?e.sibling:null);Ui(xa,1&xa.current);break;case 19:if(n=0!=(r&t.childLanes),0!=(128&e.flags)){if(n)return tl(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ui(xa,xa.current),n)break;return null;case 22:case 23:return t.lanes=0,Fo(e,t,r)}return nl(e,t,r)}(e,t,r);Do=0!=(131072&e.flags)}else Do=!1,ys&&0!=(1048576&t.flags)&&ds(t,ss,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;rl(e,t),e=t.pendingProps;var i=Xi(t,zi.current);Ls(t,r),i=Ba(null,t,n,e,i,r);var s=La();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Vi(n)?(s=!0,qi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Xs(t),i.updater=ea,t.stateNode=i,i._reactInternals=t,ia(t,n,e,r),t=Ho(null,t,n,!0,s,r)):(t.tag=0,ys&&s&&fs(t),No(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(rl(e,t),e=t.pendingProps,n=(i=n._init)(n._payload),t.type=n,i=t.tag=function(e){if("function"==typeof e)return Vh(e)?1:0;if(null!=e){if((e=e.$$typeof)===z)return 11;if(e===X)return 14}return 2}(n),e=Ps(n,e),i){case 0:t=Go(null,t,n,e,r);break e;case 1:t=zo(null,t,n,e,r);break e;case 11:t=Oo(null,t,n,e,r);break e;case 14:t=Bo(null,t,n,Ps(n.type,e),r);break e}throw Error(v(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,Go(e,t,n,i=t.elementType===n?i:Ps(n,i),r);case 1:return n=t.type,i=t.pendingProps,zo(e,t,n,i=t.elementType===n?i:Ps(n,i),r);case 3:e:{if(jo(t),null===e)throw Error(v(387));n=t.pendingProps,i=(s=t.memoizedState).element,Vs(e,t),Ks(t,n,null,r);var a=t.memoizedState;if(n=a.element,s.isDehydrated){if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Xo(e,t,n,r,i=To(Error(v(423)),t));break e}if(n!==i){t=Xo(e,t,n,r,i=To(Error(v(424)),t));break e}for(gs=Ei(t.stateNode.containerInfo.firstChild),ms=t,ys=!0,vs=null,r=ua(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(As(),n===i){t=nl(e,t,r);break e}No(e,t,n,r)}t=t.child}return t;case 5:return va(t),null===e&&Es(t),n=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,mi(n,i)?a=null:null!==s&&mi(n,s)&&(t.flags|=32),Uo(e,t),No(e,t,a,r),t.child;case 6:return null===e&&Es(t),null;case 13:return Ko(e,t,r);case 4:return ga(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=ha(t,null,n,r):No(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,Oo(e,t,n,i=t.elementType===n?i:Ps(n,i),r);case 7:return No(e,t,t.pendingProps,r),t.child;case 8:case 12:return No(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ui(Is,n._currentValue),n._currentValue=a,null!==s)if(xn(s.value,a)){if(s.children===i.children&&!Hi.current){t=nl(e,t,r);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var o=s.dependencies;if(null!==o){a=s.child;for(var l=o.firstContext;null!==l;){if(l.context===n){if(1===s.tag){(l=Ws(-1,r&-r)).tag=2;var h=s.updateQueue;if(null!==h){var u=(h=h.shared).pending;null===u?l.next=l:(l.next=u.next,u.next=l),h.pending=l}}s.lanes|=r,null!==(l=s.alternate)&&(l.lanes|=r),Bs(s.return,r,t),o.lanes|=r;break}l=l.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(v(341));a.lanes|=r,null!==(o=a.alternate)&&(o.lanes|=r),Bs(a,r,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}No(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Ls(t,r),n=n(i=Fs(i)),t.flags|=1,No(e,t,n,r),t.child;case 14:return i=Ps(n=t.type,t.pendingProps),Bo(e,t,n,i=Ps(n.type,i),r);case 15:return Lo(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Ps(n,i),rl(e,t),t.tag=1,Vi(n)?(e=!0,qi(t)):e=!1,Ls(t,r),ra(t,n,i),ia(t,n,i,r),Ho(null,t,n,!0,e,r);case 19:return tl(e,t,r);case 22:return Fo(e,t,r)}throw Error(v(156,t.tag))};var ou="function"==typeof reportError?reportError:function(e){console.error(e)};function lu(e){this._internalRoot=e}function hu(e){this._internalRoot=e}function uu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function cu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function du(){}function fu(e,t,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if("function"==typeof i){var o=i;i=function(){var e=iu(a);o.call(e)}}nu(t,a,e,i)}else a=function(e,t,r,n,i){if(i){if("function"==typeof n){var s=n;n=function(){var e=iu(a);s.call(e)}}var a=ru(t,n,e,0,null,!1,0,"",du);return e._reactRootContainer=a,e[Ci]=a.current,ti(8===e.nodeType?e.parentNode:e),Th(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof n){var o=n;n=function(){var e=iu(l);o.call(e)}}var l=Jh(e,0,!1,null,0,!1,0,"",du);return e._reactRootContainer=l,e[Ci]=l.current,ti(8===e.nodeType?e.parentNode:e),Th((function(){nu(t,l,r,n)})),l}(r,t,e,i,n);return iu(a)}hu.prototype.render=lu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(v(409));nu(e,t,null,null)},hu.prototype.unmount=lu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Th((function(){nu(null,e,null,null)})),t[Ci]=null}},hu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Wt.length&&0!==t&&t<Wt[r].priority;r++);Wt.splice(r,0,e),0===r&&Kt(e)}},Nt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=wt(t.pendingLanes);0!==r&&(Mt(t,1|r),gh(t,ut()),0==(6&zl)&&(th=ut()+500,ts()))}break;case 13:Th((function(){var t=Hs(e,1);if(null!==t){var r=fh();mh(t,e,1,r)}})),au(e,1)}},Ot=function(e){if(13===e.tag){var t=Hs(e,134217728);if(null!==t)mh(t,e,134217728,fh());au(e,134217728)}},Bt=function(e){if(13===e.tag){var t=ph(e),r=Hs(e,t);if(null!==r)mh(r,e,t,fh());au(e,t)}},Lt=function(){return kt},Ft=function(e,t){var r=kt;try{return kt=e,t()}finally{kt=r}},Oe=function(e,t,r){switch(t){case"input":if(ce(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Ni(n);if(!i)throw Error(v(90));ae(n),ce(n,i)}}}break;case"textarea":ve(e,r);break;case"select":null!=(t=r.value)&&me(e,!!r.multiple,t,!1)}},ze=Eh,He=Th;var pu={usingClientEntryPoint:!1,Events:[ki,Di,Ni,Ue,Ge,Eh]},mu={findFiberByHostInstance:Mi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},gu={bundleType:mu.bundleType,version:mu.version,rendererPackageName:mu.rendererPackageName,rendererConfig:mu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=it(e))?null:e.stateNode},findFiberByHostInstance:mu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var yu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yu.isDisabled&&yu.supportsFiber)try{yt=yu.inject(gu),vt=yu}catch(e){}}n=pu,i=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!uu(t))throw Error(v(200));return eu(e,t,null,r)},a=function(e,t){if(!uu(e))throw Error(v(299));var r=!1,n="",i=ou;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Jh(e,1,!1,null,0,r,0,n,i),e[Ci]=t.current,ti(8===e.nodeType?e.parentNode:e),new lu(t)},o=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(v(188));throw e=Object.keys(e).join(","),Error(v(268,e))}return e=null===(e=it(t))?null:e.stateNode},l=function(e){return Th(e)},h=function(e,t,r){if(!cu(t))throw Error(v(200));return fu(null,e,t,!0,r)},u=function(e,t,r){if(!uu(e))throw Error(v(405));var n=null!=r&&r.hydratedSources||null,i=!1,s="",a=ou;if(null!=r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(s=r.identifierPrefix),void 0!==r.onRecoverableError&&(a=r.onRecoverableError)),t=ru(t,null,e,1,null!=r?r:null,i,0,s,a),e[Ci]=t.current,ti(e),n)for(e=0;e<n.length;e++)i=(i=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new hu(t)},c=function(e,t,r){if(!cu(t))throw Error(v(200));return fu(null,e,t,!1,r)},d=function(e){if(!cu(e))throw Error(v(40));return!!e._reactRootContainer&&(Th((function(){fu(null,null,e,!1,(function(){e._reactRootContainer=null,e[Ci]=null}))})),!0)},f=Eh,p=function(e,t,r,n){if(!cu(r))throw Error(v(200));if(null==e||void 0===e._reactInternals)throw Error(v(38));return fu(e,t,r,!1,n)},m="18.2.0-next-9e3b772b8-20220608"})),s.register("fO90s",(function(e,t){e.exports=s("gcnCG")})),s.register("gcnCG",(function(t,r){
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var n,i,s,a,o,l,h,u,c,d,f,p,m,g,y,v,_,x,b;function E(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,i=e[n];if(!(0<S(i,t)))break e;e[n]=t,e[r]=i,r=n}}function T(e){return 0===e.length?null:e[0]}function w(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length,s=i>>>1;n<s;){var a=2*(n+1)-1,o=e[a],l=a+1,h=e[l];if(0>S(o,r))l<i&&0>S(h,o)?(e[n]=h,e[l]=r,n=l):(e[n]=o,e[a]=r,n=a);else{if(!(l<i&&0>S(h,r)))break e;e[n]=h,e[l]=r,n=l}}}return t}function S(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if(e(t.exports,"unstable_now",(()=>n),(e=>n=e)),e(t.exports,"unstable_IdlePriority",(()=>i),(e=>i=e)),e(t.exports,"unstable_ImmediatePriority",(()=>s),(e=>s=e)),e(t.exports,"unstable_LowPriority",(()=>a),(e=>a=e)),e(t.exports,"unstable_NormalPriority",(()=>o),(e=>o=e)),e(t.exports,"unstable_Profiling",(()=>l),(e=>l=e)),e(t.exports,"unstable_UserBlockingPriority",(()=>h),(e=>h=e)),e(t.exports,"unstable_cancelCallback",(()=>u),(e=>u=e)),e(t.exports,"unstable_continueExecution",(()=>c),(e=>c=e)),e(t.exports,"unstable_forceFrameRate",(()=>d),(e=>d=e)),e(t.exports,"unstable_getCurrentPriorityLevel",(()=>f),(e=>f=e)),e(t.exports,"unstable_getFirstCallbackNode",(()=>p),(e=>p=e)),e(t.exports,"unstable_next",(()=>m),(e=>m=e)),e(t.exports,"unstable_pauseExecution",(()=>g),(e=>g=e)),e(t.exports,"unstable_requestPaint",(()=>y),(e=>y=e)),e(t.exports,"unstable_runWithPriority",(()=>v),(e=>v=e)),e(t.exports,"unstable_scheduleCallback",(()=>_),(e=>_=e)),e(t.exports,"unstable_shouldYield",(()=>x),(e=>x=e)),e(t.exports,"unstable_wrapCallback",(()=>b),(e=>b=e)),"object"==typeof performance&&"function"==typeof performance.now){var A=performance;n=function(){return A.now()}}else{var C=Date,R=C.now();n=function(){return C.now()-R}}var P=[],I=[],M=1,k=null,D=3,N=!1,O=!1,B=!1,L="function"==typeof setTimeout?setTimeout:null,F="function"==typeof clearTimeout?clearTimeout:null,U="undefined"!=typeof setImmediate?setImmediate:null;function G(e){for(var t=T(I);null!==t;){if(null===t.callback)w(I);else{if(!(t.startTime<=e))break;w(I),t.sortIndex=t.expirationTime,E(P,t)}t=T(I)}}function z(e){if(B=!1,G(e),!O)if(null!==T(P))O=!0,J(H);else{var t=T(I);null!==t&&ee(z,t.startTime-e)}}function H(e,t){O=!1,B&&(B=!1,F(W),W=-1),N=!0;var r=D;try{for(G(t),k=T(P);null!==k&&(!(k.expirationTime>t)||e&&!q());){var i=k.callback;if("function"==typeof i){k.callback=null,D=k.priorityLevel;var s=i(k.expirationTime<=t);t=n(),"function"==typeof s?k.callback=s:k===T(P)&&w(P),G(t)}else w(P);k=T(P)}if(null!==k)var a=!0;else{var o=T(I);null!==o&&ee(z,o.startTime-t),a=!1}return a}finally{k=null,D=r,N=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,X=!1,V=null,W=-1,$=5,Y=-1;function q(){return!(n()-Y<$)}function K(){if(null!==V){var e=n();Y=e;var t=!0;try{t=V(!0,e)}finally{t?j():(X=!1,V=null)}}else X=!1}if("function"==typeof U)j=function(){U(K)};else if("undefined"!=typeof MessageChannel){var Q=new MessageChannel,Z=Q.port2;Q.port1.onmessage=K,j=function(){Z.postMessage(null)}}else j=function(){L(K,0)};function J(e){V=e,X||(X=!0,j())}function ee(e,t){W=L((function(){e(n())}),t)}i=5,s=1,a=4,o=3,l=null,h=2,u=function(e){e.callback=null},c=function(){O||N||(O=!0,J(H))},d=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<e?Math.floor(1e3/e):5},f=function(){return D},p=function(){return T(P)},m=function(e){switch(D){case 1:case 2:case 3:var t=3;break;default:t=D}var r=D;D=t;try{return e()}finally{D=r}},g=function(){},y=function(){},v=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=D;D=e;try{return t()}finally{D=r}},_=function(e,t,r){var i=n();switch("object"==typeof r&&null!==r?r="number"==typeof(r=r.delay)&&0<r?i+r:i:r=i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:M++,callback:t,priorityLevel:e,startTime:r,expirationTime:s=r+s,sortIndex:-1},r>i?(e.sortIndex=r,E(I,e),null===T(P)&&e===T(I)&&(B?(F(W),W=-1):B=!0,ee(z,r-i))):(e.sortIndex=s,E(P,e),O||N||(O=!0,J(H))),e},x=q,b=function(e){var t=D;return function(){var r=D;D=t;try{return e.apply(this,arguments)}finally{D=r}}}})),s.register("dBHwk",(function(e,r){!function(n){var i=r&&!r.nodeType&&r,s=e&&!e.nodeType&&e,a="object"==typeof t&&t;a.global!==a&&a.window!==a&&a.self!==a||(n=a);var o,l,h=2147483647,u=36,c=/^xn--/,d=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,g=String.fromCharCode;function y(e){throw new RangeError(p[e])}function v(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function _(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+v((e=e.replace(f,".")).split("."),t).join(".")}function x(e){for(var t,r,n=[],i=0,s=e.length;i<s;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<s?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function b(e){return v(e,(function(e){var t="";return e>65535&&(t+=g((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=g(e)})).join("")}function E(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function T(e,t,r){var n=0;for(e=r?m(e/700):e>>1,e+=m(e/t);e>455;n+=u)e=m(e/35);return m(n+36*e/(e+38))}function w(e){var t,r,n,i,s,a,o,l,c,d,f,p=[],g=e.length,v=0,_=128,x=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&y("not-basic"),p.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<g;){for(s=v,a=1,o=u;i>=g&&y("invalid-input"),((l=(f=e.charCodeAt(i++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:u)>=u||l>m((h-v)/a))&&y("overflow"),v+=l*a,!(l<(c=o<=x?1:o>=x+26?26:o-x));o+=u)a>m(h/(d=u-c))&&y("overflow"),a*=d;x=T(v-s,t=p.length+1,0==s),m(v/t)>h-_&&y("overflow"),_+=m(v/t),v%=t,p.splice(v++,0,_)}return b(p)}function S(e){var t,r,n,i,s,a,o,l,c,d,f,p,v,_,b,w=[];for(p=(e=x(e)).length,t=128,r=0,s=72,a=0;a<p;++a)(f=e[a])<128&&w.push(g(f));for(n=i=w.length,i&&w.push("-");n<p;){for(o=h,a=0;a<p;++a)(f=e[a])>=t&&f<o&&(o=f);for(o-t>m((h-r)/(v=n+1))&&y("overflow"),r+=(o-t)*v,t=o,a=0;a<p;++a)if((f=e[a])<t&&++r>h&&y("overflow"),f==t){for(l=r,c=u;!(l<(d=c<=s?1:c>=s+26?26:c-s));c+=u)b=l-d,_=u-d,w.push(g(E(d+b%_,0))),l=m(b/_);w.push(g(E(l,0))),s=T(r,v,n==i),r=0,++n}++r,++t}return w.join("")}if(o={version:"1.4.1",ucs2:{decode:x,encode:b},decode:w,encode:S,toASCII:function(e){return _(e,(function(e){return d.test(e)?"xn--"+S(e):e}))},toUnicode:function(e){return _(e,(function(e){return c.test(e)?w(e.slice(4).toLowerCase()):e}))}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",(function(){return o}));else if(i&&s)if(e.exports==i)s.exports=o;else for(l in o)o.hasOwnProperty(l)&&(i[l]=o[l]);else n.punycode=o}(this)})),s.register("kzGqM",(function(e,t){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,i,s){t=t||"&",i=i||"=";var a={};if("string"!=typeof e||0===e.length)return a;var o=/\+/g;e=e.split(t);var l=1e3;s&&"number"==typeof s.maxKeys&&(l=s.maxKeys);var h=e.length;l>0&&h>l&&(h=l);for(var u=0;u<h;++u){var c,d,f,p,m=e[u].replace(o,"%20"),g=m.indexOf(i);g>=0?(c=m.substr(0,g),d=m.substr(g+1)):(c=m,d=""),f=decodeURIComponent(c),p=decodeURIComponent(d),r(a,f)?n(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}})),s.register("kWD7b",(function(e,t){var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,a,o){return t=t||"&",a=a||"=",null===e&&(e=void 0),"object"==typeof e?i(s(e),(function(s){var o=encodeURIComponent(r(s))+a;return n(e[s])?i(e[s],(function(e){return o+encodeURIComponent(r(e))})).join(t):o+encodeURIComponent(r(e[s]))})).join(t):o?encodeURIComponent(r(o))+a+encodeURIComponent(r(e)):""};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}})),s.register("30Ie1",(function(t,r){
/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var n;e(t.exports,"useSyncExternalStore",(()=>n),(e=>n=e));var i=s("acw62");var a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=i.useState,l=i.useEffect,h=i.useLayoutEffect,u=i.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=o({inst:{value:r,getSnapshot:t}}),i=n[0].inst,s=n[1];return h((function(){i.value=r,i.getSnapshot=t,c(i)&&s({inst:i})}),[e,r,t]),l((function(){return c(i)&&s({inst:i}),e((function(){c(i)&&s({inst:i})}))}),[e]),u(r),r};n=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:d}));var a;a=s("1b2ls");var o,l,h=s("acw62");!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),o=(l=s("Xw6Mv")).createRoot,l.hydrateRoot;h=s("acw62");var u=(e=>(e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e))(u||{}),c=(e=>(e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e))(c||{}),d=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e))(d||{}),f=(e=>(e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e))(f||{}),p=(e=>(e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e))(p||{}),m=(e=>(e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e))(m||{}),g=(e=>(e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e))(g||{}),y=(e=>(e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e))(y||{}),v=(e=>(e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e))(v||{}),_=(e=>(e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e))(_||{}),x=(e=>(e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e))(x||{}),b=(e=>(e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e))(b||{}),E=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e))(E||{}),T=(e=>(e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e))(T||{}),w=(e=>(e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e))(w||{}),S=(e=>(e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e))(S||{}),A=(e=>(e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e))(A||{}),C=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e))(C||{});const R={createCanvas:(e,t)=>{const r=document.createElement("canvas");return r.width=e,r.height=t,r},getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>(new DOMParser).parseFromString(e,"text/xml")};var P=/iPhone/i,I=/iPod/i,M=/iPad/i,k=/\biOS-universal(?:.+)Mac\b/i,D=/\bAndroid(?:.+)Mobile\b/i,N=/Android/i,O=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,B=/Silk/i,L=/Windows Phone/i,F=/\bWindows(?:.+)ARM\b/i,U=/BlackBerry/i,G=/BB10/i,z=/Opera Mini/i,H=/\b(CriOS|Chrome)(?:.+)Mobile/i,j=/Mobile(?:.+)Firefox\b/i,X=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream};const V=function(e){var t={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r=t.userAgent,n=r.split("[FBAN");void 0!==n[1]&&(r=n[0]),void 0!==(n=r.split("Twitter"))[1]&&(r=n[0]);var i=function(e){return function(t){return t.test(e)}}(r),s={apple:{phone:i(P)&&!i(L),ipod:i(I),tablet:!i(P)&&(i(M)||X(t))&&!i(L),universal:i(k),device:(i(P)||i(I)||i(M)||i(k)||X(t))&&!i(L)},amazon:{phone:i(O),tablet:!i(O)&&i(B),device:i(O)||i(B)},android:{phone:!i(L)&&i(O)||!i(L)&&i(D),tablet:!i(L)&&!i(O)&&!i(D)&&(i(B)||i(N)),device:!i(L)&&(i(O)||i(B)||i(D)||i(N))||i(/\bokhttp\b/i)},windows:{phone:i(L),tablet:i(F),device:i(L)||i(F)},other:{blackberry:i(U),blackberry10:i(G),opera:i(z),firefox:i(j),chrome:i(H),device:i(U)||i(G)||i(z)||i(j)||i(H)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}(globalThis.navigator);const W={ADAPTER:R,MIPMAP_TEXTURES:x.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:A.NONE,SPRITE_MAX_TEXTURES:function(e){let t=!0;if(V.tablet||V.phone){if(V.apple.device){const e=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(e){parseInt(e[1],10)<11&&(t=!1)}}if(V.android.device){const e=navigator.userAgent.match(/Android\s([0-9.]*)/);if(e){parseInt(e[1],10)<7&&(t=!1)}}}return t?e:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,premultipliedAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1,hello:!1},GC_MODE:T.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:_.CLAMP,SCALE_MODE:v.LINEAR,PRECISION_VERTEX:w.HIGH,PRECISION_FRAGMENT:V.apple.device?w.HIGH:w.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!V.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};W.PREFER_ENV=u.WEBGL2,W.STRICT_TEXTURE_CACHE=!1;var $=(e=>(e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e))($||{});const Y=e=>{if("function"==typeof e||"object"==typeof e&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={..."object"!=typeof e.extension?{type:e.extension}:e.extension,ref:e}}if("object"!=typeof e)throw new Error("Invalid extension type");return"string"==typeof(e={...e}).type&&(e.type=[e.type]),e},q=(e,t)=>Y(e).priority??t,K={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(Y).forEach((e=>{e.type.forEach((t=>this._removeHandlers[t]?.(e)))})),this},add(...e){return e.map(Y).forEach((e=>{e.type.forEach((t=>{const r=this._addHandlers,n=this._queue;r[t]?r[t](e):(n[t]=n[t]||[],n[t].push(e))}))})),this},handle(e,t,r){const n=this._addHandlers,i=this._removeHandlers;if(n[e]||i[e])throw new Error(`Extension type ${e} already has a handler`);n[e]=t,i[e]=r;const s=this._queue;return s[e]&&(s[e].forEach((e=>t(e))),delete s[e]),this},handleByMap(e,t){return this.handle(e,(e=>{t[e.name]=e.ref}),(e=>{delete t[e.name]}))},handleByList(e,t,r=-1){return this.handle(e,(e=>{t.includes(e.ref)||(t.push(e.ref),t.sort(((e,t)=>q(t,r)-q(e,r))))}),(e=>{const r=t.indexOf(e.ref);-1!==r&&t.splice(r,1)}))}},Q=2*Math.PI,Z=180/Math.PI,J=Math.PI/180;var ee=(e=>(e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e))(ee||{});class te{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new te(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const re=[new te,new te,new te,new te];class ne{constructor(e=0,t=0,r=0,n=0){this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(n),this.type=ee.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new ne(0,0,0,0)}clone(){return new ne(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)}intersects(e,t){if(!t){const t=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=t)return!1;const r=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>r}const r=this.left,n=this.right,i=this.top,s=this.bottom;if(n<=r||s<=i)return!1;const a=re[0].set(e.left,e.top),o=re[1].set(e.left,e.bottom),l=re[2].set(e.right,e.top),h=re[3].set(e.right,e.bottom);if(l.x<=a.x||o.y<=a.y)return!1;const u=Math.sign(t.a*t.d-t.b*t.c);if(0===u)return!1;if(t.apply(a,a),t.apply(o,o),t.apply(l,l),t.apply(h,h),Math.max(a.x,o.x,l.x,h.x)<=r||Math.min(a.x,o.x,l.x,h.x)>=n||Math.max(a.y,o.y,l.y,h.y)<=i||Math.min(a.y,o.y,l.y,h.y)>=s)return!1;const c=u*(o.y-a.y),d=u*(a.x-o.x),f=c*r+d*i,p=c*n+d*i,m=c*r+d*s,g=c*n+d*s;if(Math.max(f,p,m,g)<=c*a.x+d*a.y||Math.min(f,p,m,g)>=c*h.x+d*h.y)return!1;const y=u*(a.y-l.y),v=u*(l.x-a.x),_=y*r+v*i,x=y*n+v*i,b=y*r+v*s,E=y*n+v*s;return!(Math.max(_,x,b,E)<=y*a.x+v*a.y||Math.min(_,x,b,E)>=y*h.x+v*h.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this}fit(e){const t=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),n=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(r-t,0),this.y=n,this.height=Math.max(i-n,0),this}ceil(e=1,t=.001){const r=Math.ceil((this.x+this.width-t)*e)/e,n=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=r-this.x,this.height=n-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=r-t,this.y=n,this.height=i-n,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class ie{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.radius=r,this.type=ee.CIRC}clone(){return new ie(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const r=this.radius*this.radius;let n=this.x-e,i=this.y-t;return n*=n,i*=i,n+i<=r}getBounds(){return new ne(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class se{constructor(e=0,t=0,r=0,n=0){this.x=e,this.y=t,this.width=r,this.height=n,this.type=ee.ELIP}clone(){return new se(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let r=(e-this.x)/this.width,n=(t-this.y)/this.height;return r*=r,n*=n,r+n<=1}getBounds(){return new ne(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class ae{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if("number"!=typeof t[0]){const e=[];for(let r=0,n=t.length;r<n;r++)e.push(t[r].x,t[r].y);t=e}this.points=t,this.type=ee.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),t=new ae(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let r=!1;const n=this.points.length/2;for(let i=0,s=n-1;i<n;s=i++){const n=this.points[2*i],a=this.points[2*i+1],o=this.points[2*s],l=this.points[2*s+1];a>t!=l>t&&e<(t-a)/(l-a)*(o-n)+n&&(r=!r)}return r}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce(((e,t)=>`${e}, ${t}`),"")}]`}}class oe{constructor(e=0,t=0,r=0,n=0,i=20){this.x=e,this.y=t,this.width=r,this.height=n,this.radius=i,this.type=ee.RREC}clone(){return new oe(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+r&&t<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;let n=e-(this.x+r),i=t-(this.y+r);const s=r*r;if(n*n+i*i<=s)return!0;if(n=e-(this.x+this.width-r),n*n+i*i<=s)return!0;if(i=t-(this.y+this.height-r),n*n+i*i<=s)return!0;if(n=e-(this.x+r),n*n+i*i<=s)return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class le{constructor(e,t,r=0,n=0){this._x=r,this._y=n,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new le(e,t,this._x,this._y)}set(e=0,t=e){return this._x===e&&this._y===t||(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}class he{constructor(e=1,t=0,r=0,n=1,i=0,s=0){this.array=null,this.a=e,this.b=t,this.c=r,this.d=n,this.tx=i,this.ty=s}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,r,n,i,s){return this.a=e,this.b=t,this.c=r,this.d=n,this.tx=i,this.ty=s,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,t){t=t||new te;const r=e.x,n=e.y;return t.x=this.a*r+this.c*n+this.tx,t.y=this.b*r+this.d*n+this.ty,t}applyInverse(e,t){t=t||new te;const r=1/(this.a*this.d+this.c*-this.b),n=e.x,i=e.y;return t.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),n=this.a,i=this.c,s=this.tx;return this.a=n*t-this.b*r,this.b=n*r+this.b*t,this.c=i*t-this.d*r,this.d=i*r+this.d*t,this.tx=s*t-this.ty*r,this.ty=s*r+this.ty*t,this}append(e){const t=this.a,r=this.b,n=this.c,i=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*r+e.b*i,this.c=e.c*t+e.d*n,this.d=e.c*r+e.d*i,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*r+e.ty*i+this.ty,this}setTransform(e,t,r,n,i,s,a,o,l){return this.a=Math.cos(a+l)*i,this.b=Math.sin(a+l)*i,this.c=-Math.sin(a-o)*s,this.d=Math.cos(a-o)*s,this.tx=e-(r*this.a+n*this.c),this.ty=t-(r*this.b+n*this.d),this}prepend(e){const t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){const t=this.a,r=this.c;this.a=t*e.a+this.b*e.c,this.b=t*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,r=this.b,n=this.c,i=this.d,s=e.pivot,a=-Math.atan2(-n,i),o=Math.atan2(r,t),l=Math.abs(a+o);return l<1e-5||Math.abs(Q-l)<1e-5?(e.rotation=o,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=o),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(n*n+i*i),e.position.x=this.tx+(s.x*t+s.y*n),e.position.y=this.ty+(s.x*r+s.y*i),e}invert(){const e=this.a,t=this.b,r=this.c,n=this.d,i=this.tx,s=e*n-t*r;return this.a=n/s,this.b=-t/s,this.c=-r/s,this.d=e/s,this.tx=(r*this.ty-n*i)/s,this.ty=-(e*this.ty-t*i)/s,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new he;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new he}static get TEMP_MATRIX(){return new he}}const ue=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ce=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],de=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],fe=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],pe=[],me=[],ge=Math.sign;!function(){for(let e=0;e<16;e++){const t=[];pe.push(t);for(let r=0;r<16;r++){const n=ge(ue[e]*ue[r]+de[e]*ce[r]),i=ge(ce[e]*ue[r]+fe[e]*ce[r]),s=ge(ue[e]*de[r]+de[e]*fe[r]),a=ge(ce[e]*de[r]+fe[e]*fe[r]);for(let e=0;e<16;e++)if(ue[e]===n&&ce[e]===i&&de[e]===s&&fe[e]===a){t.push(e);break}}}for(let e=0;e<16;e++){const t=new he;t.set(ue[e],ce[e],de[e],fe[e],0,0),me.push(t)}}();const ye={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>ue[e],uY:e=>ce[e],vX:e=>de[e],vY:e=>fe[e],inv:e=>8&e?15&e:7&-e,add:(e,t)=>pe[e][t],sub:(e,t)=>pe[e][ye.inv(t)],rotate180:e=>4^e,isVertical:e=>2==(3&e),byDirection:(e,t)=>2*Math.abs(e)<=Math.abs(t)?t>=0?ye.S:ye.N:2*Math.abs(t)<=Math.abs(e)?e>0?ye.E:ye.W:t>0?e>0?ye.SE:ye.SW:e>0?ye.NE:ye.NW,matrixAppendRotationInv:(e,t,r=0,n=0)=>{const i=me[ye.inv(t)];i.tx=r,i.ty=n,e.append(i)}},ve=class{constructor(){this.worldTransform=new he,this.localTransform=new he,this.position=new le(this.onChange,this,0,0),this.scale=new le(this.onChange,this,1,1),this.pivot=new le(this.onChange,this,0,0),this.skew=new le(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){const r=e.worldTransform,n=this.worldTransform;n.a=t.a*r.a+t.b*r.c,n.b=t.a*r.b+t.b*r.d,n.c=t.c*r.a+t.d*r.c,n.d=t.c*r.b+t.d*r.d,n.tx=t.tx*r.a+t.ty*r.c+r.tx,n.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};let _e=ve;_e.IDENTITY=new ve;class xe{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,r,n,i,s,a,o){if(arguments.length>8)throw new Error("max arguments reached");const{name:l,items:h}=this;this._aliasCount++;for(let u=0,c=h.length;u<c;u++)h[u][l](e,t,r,n,i,s,a,o);return h===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(xe.prototype,{dispatch:{value:xe.prototype.emit},run:{value:xe.prototype.emit}}),W.TARGET_FPMS=.06;var be=(e=>(e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(be||{});class Ee{constructor(e,t=null,r=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=r,this.once=n}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}class Te{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Ee(null,null,1/0),this.deltaMS=1/W.TARGET_FPMS,this.elapsedMS=1/W.TARGET_FPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,r=be.NORMAL){return this._addListener(new Ee(e,t,r))}addOnce(e,t,r=be.NORMAL){return this._addListener(new Ee(e,t,r,!0))}_addListener(e){let t=this._head.next,r=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}else e.connect(r);return this._startIfPossible(),this}remove(e,t){let r=this._head.next;for(;r;)r=r.match(e,t)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const t=e-this._lastFrame|0;if(t<this._minElapsedMS)return;this._lastFrame=e-t%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*W.TARGET_FPMS;const r=this._head;let n=r.next;for(;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,t)/1e3,W.TARGET_FPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(0===e)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Te._shared){const e=Te._shared=new Te;e.autoStart=!0,e._protected=!0}return Te._shared}static get system(){if(!Te._system){const e=Te._system=new Te;e.autoStart=!0,e._protected=!0}return Te._system}}class we{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,be.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Te.shared:new Te,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}we.extension=$.Application,K.add(we);var Se={};e(Se,"isMobile",(()=>V)),e(Se,"EventEmitter",(()=>r(Ae))),e(Se,"earcut",(()=>r(Le))),e(Se,"url",(()=>Rt)),e(Se,"path",(()=>Mt)),e(Se,"sayHello",(()=>Ot)),e(Se,"skipHello",(()=>Nt)),e(Se,"isWebGLSupported",(()=>Lt)),e(Se,"hex2rgb",(()=>Ut)),e(Se,"hex2string",(()=>Gt)),e(Se,"rgb2hex",(()=>Ht)),e(Se,"string2hex",(()=>zt)),e(Se,"correctBlendMode",(()=>Xt)),e(Se,"premultiplyBlendMode",(()=>jt)),e(Se,"premultiplyRgba",(()=>Vt)),e(Se,"premultiplyTint",(()=>Wt)),e(Se,"premultiplyTintToRgba",(()=>$t)),e(Se,"createIndicesForQuads",(()=>Yt)),e(Se,"getBufferType",(()=>qt)),e(Se,"interleaveTypedArrays",(()=>Qt)),e(Se,"isPow2",(()=>Jt)),e(Se,"log2",(()=>er)),e(Se,"nextPow2",(()=>Zt)),e(Se,"removeItems",(()=>tr)),e(Se,"sign",(()=>rr)),e(Se,"uid",(()=>ir)),e(Se,"deprecation",(()=>Dt)),e(Se,"BaseTextureCache",(()=>or)),e(Se,"ProgramCache",(()=>sr)),e(Se,"TextureCache",(()=>ar)),e(Se,"clearTextureCache",(()=>hr)),e(Se,"destroyTextureCache",(()=>lr)),e(Se,"CanvasRenderTarget",(()=>ur)),e(Se,"trimCanvas",(()=>fr)),e(Se,"decomposeDataUri",(()=>mr)),e(Se,"determineCrossOrigin",(()=>yr)),e(Se,"getResolutionOfUrl",(()=>vr)),e(Se,"DATA_URI",(()=>pr));var Ae={},Ce=Object.prototype.hasOwnProperty,Re="~";function Pe(){}function Ie(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function Me(e,t,r,n,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new Ie(r,n||e,i),a=Re?Re+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],s]:e._events[a].push(s):(e._events[a]=s,e._eventsCount++),e}function ke(e,t){0==--e._eventsCount?e._events=new Pe:delete e._events[t]}function De(){this._events=new Pe,this._eventsCount=0}Object.create&&(Pe.prototype=Object.create(null),(new Pe).__proto__||(Re=!1)),De.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)Ce.call(e,t)&&r.push(Re?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},De.prototype.listeners=function(e){var t=Re?Re+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,i=r.length,s=new Array(i);n<i;n++)s[n]=r[n].fn;return s},De.prototype.listenerCount=function(e){var t=Re?Re+e:e,r=this._events[t];return r?r.fn?1:r.length:0},De.prototype.emit=function(e,t,r,n,i,s){var a=Re?Re+e:e;if(!this._events[a])return!1;var o,l,h=this._events[a],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,r),!0;case 4:return h.fn.call(h.context,t,r,n),!0;case 5:return h.fn.call(h.context,t,r,n,i),!0;case 6:return h.fn.call(h.context,t,r,n,i,s),!0}for(l=1,o=new Array(u-1);l<u;l++)o[l-1]=arguments[l];h.fn.apply(h.context,o)}else{var c,d=h.length;for(l=0;l<d;l++)switch(h[l].once&&this.removeListener(e,h[l].fn,void 0,!0),u){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,t);break;case 3:h[l].fn.call(h[l].context,t,r);break;case 4:h[l].fn.call(h[l].context,t,r,n);break;default:if(!o)for(c=1,o=new Array(u-1);c<u;c++)o[c-1]=arguments[c];h[l].fn.apply(h[l].context,o)}}return!0},De.prototype.on=function(e,t,r){return Me(this,e,t,r,!1)},De.prototype.once=function(e,t,r){return Me(this,e,t,r,!0)},De.prototype.removeListener=function(e,t,r,n){var i=Re?Re+e:e;if(!this._events[i])return this;if(!t)return ke(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||n&&!s.once||r&&s.context!==r||ke(this,i);else{for(var a=0,o=[],l=s.length;a<l;a++)(s[a].fn!==t||n&&!s[a].once||r&&s[a].context!==r)&&o.push(s[a]);o.length?this._events[i]=1===o.length?o[0]:o:ke(this,i)}return this},De.prototype.removeAllListeners=function(e){var t;return e?(t=Re?Re+e:e,this._events[t]&&ke(this,t)):(this._events=new Pe,this._eventsCount=0),this},De.prototype.off=De.prototype.removeListener,De.prototype.addListener=De.prototype.on,De.prefixed=Re,De.EventEmitter=De,Ae=De;var Ne,Oe,Be,Le={};function Fe(e,t,r){r=r||2;var n,i,s,a,o,l,h,u=t&&t.length,c=u?t[0]*r:e.length,d=Ue(e,0,c,r,!0),f=[];if(!d||d.next===d.prev)return f;if(u&&(d=function(e,t,r,n){var i,s,a,o=[];for(i=0,s=t.length;i<s;i++)(a=Ue(e,t[i]*n,i<s-1?t[i+1]*n:e.length,n,!1))===a.next&&(a.steiner=!0),o.push(Ke(a));for(o.sort(We),i=0;i<o.length;i++)r=$e(o[i],r);return r}(e,t,d,r)),e.length>80*r){n=s=e[0],i=a=e[1];for(var p=r;p<c;p+=r)(o=e[p])<n&&(n=o),(l=e[p+1])<i&&(i=l),o>s&&(s=o),l>a&&(a=l);h=0!==(h=Math.max(s-n,a-i))?32767/h:0}return ze(d,f,r,n,i,h,0),f}function Ue(e,t,r,n,i){var s,a;if(i===ht(e,t,r,n)>0)for(s=t;s<r;s+=n)a=at(s,e[s],e[s+1],a);else for(s=r-n;s>=t;s-=n)a=at(s,e[s],e[s+1],a);return a&&et(a,a.next)&&(ot(a),a=a.next),a}function Ge(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!et(n,n.next)&&0!==Je(n.prev,n,n.next))n=n.next;else{if(ot(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function ze(e,t,r,n,i,s,a){if(e){!a&&s&&function(e,t,r,n){var i=e;do{0===i.z&&(i.z=qe(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,s,a,o,l,h=1;do{for(r=e,e=null,s=null,a=0;r;){for(a++,n=r,o=0,t=0;t<h&&(o++,n=n.nextZ);t++);for(l=h;o>0||l>0&&n;)0!==o&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,o--):(i=n,n=n.nextZ,l--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;r=n}s.nextZ=null,h*=2}while(a>1)}(i)}(e,n,i,s);for(var o,l,h=e;e.prev!==e.next;)if(o=e.prev,l=e.next,s?je(e,n,i,s):He(e))t.push(o.i/r|0),t.push(e.i/r|0),t.push(l.i/r|0),ot(e),e=l.next,h=l.next;else if((e=l)===h){a?1===a?ze(e=Xe(Ge(e),t,r),t,r,n,i,s,2):2===a&&Ve(e,t,r,n,i,s):ze(Ge(e),t,r,n,i,s,1);break}}}function He(e){var t=e.prev,r=e,n=e.next;if(Je(t,r,n)>=0)return!1;for(var i=t.x,s=r.x,a=n.x,o=t.y,l=r.y,h=n.y,u=i<s?i<a?i:a:s<a?s:a,c=o<l?o<h?o:h:l<h?l:h,d=i>s?i>a?i:a:s>a?s:a,f=o>l?o>h?o:h:l>h?l:h,p=n.next;p!==t;){if(p.x>=u&&p.x<=d&&p.y>=c&&p.y<=f&&Qe(i,o,s,l,a,h,p.x,p.y)&&Je(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function je(e,t,r,n){var i=e.prev,s=e,a=e.next;if(Je(i,s,a)>=0)return!1;for(var o=i.x,l=s.x,h=a.x,u=i.y,c=s.y,d=a.y,f=o<l?o<h?o:h:l<h?l:h,p=u<c?u<d?u:d:c<d?c:d,m=o>l?o>h?o:h:l>h?l:h,g=u>c?u>d?u:d:c>d?c:d,y=qe(f,p,t,r,n),v=qe(m,g,t,r,n),_=e.prevZ,x=e.nextZ;_&&_.z>=y&&x&&x.z<=v;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==i&&_!==a&&Qe(o,u,l,c,h,d,_.x,_.y)&&Je(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==i&&x!==a&&Qe(o,u,l,c,h,d,x.x,x.y)&&Je(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;_&&_.z>=y;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==i&&_!==a&&Qe(o,u,l,c,h,d,_.x,_.y)&&Je(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;x&&x.z<=v;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==i&&x!==a&&Qe(o,u,l,c,h,d,x.x,x.y)&&Je(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function Xe(e,t,r){var n=e;do{var i=n.prev,s=n.next.next;!et(i,s)&&tt(i,n,n.next,s)&&it(i,s)&&it(s,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(s.i/r|0),ot(n),ot(n.next),n=e=s),n=n.next}while(n!==e);return Ge(n)}function Ve(e,t,r,n,i,s){var a=e;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&Ze(a,o)){var l=st(a,o);return a=Ge(a,a.next),l=Ge(l,l.next),ze(a,t,r,n,i,s,0),void ze(l,t,r,n,i,s,0)}o=o.next}a=a.next}while(a!==e)}function We(e,t){return e.x-t.x}function $e(e,t){var r=function(e,t){var r,n=t,i=e.x,s=e.y,a=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var o=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=i&&o>a&&(a=o,r=n.x<n.next.x?n:n.next,o===i))return r}n=n.next}while(n!==t);if(!r)return null;var l,h=r,u=r.x,c=r.y,d=1/0;n=r;do{i>=n.x&&n.x>=u&&i!==n.x&&Qe(s<c?i:a,s,u,c,s<c?a:i,s,n.x,n.y)&&(l=Math.abs(s-n.y)/(i-n.x),it(n,e)&&(l<d||l===d&&(n.x>r.x||n.x===r.x&&Ye(r,n)))&&(r=n,d=l)),n=n.next}while(n!==h);return r}(e,t);if(!r)return t;var n=st(r,e);return Ge(n,n.next),Ge(r,r.next)}function Ye(e,t){return Je(e.prev,e,t.prev)<0&&Je(t.next,e,e.next)<0}function qe(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ke(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function Qe(e,t,r,n,i,s,a,o){return(i-a)*(t-o)>=(e-a)*(s-o)&&(e-a)*(n-o)>=(r-a)*(t-o)&&(r-a)*(s-o)>=(i-a)*(n-o)}function Ze(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&tt(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(it(e,t)&&it(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,s=(e.y+t.y)/2;do{r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(Je(e.prev,e,t.prev)||Je(e,t.prev,t))||et(e,t)&&Je(e.prev,e,e.next)>0&&Je(t.prev,t,t.next)>0)}function Je(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function et(e,t){return e.x===t.x&&e.y===t.y}function tt(e,t,r,n){var i=nt(Je(e,t,r)),s=nt(Je(e,t,n)),a=nt(Je(r,n,e)),o=nt(Je(r,n,t));return i!==s&&a!==o||(!(0!==i||!rt(e,r,t))||(!(0!==s||!rt(e,n,t))||(!(0!==a||!rt(r,e,n))||!(0!==o||!rt(r,t,n)))))}function rt(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function nt(e){return e>0?1:e<0?-1:0}function it(e,t){return Je(e.prev,e,e.next)<0?Je(e,t,e.next)>=0&&Je(e,e.prev,t)>=0:Je(e,t,e.prev)<0||Je(e,e.next,t)<0}function st(e,t){var r=new lt(e.i,e.x,e.y),n=new lt(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function at(e,t,r,n){var i=new lt(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function ot(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function lt(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ht(e,t,r,n){for(var i=0,s=t,a=r-n;s<r;s+=n)i+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return i}(Le=Fe).default=Fe,Fe.deviation=function(e,t,r,n){var i=t&&t.length,s=i?t[0]*r:e.length,a=Math.abs(ht(e,0,s,r));if(i)for(var o=0,l=t.length;o<l;o++){var h=t[o]*r,u=o<l-1?t[o+1]*r:e.length;a-=Math.abs(ht(e,h,u,r))}var c=0;for(o=0;o<n.length;o+=3){var d=n[o]*r,f=n[o+1]*r,p=n[o+2]*r;c+=Math.abs((e[d]-e[p])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[p+1]-e[d+1]))}return 0===a&&0===c?0:Math.abs((c-a)/a)},Fe.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var s=0;s<e[i].length;s++)for(var a=0;a<t;a++)r.vertices.push(e[i][s][a]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};var ut,ct=s("dBHwk");function dt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}ut={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}},Ne=Ct,Oe=function(e,t){return Ct(e,!1,!0).resolve(t)},Be=function(e){ut.isString(e)&&(e=Ct(e));return e instanceof dt?e.format():dt.prototype.format.call(e)};var ft,pt,mt=/^([a-z0-9.+-]+:)/i,gt=/:[0-9]*$/,yt=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,vt=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),_t=["'"].concat(vt),xt=["%","/","?",";","#"].concat(_t),bt=["/","?","#"],Et=/^[+a-z0-9A-Z_-]{0,63}$/,Tt=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,wt={javascript:!0,"javascript:":!0},St={javascript:!0,"javascript:":!0},At={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Ct(e,t,r){if(e&&ut.isObject(e)&&e instanceof dt)return e;var n=new dt;return n.parse(e,t,r),n}ft=s("kzGqM"),pt=s("kWD7b"),dt.prototype.parse=function(e,t,r){if(!ut.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=-1!==n&&n<e.indexOf("#")?"?":"#",s=e.split(i);s[0]=s[0].replace(/\\/g,"/");var a=e=s.join(i);if(a=a.trim(),!r&&1===e.split("#").length){var o=yt.exec(a);if(o)return this.path=a,this.href=a,this.pathname=o[1],o[2]?(this.search=o[2],this.query=t?ft(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var l=mt.exec(a);if(l){var h=(l=l[0]).toLowerCase();this.protocol=h,a=a.substr(l.length)}if(r||l||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var u="//"===a.substr(0,2);!u||l&&St[l]||(a=a.substr(2),this.slashes=!0)}if(!St[l]&&(u||l&&!At[l])){for(var c,d,f=-1,p=0;p<bt.length;p++){-1!==(m=a.indexOf(bt[p]))&&(-1===f||m<f)&&(f=m)}-1!==(d=-1===f?a.lastIndexOf("@"):a.lastIndexOf("@",f))&&(c=a.slice(0,d),a=a.slice(d+1),this.auth=decodeURIComponent(c)),f=-1;for(p=0;p<xt.length;p++){var m;-1!==(m=a.indexOf(xt[p]))&&(-1===f||m<f)&&(f=m)}-1===f&&(f=a.length),this.host=a.slice(0,f),a=a.slice(f),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var y=this.hostname.split(/\./),v=(p=0,y.length);p<v;p++){var _=y[p];if(_&&!_.match(Et)){for(var x="",b=0,E=_.length;b<E;b++)_.charCodeAt(b)>127?x+="x":x+=_[b];if(!x.match(Et)){var T=y.slice(0,p),w=y.slice(p+1),S=_.match(Tt);S&&(T.push(S[1]),w.unshift(S[2])),w.length&&(a="/"+w.join(".")+a),this.hostname=T.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=ct.toASCII(this.hostname));var A=this.port?":"+this.port:"",C=this.hostname||"";this.host=C+A,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!wt[h])for(p=0,v=_t.length;p<v;p++){var R=_t[p];if(-1!==a.indexOf(R)){var P=encodeURIComponent(R);P===R&&(P=escape(R)),a=a.split(R).join(P)}}var I=a.indexOf("#");-1!==I&&(this.hash=a.substr(I),a=a.slice(0,I));var M=a.indexOf("?");if(-1!==M?(this.search=a.substr(M),this.query=a.substr(M+1),t&&(this.query=ft(this.query)),a=a.slice(0,M)):t&&(this.search="",this.query={}),a&&(this.pathname=a),At[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){A=this.pathname||"";var k=this.search||"";this.path=A+k}return this.href=this.format(),this},dt.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&ut.isObject(this.query)&&Object.keys(this.query).length&&(s=pt(this.query));var a=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||At[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),t+i+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+n},dt.prototype.resolve=function(e){return this.resolveObject(Ct(e,!1,!0)).format()},dt.prototype.resolveObject=function(e){if(ut.isString(e)){var t=new dt;t.parse(e,!1,!0),e=t}for(var r=new dt,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];r[s]=this[s]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),o=0;o<a.length;o++){var l=a[o];"protocol"!==l&&(r[l]=e[l])}return At[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!At[e.protocol]){for(var h=Object.keys(e),u=0;u<h.length;u++){var c=h[u];r[c]=e[c]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||St[e.protocol])r.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var f=r.pathname||"",p=r.search||"";r.path=f+p}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),g=e.host||e.pathname&&"/"===e.pathname.charAt(0),y=g||m||r.host&&e.pathname,v=y,_=r.pathname&&r.pathname.split("/")||[],x=(d=e.pathname&&e.pathname.split("/")||[],r.protocol&&!At[r.protocol]);if(x&&(r.hostname="",r.port=null,r.host&&(""===_[0]?_[0]=r.host:_.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),y=y&&(""===d[0]||""===_[0])),g)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,_=d;else if(d.length)_||(_=[]),_.pop(),_=_.concat(d),r.search=e.search,r.query=e.query;else if(!ut.isNullOrUndefined(e.search)){if(x)r.hostname=r.host=_.shift(),(S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=S.shift(),r.host=r.hostname=S.shift());return r.search=e.search,r.query=e.query,ut.isNull(r.pathname)&&ut.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!_.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var b=_.slice(-1)[0],E=(r.host||e.host||_.length>1)&&("."===b||".."===b)||""===b,T=0,w=_.length;w>=0;w--)"."===(b=_[w])?_.splice(w,1):".."===b?(_.splice(w,1),T++):T&&(_.splice(w,1),T--);if(!y&&!v)for(;T--;T)_.unshift("..");!y||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),E&&"/"!==_.join("/").substr(-1)&&_.push("");var S,A=""===_[0]||_[0]&&"/"===_[0].charAt(0);x&&(r.hostname=r.host=A?"":_.length?_.shift():"",(S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=S.shift(),r.host=r.hostname=S.shift()));return(y=y||r.host&&_.length)&&!A&&_.unshift(""),_.length?r.pathname=_.join("/"):(r.pathname=null,r.path=null),ut.isNull(r.pathname)&&ut.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},dt.prototype.parseHost=function(){var e=this.host,t=gt.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const Rt={parse:Ne,format:Be,resolve:Oe};function Pt(e){if("string"!=typeof e)throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function It(e){return e.split("?")[0].split("#")[0]}const Mt={toPosix(e){return t="\\",r="/",e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),r);var t,r},isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl:e=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e),hasProtocol(e){return/^[^/:]+:\//.test(this.toPosix(e))},getProtocol(e){Pt(e),e=this.toPosix(e);let t="";const r=/^file:\/\/\//.exec(e),n=/^[^/:]+:\/\//.exec(e),i=/^[^/:]+:\//.exec(e);if(r||n||i){const s=r?.[0]||n?.[0]||i?.[0];t=s,e=e.slice(s.length)}return t},toAbsolute(e,t,r){if(this.isDataUrl(e))return e;const n=It(this.toPosix(t??W.ADAPTER.getBaseUrl())),i=It(this.toPosix(r??this.rootname(n)));if(Pt(e),(e=this.toPosix(e)).startsWith("/"))return Mt.join(i,e.slice(1));return this.isAbsolute(e)?e:this.join(n,e)},normalize(e){if(Pt(e=this.toPosix(e)),0===e.length)return".";let t="";const r=e.startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));const n=e.endsWith("/");return(e=function(e,t){let r,n="",i=0,s=-1,a=0;for(let o=0;o<=e.length;++o){if(o<e.length)r=e.charCodeAt(o);else{if(47===r)break;r=47}if(47===r){if(s===o-1||1===a);else if(s!==o-1&&2===a){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){const e=n.lastIndexOf("/");if(e!==n.length-1){-1===e?(n="",i=0):(n=n.slice(0,e),i=n.length-1-n.lastIndexOf("/")),s=o,a=0;continue}}else if(2===n.length||1===n.length){n="",i=0,s=o,a=0;continue}t&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+=`/${e.slice(s+1,o)}`:n=e.slice(s+1,o),i=o-s-1;s=o,a=0}else 46===r&&-1!==a?++a:a=-1}return n}(e,!1)).length>0&&n&&(e+="/"),r?`/${e}`:t+e},isAbsolute(e){return Pt(e),e=this.toPosix(e),!!this.hasProtocol(e)||e.startsWith("/")},join(...e){if(0===e.length)return".";let t;for(let r=0;r<e.length;++r){const n=e[r];if(Pt(n),n.length>0)if(void 0===t)t=n;else{const i=e[r-1]??"";this.extname(i)?t+=`/../${n}`:t+=`/${n}`}}return void 0===t?".":this.normalize(t)},dirname(e){if(Pt(e),0===e.length)return".";let t=(e=this.toPosix(e)).charCodeAt(0);const r=47===t;let n=-1,i=!0;const s=this.getProtocol(e),a=e;for(let r=(e=e.slice(s.length)).length-1;r>=1;--r)if(t=e.charCodeAt(r),47===t){if(!i){n=r;break}}else i=!1;return-1===n?r?"/":this.isUrl(a)?s+e:s:r&&1===n?"//":s+e.slice(0,n)},rootname(e){Pt(e);let t="";if(t=(e=this.toPosix(e)).startsWith("/")?"/":this.getProtocol(e),this.isUrl(e)){const r=e.indexOf("/",t.length);t=-1!==r?e.slice(0,r):e,t.endsWith("/")||(t+="/")}return t},basename(e,t){Pt(e),t&&Pt(t),e=this.toPosix(e);let r,n=0,i=-1,s=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let a=t.length-1,o=-1;for(r=e.length-1;r>=0;--r){const l=e.charCodeAt(r);if(47===l){if(!s){n=r+1;break}}else-1===o&&(s=!1,o=r+1),a>=0&&(l===t.charCodeAt(a)?-1==--a&&(i=r):(a=-1,i=o))}return n===i?i=o:-1===i&&(i=e.length),e.slice(n,i)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!s){n=r+1;break}}else-1===i&&(s=!1,i=r+1);return-1===i?"":e.slice(n,i)},extname(e){Pt(e);let t=-1,r=0,n=-1,i=!0,s=0;for(let a=(e=this.toPosix(e)).length-1;a>=0;--a){const o=e.charCodeAt(a);if(47!==o)-1===n&&(i=!1,n=a+1),46===o?-1===t?t=a:1!==s&&(s=1):-1!==t&&(s=-1);else if(!i){r=a+1;break}}return-1===t||-1===n||0===s||1===s&&t===n-1&&t===r+1?"":e.slice(t,n)},parse(e){Pt(e);const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;let r=(e=this.toPosix(e)).charCodeAt(0);const n=this.isAbsolute(e);let i;t.root=this.rootname(e),i=n||this.hasProtocol(e)?1:0;let s=-1,a=0,o=-1,l=!0,h=e.length-1,u=0;for(;h>=i;--h)if(r=e.charCodeAt(h),47!==r)-1===o&&(l=!1,o=h+1),46===r?-1===s?s=h:1!==u&&(u=1):-1!==s&&(u=-1);else if(!l){a=h+1;break}return-1===s||-1===o||0===u||1===u&&s===o-1&&s===a+1?-1!==o&&(t.base=t.name=0===a&&n?e.slice(1,o):e.slice(a,o)):(0===a&&n?(t.name=e.slice(1,s),t.base=e.slice(1,o)):(t.name=e.slice(a,s),t.base=e.slice(a,o)),t.ext=e.slice(s,o)),t.dir=this.dirname(e),t},sep:"/",delimiter:":"};W.RETINA_PREFIX=/@([0-9\.]+)x/,W.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;const kt={};function Dt(e,t,r=3){if(kt[t])return;let n=(new Error).stack;void 0===n?console.warn("PixiJS Deprecation Warning: ",`${t}\nDeprecated since v${e}`):(n=n.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}\nDeprecated since v${e}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}\nDeprecated since v${e}`),console.warn(n))),kt[t]=!0}function Nt(){Dt("7.0.0","skipHello is deprecated, please use PIXI.settings.RENDER_OPTIONS.hello")}function Ot(){Dt("7.0.0",'sayHello is deprecated, please use Renderer\'s "hello" option')}let Bt;function Lt(){return void 0===Bt&&(Bt=function(){const e={stencil:!0,failIfMajorPerformanceCaveat:W.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!W.ADAPTER.getWebGLRenderingContext())return!1;const t=W.ADAPTER.createCanvas();let r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);const n=!(!r||!r.getContextAttributes().stencil);if(r){const e=r.getExtension("WEBGL_lose_context");e&&e.loseContext()}return r=null,n}catch(e){return!1}}()),Bt}var Ft={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Ut(e,t=[]){return t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t}function Gt(e){let t=e.toString(16);return t="000000".substring(0,6-t.length)+t,`#${t}`}function zt(e){if("string"==typeof e&&("#"===(e=Ft[e.toLowerCase()]||e)[0]&&(e=e.slice(1)),3===e.length)){const[t,r,n]=e;e=t+t+r+r+n+n}return parseInt(e,16)}function Ht(e){return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)}const jt=function(){const e=[],t=[];for(let r=0;r<32;r++)e[r]=r,t[r]=r;e[d.NORMAL_NPM]=d.NORMAL,e[d.ADD_NPM]=d.ADD,e[d.SCREEN_NPM]=d.SCREEN,t[d.NORMAL]=d.NORMAL_NPM,t[d.ADD]=d.ADD_NPM,t[d.SCREEN]=d.SCREEN_NPM;const r=[];return r.push(t),r.push(e),r}();function Xt(e,t){return jt[t?1:0][e]}function Vt(e,t,r,n){return r=r||new Float32Array(4),n||void 0===n?(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t):(r[0]=e[0],r[1]=e[1],r[2]=e[2]),r[3]=t,r}function Wt(e,t){if(1===t)return(255*t<<24)+e;if(0===t)return 0;let r=e>>16&255,n=e>>8&255,i=255&e;return r=r*t+.5|0,n=n*t+.5|0,i=i*t+.5|0,(255*t<<24)+(r<<16)+(n<<8)+i}function $t(e,t,r,n){return(r=r||new Float32Array(4))[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(255&e)/255,(n||void 0===n)&&(r[0]*=t,r[1]*=t,r[2]*=t),r[3]=t,r}function Yt(e,t=null){const r=6*e;if((t=t||new Uint16Array(r)).length!==r)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${r}`);for(let e=0,n=0;e<r;e+=6,n+=4)t[e+0]=n+0,t[e+1]=n+1,t[e+2]=n+2,t[e+3]=n+0,t[e+4]=n+2,t[e+5]=n+3;return t}function qt(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}const Kt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function Qt(e,t){let r=0,n=0;const i={};for(let i=0;i<e.length;i++)n+=t[i],r+=e[i].length;const s=new ArrayBuffer(4*r);let a=null,o=0;for(let r=0;r<e.length;r++){const l=t[r],h=e[r],u=qt(h);i[u]||(i[u]=new Kt[u](s)),a=i[u];for(let e=0;e<h.length;e++){a[(e/l|0)*n+o+e%l]=h[e]}o+=l}return new Float32Array(s)}function Zt(e){return e+=0===e?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1}function Jt(e){return!(e&e-1||!e)}function er(e){let t=(e>65535?1:0)<<4,r=((e>>>=t)>255?1:0)<<3;return t|=r,r=((e>>>=r)>15?1:0)<<2,t|=r,r=((e>>>=r)>3?1:0)<<1,t|=r,t|(e>>>=r)>>1}function tr(e,t,r){const n=e.length;let i;if(t>=n||0===r)return;const s=n-(r=t+r>n?n-t:r);for(i=t;i<s;++i)e[i]=e[i+r];e.length=s}function rr(e){return 0===e?0:e<0?-1:1}let nr=0;function ir(){return++nr}const sr={},ar=Object.create(null),or=Object.create(null);function lr(){let e;for(e in ar)ar[e].destroy();for(e in or)or[e].destroy()}function hr(){let e;for(e in ar)delete ar[e];for(e in or)delete or[e]}class ur{constructor(e,t,r){this.canvas=W.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=r||W.RESOLUTION,this.resize(e,t)}clear(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}resize(e,t){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(t*this.resolution)}destroy(){this.context=null,this.canvas=null}get width(){return this.canvas.width}set width(e){this.canvas.width=Math.round(e)}get height(){return this.canvas.height}set height(e){this.canvas.height=Math.round(e)}}function cr(e,t,r){for(let n=0,i=4*r*t;n<t;++n,i+=4)if(0!==e[i+3])return!1;return!0}function dr(e,t,r,n,i){const s=4*t;for(let t=n,a=n*s+4*r;t<=i;++t,a+=s)if(0!==e[a+3])return!1;return!0}function fr(e){let{width:t,height:r}=e;const n=e.getContext("2d",{willReadFrequently:!0}),i=n.getImageData(0,0,t,r).data;let s=0,a=r-1,o=0,l=t-1;for(;s<r&&cr(i,t,s);)++s;if(s===r)return{width:0,height:0,data:null};for(;cr(i,t,a);)--a;for(;dr(i,t,o,s,a);)++o;for(;dr(i,t,l,s,a);)--l;return t=l-o+1,r=a-s+1,{width:t,height:r,data:n.getImageData(o,s,t,r)}}const pr=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function mr(e){const t=pr.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}}let gr;function yr(e,t=globalThis.location){if(e.startsWith("data:"))return"";t=t||globalThis.location,gr||(gr=document.createElement("a")),gr.href=e;const r=Rt.parse(gr.href),n=!r.port&&""===t.port||r.port===t.port;return r.hostname===t.hostname&&n&&r.protocol===t.protocol?"":"anonymous"}function vr(e,t=1){const r=W.RETINA_PREFIX.exec(e);return r?parseFloat(r[1]):t}const _r=[];function xr(e,t){if(!e)return null;let r="";if("string"==typeof e){const t=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);t&&(r=t[1].toLowerCase())}for(let n=_r.length-1;n>=0;--n){const i=_r[n];if(i.test&&i.test(e,r))return new i(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class br{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new xe("setRealSize"),this.onUpdate=new xe("update"),this.onError=new xe("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){e===this._width&&t===this._height||(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class Er extends br{constructor(e,t){const{width:r,height:n}=t||{};if(!r||!n)throw new Error("BufferResource width or height invalid");super(r,n),this.data=e}upload(e,t,r){const n=e.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===b.UNPACK);const i=t.realWidth,s=t.realHeight;return r.width===i&&r.height===s?n.texSubImage2D(t.target,0,0,0,i,s,t.format,r.type,this.data):(r.width=i,r.height=s,n.texImage2D(t.target,0,r.internalFormat,i,s,0,t.format,r.type,this.data)),!0}dispose(){this.data=null}static test(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array}}const Tr={scaleMode:v.NEAREST,format:p.RGBA,alphaMode:b.NPM},wr=class extends(r(Ae)){constructor(e=null,t=null){super(),t=t||{};const{alphaMode:r,mipmap:n,anisotropicLevel:i,scaleMode:s,width:a,height:o,wrapMode:l,format:h,type:u,target:c,resolution:d,resourceOptions:f}=t;!e||e instanceof br||((e=xr(e,f)).internal=!0),this.resolution=d||W.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((o||0)*this.resolution)/this.resolution,this._mipmap=n??W.MIPMAP_TEXTURES,this.anisotropicLevel=i??W.ANISOTROPIC_LEVEL,this._wrapMode=l||W.WRAP_MODE,this._scaleMode=s??W.SCALE_MODE,this.format=h||p.RGBA,this.type=u||g.UNSIGNED_BYTE,this.target=c||m.TEXTURE_2D,this.alphaMode=r??b.UNPACK,this.uid=ir(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&o>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let r;return void 0!==e&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),void 0!==t&&t!==this.mipmap&&(this.mipmap=t,r=!0),r&&this.dirtyStyleId++,this}setSize(e,t,r){return r=r||this.resolution,this.setRealSize(e*r,t*r,r)}setRealSize(e,t,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Jt(this.realWidth)&&Jt(this.realHeight)}setResolution(e){const t=this.resolution;return t===e||(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT()),this}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete or[this.cacheId],delete ar[this.cacheId],this.cacheId=null),this.dispose(),wr.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,r=W.STRICT_TEXTURE_CACHE){const n="string"==typeof e;let i=null;if(n)i=e;else{if(!e._pixiId){const r=t?.pixiIdPrefix||"pixiid";e._pixiId=`${r}_${ir()}`}i=e._pixiId}let s=or[i];if(n&&r&&!s)throw new Error(`The cacheId "${i}" does not exist in BaseTextureCache.`);return s||(s=new wr(e,t),s.cacheId=i,wr.addToCache(s,i)),s}static fromBuffer(e,t,r,n){e=e||new Float32Array(t*r*4);const i=new Er(e,{width:t,height:r}),s=e instanceof Float32Array?g.FLOAT:g.UNSIGNED_BYTE;return new wr(i,Object.assign({},Tr,n||{width:t,height:r,type:s}))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),or[t]&&or[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),or[t]=e)}static removeFromCache(e){if("string"==typeof e){const t=or[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete or[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete or[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};let Sr=wr;Sr._globalBatch=0;class Ar extends br{constructor(e,t){const{width:r,height:n}=t||{};super(r,n),this.items=[],this.itemDirtyIds=[];for(let t=0;t<e;t++){const e=new Sr;this.items.push(e),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof br?this.addResourceAt(e[r],r):this.addResourceAt(xr(e[r],t),r))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map((e=>e.resource)).filter((e=>e)).map((e=>e.load()));return this._load=Promise.all(e).then((()=>{const{realWidth:e,realHeight:t}=this.items[0];return this.resize(e,t),Promise.resolve(this)})),this._load}}class Cr extends br{constructor(e){const t=e;super(t.naturalWidth||t.videoWidth||t.width,t.naturalHeight||t.videoHeight||t.height),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,r){void 0!==r||t.startsWith("data:")?!1!==r&&(e.crossOrigin="string"==typeof r?r:"anonymous"):e.crossOrigin=yr(t)}upload(e,t,r,n){const i=e.gl,s=t.realWidth,a=t.realHeight;if(n=n||this.source,"undefined"!=typeof HTMLImageElement&&n instanceof HTMLImageElement){if(!n.complete||0===n.naturalWidth)return!1}else if("undefined"!=typeof HTMLVideoElement&&n instanceof HTMLVideoElement&&n.readyState<=1&&0===n.buffered.length)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===b.UNPACK),this.noSubImage||t.target!==i.TEXTURE_2D||r.width!==s||r.height!==a?(r.width=s,r.height=a,i.texImage2D(t.target,0,r.internalFormat,t.format,r.type,n)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,t.format,r.type,n),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(t,r),super.update()}dispose(){this.source=null}}const Rr=class extends Ar{constructor(e,t){const{width:r,height:n,autoLoad:i,linkBaseTexture:s}=t||{};if(e&&e.length!==Rr.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:r,height:n});for(let e=0;e<Rr.SIDES;e++)this.items[e].target=m.TEXTURE_CUBE_MAP_POSITIVE_X+e;this.linkBaseTexture=!1!==s,e&&this.initFromArray(e,t),!1!==i&&this.load()}bind(e){super.bind(e),e.target=m.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0){if(!e.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(e.resource,t)}else e.target=m.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,r){const n=this.itemDirtyIds;for(let i=0;i<Rr.SIDES;i++){const s=this.items[i];(n[i]<s.dirtyId||r.dirtyId<t.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(e,s,r),n[i]=s.dirtyId):n[i]<-1&&(e.gl.texImage2D(s.target,0,r.internalFormat,t.realWidth,t.realHeight,0,t.format,r.type,null),n[i]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Rr.SIDES}};let Pr=Rr;Pr.SIDES=6;class Ir extends Cr{constructor(e,t){if(t=t||{},"string"==typeof e){const r=new Image;Cr.crossOrigin(r,e,t.crossorigin),r.src=e,e=r}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??W.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"==typeof t.alphaMode?t.alphaMode:null,this.bitmap=null,this._load=null,!1!==t.autoLoad&&this.load()}load(e){return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise(((e,t)=>{const r=this.source;this.url=r.src;const n=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.resize(r.width,r.height),this._load=null,this.createBitmap?e(this.process()):e(this))};r.complete&&r.src?n():(r.onload=n,r.onerror=e=>{t(e),this.onError.emit(e)})}))),this._load}process(){const e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,r=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then((e=>e.blob())).then((r=>t(r,0,0,e.width,e.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===b.UNPACK?"premultiply":"none"}))).then((e=>this.destroyed?Promise.reject():(this.bitmap=e,this.update(),this._process=null,Promise.resolve(this)))),this._process}upload(e,t,r){if("number"==typeof this.alphaMode&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,r,this.bitmap),!this.preserveBitmap){let e=!0;const n=t._glTextures;for(const i in n){const s=n[i];if(s!==r&&s.dirtyId!==t.dirtyId){e=!1;break}}e&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return"undefined"!=typeof HTMLImageElement&&("string"==typeof e||e instanceof HTMLImageElement)}}const Mr=class extends Cr{constructor(e,t){t=t||{},super(W.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,!1!==t.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise((e=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),e(this)},Mr.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}))),this._load}_loadSvg(){const e=new Image;Cr.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,r=e.height;if(!t||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=t*this.scale,i=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/r*t,i=this._overrideHeight||this._overrideWidth/t*r),n=Math.round(n),i=Math.round(i);const s=this.source;s.width=n,s.height=i,s._pixiId=`canvas_${ir()}`,s.getContext("2d").drawImage(e,0,0,t,r,0,0,n,i),this._resolve(),this._resolve=null}}static getSize(e){const t=Mr.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return"svg"===t||"string"==typeof e&&e.startsWith("data:image/svg+xml")||"string"==typeof e&&Mr.SVG_XML.test(e)}};let kr=Mr;kr.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,kr.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const Dr=class extends Cr{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),"string"==typeof e&&(e=[e]);const n=e[0].src||e[0];Cr.crossOrigin(r,n,t.crossorigin);for(let t=0;t<e.length;++t){const n=document.createElement("source");let{src:i,mime:s}=e[t];i=i||e[t];const a=i.split("?").shift().toLowerCase(),o=a.slice(a.lastIndexOf(".")+1);s=s||Dr.MIME_TYPES[o]||`video/${o}`,n.src=i,n.type=s,r.appendChild(n)}e=r}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==t.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==t.autoLoad&&this.load()}update(e=0){if(!this.destroyed){const e=Te.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t=>{this.valid?t(this):(this._resolve=t,e.load())})),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Te.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(Te.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._isConnectedToTicker&&(Te.shared.remove(this.update,this),this._isConnectedToTicker=!1);const e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Te.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Te.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e)}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||Dr.TYPES.includes(t)}};let Nr=Dr;Nr.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Nr.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};class Or extends Cr{constructor(e,t){var r=(...e)=>{super(...e)};t=t||{},"string"==typeof e?(r(Or.EMPTY),this.url=e):(r(e),this.url=null),this.crossOrigin=t.crossOrigin??!0,this.alphaMode="number"==typeof t.alphaMode?t.alphaMode:null,this._load=null,!1!==t.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise((async(e,t)=>{if(null!==this.url)try{const t=await W.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const r=await t.blob();if(this.destroyed)return;const n=await createImageBitmap(r,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===b.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=n,this.update(),e(this)}catch(e){if(this.destroyed)return;t(e),this.onError.emit(e)}else e(this)}))),this._load}upload(e,t,r){return this.source instanceof ImageBitmap?("number"==typeof this.alphaMode&&(t.alphaMode=this.alphaMode),super.upload(e,t,r)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&"undefined"!=typeof ImageBitmap&&("string"==typeof e||e instanceof ImageBitmap)}static get EMPTY(){return Or._EMPTY=Or._EMPTY??W.ADAPTER.createCanvas(0,0),Or._EMPTY}}_r.push(Or,Ir,class extends Cr{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return!!(t&&e instanceof t)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}},Nr,kr,Er,Pr,class extends Ar{constructor(e,t){const{width:r,height:n}=t||{};let i,s;Array.isArray(e)?(i=e,s=e.length):s=e,super(s,{width:r,height:n}),i&&this.initFromArray(i,t)}addBaseTextureAt(e,t){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,t),this}bind(e){super.bind(e),e.target=m.TEXTURE_2D_ARRAY}upload(e,t,r){const{length:n,itemDirtyIds:i,items:s}=this,{gl:a}=e;r.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,n,0,t.format,r.type,null);for(let e=0;e<n;e++){const n=s[e];i[e]<n.dirtyId&&(i[e]=n.dirtyId,n.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,e,n.resource.width,n.resource.height,1,t.format,r.type,n.resource.source))}return!0}});class Br extends Er{upload(e,t,r){const n=e.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===b.UNPACK);const i=t.realWidth,s=t.realHeight;return r.width===i&&r.height===s?n.texSubImage2D(t.target,0,0,0,i,s,t.format,r.type,this.data):(r.width=i,r.height=s,n.texImage2D(t.target,0,r.internalFormat,i,s,0,t.format,r.type,this.data)),!0}}class Lr{constructor(e,t){this.width=Math.round(e||100),this.height=Math.round(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new xe("disposeFramebuffer"),this.multisample=A.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new Sr(null,{scaleMode:v.NEAREST,resolution:1,mipmap:x.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new Sr(new Br(null,{width:this.width,height:this.height}),{scaleMode:v.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:x.OFF,format:p.DEPTH_COMPONENT,type:g.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const n=this.colorTextures[r],i=n.resolution;n.setSize(e/i,t/i)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(e/r,t/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Fr extends Sr{constructor(e={}){if("number"==typeof e){e={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}}e.width=e.width||100,e.height=e.height||100,e.multisample??(e.multisample=A.NONE),super(null,e),this.mipmap=x.OFF,this.valid=!0,this.clearColor=[0,0,0,0],this.framebuffer=new Lr(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Ur{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,r){const n=t.width,i=t.height;if(r){const t=e.width/2/n,s=e.height/2/i,a=e.x/n+t,o=e.y/i+s;r=ye.add(r,ye.NW),this.x0=a+t*ye.uX(r),this.y0=o+s*ye.uY(r),r=ye.add(r,2),this.x1=a+t*ye.uX(r),this.y1=o+s*ye.uY(r),r=ye.add(r,2),this.x2=a+t*ye.uX(r),this.y2=o+s*ye.uY(r),r=ye.add(r,2),this.x3=a+t*ye.uX(r),this.y3=o+s*ye.uY(r)}else this.x0=e.x/n,this.y0=e.y/i,this.x1=(e.x+e.width)/n,this.y1=e.y/i,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/i,this.x3=e.x/n,this.y3=(e.y+e.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const Gr=new Ur;function zr(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}class Hr extends(r(Ae)){constructor(e,t,r,n,i,s){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new ne(0,0,1,1)),e instanceof Hr&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=n,this.valid=!1,this._uvs=Gr,this.uvMatrix=null,this.orig=r||t,this._rotate=Number(i||0),!0===i)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=s?new te(s.x,s.y):new te(0,0),this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:e}=this.baseTexture;e?.url&&ar[e.url]&&Hr.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Hr.removeFromCache(this),this.textureCacheIds=null}clone(){const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),r=new Hr(this.baseTexture,!this.noFrame&&e,t,this.trim?.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=e),r}updateUvs(){this._uvs===Gr&&(this._uvs=new Ur),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},r=W.STRICT_TEXTURE_CACHE){const n="string"==typeof e;let i=null;if(n)i=e;else if(e instanceof Sr){if(!e.cacheId){const r=t?.pixiIdPrefix||"pixiid";e.cacheId=`${r}-${ir()}`,Sr.addToCache(e,e.cacheId)}i=e.cacheId}else{if(!e._pixiId){const r=t?.pixiIdPrefix||"pixiid";e._pixiId=`${r}_${ir()}`}i=e._pixiId}let s=ar[i];if(n&&r&&!s)throw new Error(`The cacheId "${i}" does not exist in TextureCache.`);return s||e instanceof Sr?!s&&e instanceof Sr&&(s=new Hr(e),Hr.addToCache(s,i)):(t.resolution||(t.resolution=vr(e)),s=new Hr(new Sr(e,t)),s.baseTexture.cacheId=i,Sr.addToCache(s.baseTexture,i),Hr.addToCache(s,i)),s}static fromURL(e,t){const r=Object.assign({autoLoad:!1},t?.resourceOptions),n=Hr.from(e,Object.assign({resourceOptions:r},t),!1),i=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):i.load().then((()=>Promise.resolve(n)))}static fromBuffer(e,t,r,n){return new Hr(Sr.fromBuffer(e,t,r,n))}static fromLoader(e,t,r,n){const i=new Sr(e,Object.assign({scaleMode:W.SCALE_MODE,resolution:vr(t)},n)),{resource:s}=i;s instanceof Ir&&(s.url=t);const a=new Hr(i);return r||(r=t),Sr.addToCache(a.baseTexture,r),Hr.addToCache(a,r),r!==t&&(Sr.addToCache(a.baseTexture,t),Hr.addToCache(a,t)),a.baseTexture.valid?Promise.resolve(a):new Promise((e=>{a.baseTexture.once("loaded",(()=>e(a)))}))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),ar[t]&&ar[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),ar[t]=e)}static removeFromCache(e){if("string"==typeof e){const t=ar[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete ar[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)ar[e.textureCacheIds[t]]===e&&delete ar[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:r,width:n,height:i}=e,s=t+n>this.baseTexture.width,a=r+i>this.baseTexture.height;if(s||a){const e=s&&a?"and":"or",o=`X: ${t} + ${n} = ${t+n} > ${this.baseTexture.width}`,l=`Y: ${r} + ${i} = ${r+i} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${o} ${e} ${l}`)}this.valid=n&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Hr._EMPTY||(Hr._EMPTY=new Hr(new Sr),zr(Hr._EMPTY),zr(Hr._EMPTY.baseTexture)),Hr._EMPTY}static get WHITE(){if(!Hr._WHITE){const e=W.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),Hr._WHITE=new Hr(Sr.from(e)),zr(Hr._WHITE),zr(Hr._WHITE.baseTexture)}return Hr._WHITE}}class jr extends Hr{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,r=!0){const n=this.baseTexture.resolution,i=Math.round(e*n)/n,s=Math.round(t*n)/n;this.valid=i>0&&s>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=s,r&&this.baseTexture.resize(i,s),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new jr(new Fr(e))}}class Xr{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,r=A.NONE){const n=new Fr(Object.assign({width:e,height:t,resolution:1,multisample:r},this.textureOptions));return new jr(n)}getOptimalTexture(e,t,r=1,n=A.NONE){let i;e=Math.ceil(e*r-1e-6),t=Math.ceil(t*r-1e-6),this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight?i=n>1?-n:-1:(i=((65535&(e=Zt(e)))<<16|65535&(t=Zt(t)))>>>0,n>1&&(i+=4294967296*n)),this.texturePool[i]||(this.texturePool[i]=[]);let s=this.texturePool[i].pop();return s||(s=this.createTexture(e,t,n)),s.filterPoolKey=i,s.setResolution(r),s}getFilterTexture(e,t,r){const n=this.getOptimalTexture(e.width,e.height,t||e.resolution,r||A.NONE);return n.filterFrame=e.filterFrame,n}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=!1!==e)for(const e in this.texturePool){const t=this.texturePool[e];if(t)for(let e=0;e<t.length;e++)t[e].destroy(!0)}this.texturePool={}}setScreenSize(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){this.enableFullScreen=e.width>0&&e.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const t=this.texturePool[e];if(t)for(let e=0;e<t.length;e++)t[e].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}Xr.SCREEN_KEY=-1;class Vr{constructor(e,t=0,r=!1,n=g.FLOAT,i,s,a){this.buffer=e,this.size=t,this.normalized=r,this.type=n,this.stride=i,this.start=s,this.instance=a}destroy(){this.buffer=null}static from(e,t,r,n,i){return new Vr(e,t,r,n,i)}}let Wr=0;class $r{constructor(e,t=!0,r=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=t,this.id=Wr++,this.disposeRunner=new xe("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?C.ELEMENT_ARRAY_BUFFER:C.ARRAY_BUFFER}get index(){return this.type===C.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new $r(e)}}const Yr={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function qr(e,t){let r=0,n=0;const i={};for(let i=0;i<e.length;i++)n+=t[i],r+=e[i].length;const s=new ArrayBuffer(4*r);let a=null,o=0;for(let r=0;r<e.length;r++){const l=t[r],h=e[r],u=qt(h);i[u]||(i[u]=new Yr[u](s)),a=i[u];for(let e=0;e<h.length;e++){a[(e/l|0)*n+o+e%l]=h[e]}o+=l}return new Float32Array(s)}const Kr={5126:4,5123:2,5121:1};let Qr=0;const Zr={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array};class Jr{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=Qr++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new xe("disposeGeometry"),this.refCount=0}addAttribute(e,t,r=0,n=!1,i,s,a,o=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof $r||(t instanceof Array&&(t=new Float32Array(t)),t=new $r(t));const l=e.split("|");if(l.length>1){for(let e=0;e<l.length;e++)this.addAttribute(l[e],t,r,n,i);return this}let h=this.buffers.indexOf(t);return-1===h&&(this.buffers.push(t),h=this.buffers.length-1),this.attributes[e]=new Vr(h,r,n,i,s,a,o),this.instanced=this.instanced||o,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof $r||(e instanceof Array&&(e=new Uint16Array(e)),e=new $r(e)),e.type=C.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;const e=[],t=[],r=new $r;let n;for(n in this.attributes){const r=this.attributes[n],i=this.buffers[r.buffer];e.push(i.data),t.push(r.size*Kr[r.type]/4),r.buffer=0}for(r.data=qr(e,t),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new Jr;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new $r(this.buffers[t].data.slice(0));for(const t in this.attributes){const r=this.attributes[t];e.attributes[t]=new Vr(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=C.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new Jr,r=[],n=[],i=[];let s;for(let t=0;t<e.length;t++){s=e[t];for(let e=0;e<s.buffers.length;e++)n[e]=n[e]||0,n[e]+=s.buffers[e].data.length,i[e]=0}for(let e=0;e<s.buffers.length;e++)r[e]=new(Zr[qt(s.buffers[e].data)])(n[e]),t.buffers[e]=new $r(r[e]);for(let t=0;t<e.length;t++){s=e[t];for(let e=0;e<s.buffers.length;e++)r[e].set(s.buffers[e].data,i[e]),i[e]+=s.buffers[e].data.length}if(t.attributes=s.attributes,s.indexBuffer){t.indexBuffer=t.buffers[s.buffers.indexOf(s.indexBuffer)],t.indexBuffer.type=C.ELEMENT_ARRAY_BUFFER;let r=0,n=0,i=0,a=0;for(let e=0;e<s.buffers.length;e++)if(s.buffers[e]!==s.indexBuffer){a=e;break}for(const e in s.attributes){const t=s.attributes[e];(0|t.buffer)===a&&(n+=t.size*Kr[t.type]/4)}for(let s=0;s<e.length;s++){const o=e[s].indexBuffer.data;for(let e=0;e<o.length;e++)t.indexBuffer.data[e+i]+=r;r+=e[s].buffers[a].data.length/n,i+=o.length}}return t}}class en extends Jr{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class tn extends Jr{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new $r(this.vertices),this.uvBuffer=new $r(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+t.width/e.width,this.uvs[3]=n,this.uvs[4]=r+t.width/e.width,this.uvs[5]=n+t.height/e.height,this.uvs[6]=r,this.uvs[7]=n+t.height/e.height,r=t.x,n=t.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+t.width,this.vertices[3]=n,this.vertices[4]=r+t.width,this.vertices[5]=n+t.height,this.vertices[6]=r,this.vertices[7]=n+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}let rn=0;class nn{constructor(e,t,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=rn++,this.static=!!t,this.ubo=!!r,e instanceof $r?(this.buffer=e,this.buffer.type=C.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new $r(new Float32Array(1)),this.buffer.type=C.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new nn(t,r)}static from(e,t,r){return new nn(e,t,r)}static uboFrom(e,t){return new nn(e,t??!0,!0)}}class sn{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=A.NONE,this.sourceFrame=new ne,this.destinationFrame=new ne,this.bindingSourceFrame=new ne,this.bindingDestinationFrame=new ne,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const an=[new te,new te,new te,new te],on=new he;class ln{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new Xr,this.statePool=[],this.quad=new en,this.quadUv=new tn,this.tempRect=new ne,this.activeState={},this.globalUniforms=new nn({outputFrame:new ne,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const r=this.renderer,n=this.defaultFilterStack,i=this.statePool.pop()||new sn,s=this.renderer.renderTexture;let a=t[0].resolution,o=t[0].multisample,l=t[0].padding,h=t[0].autoFit,u=t[0].legacy??!0;for(let e=1;e<t.length;e++){const r=t[e];a=Math.min(a,r.resolution),o=Math.min(o,r.multisample),l=this.useMaxPadding?Math.max(l,r.padding):l+r.padding,h=h&&r.autoFit,u=u||(r.legacy??!0)}1===n.length&&(this.defaultFilterStack[0].renderTexture=s.current),n.push(i),i.resolution=a,i.multisample=o,i.legacy=u,i.target=e,i.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),i.sourceFrame.pad(l);const c=this.tempRect.copyFrom(s.sourceFrame);r.projection.transform&&this.transformAABB(on.copyFrom(r.projection.transform).invert(),c),h?(i.sourceFrame.fit(c),(i.sourceFrame.width<=0||i.sourceFrame.height<=0)&&(i.sourceFrame.width=0,i.sourceFrame.height=0)):i.sourceFrame.intersects(c)||(i.sourceFrame.width=0,i.sourceFrame.height=0),this.roundFrame(i.sourceFrame,s.current?s.current.resolution:r.resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),i.renderTexture=this.getOptimalFilterTexture(i.sourceFrame.width,i.sourceFrame.height,a,o),i.filters=t,i.destinationFrame.width=i.renderTexture.width,i.destinationFrame.height=i.renderTexture.height;const d=this.tempRect;d.x=0,d.y=0,d.width=i.sourceFrame.width,d.height=i.sourceFrame.height,i.renderTexture.filterFrame=i.sourceFrame,i.bindingSourceFrame.copyFrom(s.sourceFrame),i.bindingDestinationFrame.copyFrom(s.destinationFrame),i.transform=r.projection.transform,r.projection.transform=null,s.bind(i.renderTexture,i.sourceFrame,d),r.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),r=t.filters;this.activeState=t;const n=this.globalUniforms.uniforms;n.outputFrame=t.sourceFrame,n.resolution=t.resolution;const i=n.inputSize,s=n.inputPixel,a=n.inputClamp;if(i[0]=t.destinationFrame.width,i[1]=t.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],s[0]=Math.round(i[0]*t.resolution),s[1]=Math.round(i[1]*t.resolution),s[2]=1/s[0],s[3]=1/s[1],a[0]=.5*s[2],a[1]=.5*s[3],a[2]=t.sourceFrame.width*i[2]-.5*s[2],a[3]=t.sourceFrame.height*i[3]-.5*s[3],t.legacy){const e=n.filterArea;e[0]=t.destinationFrame.width,e[1]=t.destinationFrame.height,e[2]=t.sourceFrame.x,e[3]=t.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const o=e[e.length-1];if(this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,t.renderTexture,o.renderTexture,E.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let e=t.renderTexture,n=this.getOptimalFilterTexture(e.width,e.height,t.resolution);n.filterFrame=e.filterFrame;let i=0;for(i=0;i<r.length-1;++i){1===i&&t.multisample>1&&(n=this.getOptimalFilterTexture(e.width,e.height,t.resolution),n.filterFrame=e.filterFrame),r[i].apply(this,e,n,E.CLEAR,t);const s=e;e=n,n=s}r[i].apply(this,e,o.renderTexture,E.BLEND,t),i>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(e),this.returnFilterTexture(n)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=E.CLEAR){const{renderTexture:r,state:n}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e?.filterFrame){const t=this.tempRect;t.x=0,t.y=0,t.width=e.filterFrame.width,t.height=e.filterFrame.height,r.bind(e,e.filterFrame,t)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const i=1&n.stateId||this.forceClear;(t===E.CLEAR||t===E.BLIT&&i)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,r,n){const i=this.renderer;i.state.set(e.state),this.bindAndClear(r,n),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(f.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(f.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:r,destinationFrame:n}=this.activeState,{orig:i}=t._texture,s=e.set(n.width,0,0,n.height,r.x,r.y),a=t.worldTransform.copyTo(he.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/i.width,1/i.height),s.translate(t.anchor.x,t.anchor.y),s}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,r=1,n=A.NONE){return this.texturePool.getOptimalTexture(e,t,r,n)}getFilterTexture(e,t,r){if("number"==typeof e){const r=e;e=t,t=r}e=e||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,r||A.NONE);return n.filterFrame=e.filterFrame,n}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const r=an[0],n=an[1],i=an[2],s=an[3];r.set(t.left,t.top),n.set(t.left,t.bottom),i.set(t.right,t.top),s.set(t.right,t.bottom),e.apply(r,r),e.apply(n,n),e.apply(i,i),e.apply(s,s);const a=Math.min(r.x,n.x,i.x,s.x),o=Math.min(r.y,n.y,i.y,s.y),l=Math.max(r.x,n.x,i.x,s.x),h=Math.max(r.y,n.y,i.y,s.y);t.x=a,t.y=o,t.width=l-a,t.height=h-o}roundFrame(e,t,r,n,i){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(i){const{a:e,b:t,c:r,d:n}=i;if((Math.abs(t)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(n)>1e-4))return}(i=i?on.copyFrom(i):on.identity()).translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.transformAABB(i,e),e.ceil(t),this.transformAABB(i.invert(),e)}}}ln.extension={type:$.RendererSystem,name:"filter"},K.add(ln);class hn{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}class un{constructor(e){this.renderer=e,this.emptyRenderer=new hn(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:r}=this.renderer.texture;for(let n=t-1;n>=0;--n)e[n]=r[n]||null,e[n]&&(e[n]._batchLocation=n)}boundArray(e,t,r,n){const{elements:i,ids:s,count:a}=e;let o=0;for(let e=0;e<a;e++){const a=i[e],l=a._batchLocation;if(l>=0&&l<n&&t[l]===a)s[e]=l;else for(;o<n;){const n=t[o];if(!n||n._batchEnabled!==r||n._batchLocation!==o){s[e]=o,a._batchLocation=o,t[o]=a;break}o++}}}destroy(){this.renderer=null}}un.extension={type:$.RendererSystem,name:"batch"},K.add(un);let cn=0;class dn{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=cn++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,r=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:r,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=cn++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;void 0!==t.addEventListener&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let r;if(W.PREFER_ENV>=u.WEBGL2&&(r=e.getContext("webgl2",t)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout((()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()}),0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,void 0!==e.removeEventListener&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}dn.extension={type:$.RendererSystem,name:"context"},K.add(dn);class fn{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=A.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const pn=new ne;class mn{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new Lr(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ne,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){let t=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;W.PREFER_ENV===u.WEBGL_LEGACY&&(t=null,r=null),t?e.drawBuffers=e=>t.drawBuffersWEBGL(e):(this.hasMRT=!1,e.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,r=0){const{gl:n}=this;if(e){const i=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,i.mipLevel=r),i.dirtyId!==e.dirtyId&&(i.dirtyId=e.dirtyId,i.dirtyFormat!==e.dirtyFormat?(i.dirtyFormat=e.dirtyFormat,i.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):i.dirtySize!==e.dirtySize&&(i.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let t=0;t<e.colorTextures.length;t++){const r=e.colorTextures[t];this.renderer.texture.unbind(r.parentTextureArray||r)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const e=t.width>>r,n=t.height>>r,i=e/t.width;this.setViewport(t.x*i,t.y*i,e,n)}else{const t=e.width>>r,n=e.height>>r;this.setViewport(0,0,t,n)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,r,n){const i=this.viewport;e=Math.round(e),t=Math.round(t),r=Math.round(r),n=Math.round(n),i.width===r&&i.height===n&&i.x===e&&i.y===t||(i.x=e,i.y=t,i.width=r,i.height=n,this.gl.viewport(e,t,r,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,r,n,i=c.COLOR|c.DEPTH){const{gl:s}=this;s.clearColor(e,t,r,n),s.clear(i)}initFramebuffer(e){const{gl:t}=this,r=new fn(t.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r}resizeFramebuffer(e){const{gl:t}=this,r=e.glFramebuffers[this.CONTEXT_UID];r.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,r.stencil),r.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));const n=e.colorTextures;let i=n.length;t.drawBuffers||(i=Math.min(i,1));for(let s=0;s<i;s++){const i=n[s],a=i.parentTextureArray||i;this.renderer.texture.bind(a,0),0===s&&r.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,a._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:r}=this,n=e.glFramebuffers[this.CONTEXT_UID],i=e.colorTextures;let s=i.length;r.drawBuffers||(s=Math.min(s,1)),n.multisample>1&&this.canMultisampleFramebuffer(e)?n.msaaBuffer=n.msaaBuffer||r.createRenderbuffer():n.msaaBuffer&&(r.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const a=[];for(let o=0;o<s;o++){const s=i[o],l=s.parentTextureArray||s;this.renderer.texture.bind(l,0),0===o&&n.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,n.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+o,s.target,l._glTextures[this.CONTEXT_UID].texture,t),a.push(r.COLOR_ATTACHMENT0+o))}if(a.length>1&&r.drawBuffers(a),e.depthTexture){if(this.writeDepthTexture){const n=e.depthTexture;this.renderer.texture.bind(n,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,n._glTextures[this.CONTEXT_UID].texture,t)}}!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture?n.stencil&&(r.deleteRenderbuffer(n.stencil),n.stencil=null):(n.stencil=n.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n.stencil))}canMultisampleFramebuffer(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let r=A.NONE;if(e<=1||null===t)return r;for(let n=0;n<t.length;n++)if(t[n]<=e){r=t[n];break}return 1===r&&(r=A.NONE),r}blit(e,t,r){const{current:n,renderer:i,gl:s,CONTEXT_UID:a}=this;if(2!==i.context.webGLVersion)return;if(!n)return;const o=n.glFramebuffers[a];if(!o)return;if(!e){if(!o.msaaBuffer)return;const t=n.colorTextures[0];if(!t)return;o.blitFramebuffer||(o.blitFramebuffer=new Lr(n.width,n.height),o.blitFramebuffer.addColorTexture(0,t)),(e=o.blitFramebuffer).colorTextures[0]!==t&&(e.colorTextures[0]=t,e.dirtyId++,e.dirtyFormat++),e.width===n.width&&e.height===n.height||(e.width=n.width,e.height=n.height,e.dirtyId++,e.dirtySize++)}t||((t=pn).width=n.width,t.height=n.height),r||(r=t);const l=t.width===r.width&&t.height===r.height;this.bind(e),s.bindFramebuffer(s.READ_FRAMEBUFFER,o.framebuffer),s.blitFramebuffer(t.left,t.top,t.right,t.bottom,r.left,r.top,r.right,r.bottom,s.COLOR_BUFFER_BIT,l?s.NEAREST:s.LINEAR)}disposeFramebuffer(e,t){const r=e.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!r)return;delete e.glFramebuffers[this.CONTEXT_UID];const i=this.managedFramebuffers.indexOf(e);i>=0&&this.managedFramebuffers.splice(i,1),e.disposeRunner.remove(this),t||(n.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&n.deleteRenderbuffer(r.msaaBuffer),r.stencil&&n.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&r.blitFramebuffer.dispose()}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<t.length;r++)this.disposeFramebuffer(t[r],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil)return;e.stencil=!0;const r=e.width,n=e.height,i=this.gl,s=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,s),t.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,t.multisample,i.DEPTH24_STENCIL8,r,n):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,r,n),t.stencil=s,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,s)}reset(){this.current=this.unknownFramebuffer,this.viewport=new ne}destroy(){this.renderer=null}}mn.extension={type:$.RendererSystem,name:"framebuffer"},K.add(mn);const gn={5126:4,5123:2,5121:1};class yn{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){let t=this.renderer.context.extensions.vertexArrayObject;W.PREFER_ENV===u.WEBGL_LEGACY&&(t=null),t?(e.createVertexArray=()=>t.createVertexArrayOES(),e.bindVertexArray=e=>t.bindVertexArrayOES(e),e.deleteVertexArray=e=>t.deleteVertexArrayOES(e)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(2!==t.webGLVersion){const t=e.getExtension("ANGLE_instanced_arrays");t?(e.vertexAttribDivisor=(e,r)=>t.vertexAttribDivisorANGLE(e,r),e.drawElementsInstanced=(e,r,n,i,s)=>t.drawElementsInstancedANGLE(e,r,n,i,s),e.drawArraysInstanced=(e,r,n,i)=>t.drawArraysInstancedANGLE(e,r,n,i)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:r}=this;let n=e.glVertexArrayObjects[this.CONTEXT_UID],i=!1;n||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=n={},i=!0);const s=n[t.program.id]||this.initGeometryVao(e,t,i);this._activeGeometry=e,this._activeVao!==s&&(this._activeVao=s,this.hasVao?r.bindVertexArray(s):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let r=0;r<e.buffers.length;r++){const n=e.buffers[r];t.update(n)}}checkCompatibility(e,t){const r=e.attributes,n=t.attributeData;for(const e in n)if(!r[e])throw new Error(`shader and geometry incompatible, geometry missing the "${e}" attribute`)}getSignature(e,t){const r=e.attributes,n=t.attributeData,i=["g",e.id];for(const e in r)n[e]&&i.push(e,n[e].location);return i.join("-")}initGeometryVao(e,t,r=!0){const n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,a=t.program;a.glPrograms[i]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);const o=this.getSignature(e,a),l=e.glVertexArrayObjects[this.CONTEXT_UID];let h=l[o];if(h)return l[a.id]=h,h;const u=e.buffers,c=e.attributes,d={},f={};for(const e in u)d[e]=0,f[e]=0;for(const e in c)!c[e].size&&a.attributeData[e]?c[e].size=a.attributeData[e].size:c[e].size||console.warn(`PIXI Geometry attribute '${e}' size cannot be determined (likely the bound shader does not have the attribute)`),d[c[e].buffer]+=c[e].size*gn[c[e].type];for(const e in c){const t=c[e],r=t.size;void 0===t.stride&&(d[t.buffer]===r*gn[t.type]?t.stride=0:t.stride=d[t.buffer]),void 0===t.start&&(t.start=f[t.buffer],f[t.buffer]+=r*gn[t.type])}h=n.createVertexArray(),n.bindVertexArray(h);for(let e=0;e<u.length;e++){const t=u[e];s.bind(t),r&&t._glBuffers[i].refCount++}return this.activateVao(e,a),l[a.id]=h,l[o]=h,n.bindVertexArray(null),s.unbind(C.ARRAY_BUFFER),h}disposeGeometry(e,t){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const r=e.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,i=e.buffers,s=this.renderer?.buffer;if(e.disposeRunner.remove(this),r){if(s)for(let e=0;e<i.length;e++){const r=i[e]._glBuffers[this.CONTEXT_UID];r&&(r.refCount--,0!==r.refCount||t||s.dispose(i[e],t))}if(!t)for(const e in r)if("g"===e[0]){const t=r[e];this._activeVao===t&&this.unbind(),n.deleteVertexArray(t)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let r=0;r<t.length;r++)this.disposeGeometry(this.managedGeometries[t[r]],e)}activateVao(e,t){const r=this.gl,n=this.CONTEXT_UID,i=this.renderer.buffer,s=e.buffers,a=e.attributes;e.indexBuffer&&i.bind(e.indexBuffer);let o=null;for(const e in a){const l=a[e],h=s[l.buffer],u=h._glBuffers[n];if(t.attributeData[e]){o!==u&&(i.bind(h),o=u);const n=t.attributeData[e].location;if(r.enableVertexAttribArray(n),r.vertexAttribPointer(n,l.size,l.type||r.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(n,1)}}}}draw(e,t,r,n){const{gl:i}=this,s=this._activeGeometry;if(s.indexBuffer){const a=s.indexBuffer.data.BYTES_PER_ELEMENT,o=2===a?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?s.instanced?i.drawElementsInstanced(e,t||s.indexBuffer.data.length,o,(r||0)*a,n||1):i.drawElements(e,t||s.indexBuffer.data.length,o,(r||0)*a):console.warn("unsupported index buffer type: uint32")}else s.instanced?i.drawArraysInstanced(e,r,t||s.getSize(),n||1):i.drawArrays(e,r,t||s.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}yn.extension={type:$.RendererSystem,name:"geometry"},K.add(yn);class vn{constructor(e=null){this.type=S.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=W.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=S.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}function _n(e,t,r){const n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}function xn(e,t){const r=e.getShaderSource(t).split("\n").map(((e,t)=>`${t}: ${e}`)),n=e.getShaderInfoLog(t),i=n.split("\n"),s={},a=i.map((e=>parseFloat(e.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1")))).filter((e=>!(!e||s[e])&&(s[e]=!0,!0))),o=[""];a.forEach((e=>{r[e-1]=`%c${r[e-1]}%c`,o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));const l=r.join("\n");o[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...o),console.groupEnd()}function bn(e,t,r,n){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||xn(e,r),e.getShaderParameter(n,e.COMPILE_STATUS)||xn(e,n),console.error("PixiJS Error: Could not initialize shader."),""!==e.getProgramInfoLog(t)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}function En(e){const t=new Array(e);for(let e=0;e<t.length;e++)t[e]=!1;return t}function Tn(e,t){switch(e){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return En(2*t);case"bvec3":return En(3*t);case"bvec4":return En(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const wn={};let Sn,An=wn;function Cn(){if(An===wn||An?.isContextLost()){const e=W.ADAPTER.createCanvas();let t;W.PREFER_ENV>=u.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),An=t}return An}function Rn(){if(!Sn){Sn=w.MEDIUM;const e=Cn();if(e&&e.getShaderPrecisionFormat){const t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);Sn=t.precision?w.HIGH:w.MEDIUM}}return Sn}function Pn(e,t,r){if("precision"!==e.substring(0,9)){let n=t;return t===w.HIGH&&r!==w.HIGH&&(n=w.MEDIUM),`precision ${n} float;\n${e}`}return r!==w.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}const In={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Mn(e){return In[e]}let kn=null;const Dn={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Nn(e,t){if(!kn){const t=Object.keys(Dn);kn={};for(let r=0;r<t.length;++r){const n=t[r];kn[e[n]]=Dn[n]}}return kn[t]}const On=[{test:e=>"float"===e.type&&1===e.size&&!e.isArray,code:e=>`\n            if(uv["${e}"] !== ud["${e}"].value)\n            {\n                ud["${e}"].value = uv["${e}"]\n                gl.uniform1f(ud["${e}"].location, uv["${e}"])\n            }\n            `},{test:(e,t)=>!("sampler2D"!==e.type&&"samplerCube"!==e.type&&"sampler2DArray"!==e.type||1!==e.size||e.isArray||null!=t&&void 0===t.castToBaseTexture),code:e=>`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${e}"], t);\n\n            if(ud["${e}"].value !== t)\n            {\n                ud["${e}"].value = t;\n                gl.uniform1i(ud["${e}"].location, t);\n; // eslint-disable-line max-len\n            }`},{test:(e,t)=>"mat3"===e.type&&1===e.size&&!e.isArray&&void 0!==t.a,code:e=>`\n            gl.uniformMatrix3fv(ud["${e}"].location, false, uv["${e}"].toArray(true));\n            `,codeUbo:e=>`\n                var ${e}_matrix = uv.${e}.toArray(true);\n\n                data[offset] = ${e}_matrix[0];\n                data[offset+1] = ${e}_matrix[1];\n                data[offset+2] = ${e}_matrix[2];\n        \n                data[offset + 4] = ${e}_matrix[3];\n                data[offset + 5] = ${e}_matrix[4];\n                data[offset + 6] = ${e}_matrix[5];\n        \n                data[offset + 8] = ${e}_matrix[6];\n                data[offset + 9] = ${e}_matrix[7];\n                data[offset + 10] = ${e}_matrix[8];\n            `},{test:(e,t)=>"vec2"===e.type&&1===e.size&&!e.isArray&&void 0!==t.x,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${e}"].location, v.x, v.y);\n                }`,codeUbo:e=>`\n                v = uv.${e};\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `},{test:e=>"vec2"===e.type&&1===e.size&&!e.isArray,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${e}"].location, v[0], v[1]);\n                }\n            `},{test:(e,t)=>"vec4"===e.type&&1===e.size&&!e.isArray&&void 0!==t.width,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${e}"].location, v.x, v.y, v.width, v.height)\n                }`,codeUbo:e=>`\n                    v = uv.${e};\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `},{test:e=>"vec4"===e.type&&1===e.size&&!e.isArray,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${e}"].location, v[0], v[1], v[2], v[3])\n                }`}],Bn={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},Ln={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Fn(e,t){const r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(const n in e.uniforms){const i=t[n];if(!i){e.uniforms[n]?.group&&(e.uniforms[n].ubo?r.push(`\n                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');\n                    `):r.push(`\n                        renderer.shader.syncUniformGroup(uv.${n}, syncData);\n                    `));continue}const s=e.uniforms[n];let a=!1;for(let e=0;e<On.length;e++)if(On[e].test(i,s)){r.push(On[e].code(n,s)),a=!0;break}if(!a){const e=(1!==i.size||i.isArray?Ln:Bn)[i.type].replace("location",`ud["${n}"].location`);r.push(`\n            cu = ud["${n}"];\n            cv = cu.value;\n            v = uv["${n}"];\n            ${e};`)}}return new Function("ud","uv","renderer","syncData",r.join("\n"))}const Un=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Gn(e){let t="";for(let r=0;r<e;++r)r>0&&(t+="\nelse "),r<e-1&&(t+=`if(test == ${r}.0){}`);return t}function zn(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=t.createShader(t.FRAGMENT_SHADER);for(;;){const n=Un.replace(/%forloop%/gi,Gn(e));if(t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))break;e=e/2|0}return e}let Hn;function jn(){if("boolean"==typeof Hn)return Hn;try{const e=new Function("param1","param2","param3","return param1[param2] === param3;");Hn=!0===e({a:"b"},"a","b")}catch(e){Hn=!1}return Hn}let Xn=0;const Vn={};class Wn{constructor(e,t,r="pixi-shader",n={}){this.extra={},this.id=Xn++,this.vertexSrc=e||Wn.defaultVertexSrc,this.fragmentSrc=t||Wn.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),Vn[r]?(Vn[r]++,r+=`-${Vn[r]}`):Vn[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}\n${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}\n${this.fragmentSrc}`,this.vertexSrc=Pn(this.vertexSrc,W.PRECISION_VERTEX,w.HIGH),this.fragmentSrc=Pn(this.fragmentSrc,W.PRECISION_FRAGMENT,Rn())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}static from(e,t,r){const n=e+t;let i=sr[n];return i||(sr[n]=i=new Wn(e,t,r)),i}}class $n{constructor(e,t){this.uniformBindCount=0,this.program=e,this.uniformGroup=t?t instanceof nn?t:new nn(t):new nn({}),this.disposeRunner=new xe("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const r in t.uniforms){const n=t.uniforms[r];if(n.group&&this.checkUniformExists(e,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,r){const n=Wn.from(e,t);return new $n(n,r)}}class Yn{constructor(){this.data=0,this.blendMode=d.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(e){!!(1&this.data)!==e&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(e){!!(2&this.data)!==e&&(this.data^=2)}get culling(){return!!(4&this.data)}set culling(e){!!(4&this.data)!==e&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(e){!!(8&this.data)!==e&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(e){!!(32&this.data)!==e&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(e){!!(16&this.data)!==e&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==d.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new Yn;return e.depthTest=!1,e.blend=!0,e}}class qn extends $n{constructor(e,t,r){super(Wn.from(e||qn.defaultVertexSrc,t||qn.defaultFragmentSrc),r),this.padding=0,this.resolution=W.FILTER_RESOLUTION,this.multisample=W.FILTER_MULTISAMPLE,this.enabled=!0,this.autoFit=!0,this.state=new Yn}apply(e,t,r,n,i){e.applyFilter(this,t,r,n)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}}const Kn=new he;class Qn{constructor(e,t){this._texture=e,this.mapCoord=new he,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===t?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){void 0===t&&(t=e);const r=this.mapCoord;for(let n=0;n<e.length;n+=2){const i=e[n],s=e[n+1];t[n]=i*r.a+s*r.c+r.tx,t[n+1]=i*r.b+s*r.d+r.ty}return t}update(e){const t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const n=t.orig,i=t.trim;i&&(Kn.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(Kn));const s=t.baseTexture,a=this.uClampFrame,o=this.clampMargin/s.resolution,l=this.clampOffset;return a[0]=(t._frame.x+o+l)/s.width,a[1]=(t._frame.y+o+l)/s.height,a[2]=(t._frame.x+t._frame.width-o+l)/s.width,a[3]=(t._frame.y+t._frame.height-o+l)/s.height,this.uClampOffset[0]=l/s.realWidth,this.uClampOffset[1]=l/s.realHeight,this.isSimple=t._frame.width===s.width&&t._frame.height===s.height&&0===t.rotate,!0}}class Zn extends qn{constructor(e,t,r){let n=null;"string"!=typeof e&&void 0===t&&void 0===r&&(n=e,e=void 0,t=void 0,r=void 0),super(e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",t||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r),this.maskSprite=n,this.maskMatrix=new he}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,r,n){const i=this._maskSprite,s=i._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new Qn(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,i).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,e.applyFilter(this,t,r,n))}}class Jn{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let r=t;if(!r.isMaskData){const e=this.maskDataPool.pop()||new vn;e.pooled=!0,e.maskObject=t,r=e}const n=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(n),r._colorMask=n?n._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==S.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case S.SCISSOR:this.renderer.scissor.push(r);break;case S.STENCIL:this.renderer.stencil.push(r);break;case S.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case S.COLOR:this.pushColorMask(r)}r.type===S.SPRITE&&this.maskStack.push(r)}pop(e){const t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case S.SCISSOR:this.renderer.scissor.pop(t);break;case S.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case S.SPRITE:this.popSpriteMask(t);break;case S.COLOR:this.popColorMask(t)}if(t.reset(),t.pooled&&this.maskDataPool.push(t),0!==this.maskStack.length){const e=this.maskStack[this.maskStack.length-1];e.type===S.SPRITE&&e._filters&&(e._filters[0].maskSprite=e.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=S.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=S.SCISSOR:e.type=S.STENCIL:e.type=S.COLOR}pushSpriteMask(e){const{maskObject:t}=e,r=e._target;let n=e._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new Zn]));const i=this.renderer,s=i.renderTexture;let a,o;if(s.current){const t=s.current;a=e.resolution||t.resolution,o=e.multisample??t.multisample}else a=e.resolution||i.resolution,o=e.multisample??i.multisample;n[0].resolution=a,n[0].multisample=o,n[0].maskSprite=t;const l=r.filterArea;r.filterArea=t.getBounds(!0),i.filter.push(r,n),r.filterArea=l,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,r=e._colorMask=t&e.colorMask;r!==t&&this.renderer.gl.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r))}popColorMask(e){const t=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==t&&this.renderer.gl.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r))}destroy(){this.renderer=null}}Jn.extension={type:$.RendererSystem,name:"mask"},K.add(Jn);class ei{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,r=this.getStackLength();this.maskStack=e;const n=this.getStackLength();n!==r&&(0===n?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const ti=new he,ri=[],ni=class extends ei{constructor(e){super(e),this.glConst=W.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:r}=e,{renderer:n}=this,i=n.renderTexture,s=r.getBounds(!0,ri.pop()??new ne);this.roundFrameToPixels(s,i.current?i.current.resolution:n.resolution,i.sourceFrame,i.destinationFrame,n.projection.transform),t&&s.fit(t),e._scissorRectLocal=s}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:r,c:n,d:i}=e;return(Math.abs(r)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(i)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect())return!1;if(ni.isMatrixRotated(t.worldTransform))return!1;if(ni.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const r=e._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(e,t,r,n,i){ni.isMatrixRotated(i)||((i=i?ti.copyFrom(i):ti.identity()).translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.renderer.filter.transformAABB(i,e),e.fit(n),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&ri.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};let ii=ni;ii.extension={type:$.RendererSystem,name:"scissor"},K.add(ii);class si extends ei{constructor(e){super(e),this.glConst=W.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:r}=this.renderer,n=e._stencilCounter;0===n&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;const i=e._colorMask;0!==i&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,n,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==i&&(e._colorMask=i,r.colorMask(0!=(1&i),0!=(2&i),0!=(4&i),0!=(8&i))),this._useCurrent()}pop(e){const t=this.renderer.gl;if(0===this.getStackLength())t.disable(t.STENCIL_TEST);else{const r=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,n=r?r._colorMask:15;0!==n&&(r._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==n&&(r._colorMask=n,t.colorMask(0!=(1&n),0!=(2&n),0!=(4&n),0!=(8&n))),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}si.extension={type:$.RendererSystem,name:"stencil"},K.add(si);class ai{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new he,this.transform=null}update(e,t,r,n){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,n),this.transform&&this.projectionMatrix.append(this.transform);const i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)}calculateProjection(e,t,r,n){const i=this.projectionMatrix,s=n?-1:1;i.identity(),i.a=1/t.width*2,i.d=s*(1/t.height*2),i.tx=-1-t.x*i.a,i.ty=-s-t.y*i.d}setTransform(e){}destroy(){this.renderer=null}}ai.extension={type:$.RendererSystem,name:"projection"},K.add(ai);const oi=new ne,li=new ne;class hi{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ne,this.destinationFrame=new ne,this.viewportFrame=new ne}bind(e=null,t,r){const n=this.renderer;let i,s,a;this.current=e,e?(i=e.baseTexture,a=i.resolution,t||(oi.width=e.frame.width,oi.height=e.frame.height,t=oi),r||(li.x=e.frame.x,li.y=e.frame.y,li.width=t.width,li.height=t.height,r=li),s=i.framebuffer):(a=n.resolution,t||(oi.width=n._view.screen.width,oi.height=n._view.screen.height,t=oi),r||((r=oi).width=t.width,r.height=t.height));const o=this.viewportFrame;o.x=r.x*a,o.y=r.y*a,o.width=r.width*a,o.height=r.height*a,e||(o.y=n.view.height-(o.y+o.height)),o.ceil(),this.renderer.framebuffer.bind(s,o),this.renderer.projection.update(r,t,a,!s),e?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r)}clear(e,t){e=this.current?e||this.current.baseTexture.clearColor:e||this.renderer.background.colorRgba;const r=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer._view.screen,i=r.width!==n.width||r.height!==n.height;if(i){let{x:e,y:t,width:r,height:n}=this.viewportFrame;e=Math.round(e),t=Math.round(t),r=Math.round(r),n=Math.round(n),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(e,t,r,n)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],t),i&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}function ui(e,t,r,n,i){r.buffer.update(i)}hi.extension={type:$.RendererSystem,name:"renderTexture"},K.add(hi);const ci={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},di={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function fi(e,t){if(!e.autoManage)return{size:0,syncFunc:ui};const r=function(e,t){const r=[];for(const n in e)t[n]&&r.push(t[n]);return r.sort(((e,t)=>e.index-t.index)),r}(e.uniforms,t),{uboElements:n,size:i}=function(e){const t=e.map((e=>({data:e,offset:0,dataLen:0,dirty:0})));let r=0,n=0,i=0;for(let e=0;e<t.length;e++){const s=t[e];if(r=di[s.data.type],s.data.size>1&&(r=Math.max(r,16)*s.data.size),s.dataLen=r,n%r!=0&&n<16){const e=n%r%16;n+=e,i+=e}n+r>16?(i=16*Math.ceil(i/16),s.offset=i,i+=r,n=r):(s.offset=i,n+=r,i+=r)}return i=16*Math.ceil(i/16),{uboElements:t,size:i}}(r),s=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(let t=0;t<n.length;t++){const r=n[t],i=e.uniforms[r.data.name],a=r.data.name;let o=!1;for(let e=0;e<On.length;e++){const t=On[e];if(t.codeUbo&&t.test(r.data,i)){s.push(`offset = ${r.offset/4};`,On[e].codeUbo(r.data.name,i)),o=!0;break}}if(!o)if(r.data.size>1){const e=Mn(r.data.type),t=Math.max(di[r.data.type]/16,1),n=e/t,i=(4-n%4)%4;s.push(`\n                cv = ud.${a}.value;\n                v = uv.${a};\n                offset = ${r.offset/4};\n\n                t = 0;\n\n                for(var i=0; i < ${r.data.size*t}; i++)\n                {\n                    for(var j = 0; j < ${n}; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ${i};\n                }\n\n                `)}else{const e=ci[r.data.type];s.push(`\n                cv = ud.${a}.value;\n                v = uv.${a};\n                offset = ${r.offset/4};\n                ${e};\n                `)}}return s.push("\n       renderer.buffer.update(buffer);\n    "),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join("\n"))}}class pi{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function mi(e,t){const r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const n=t.getActiveAttrib(e,i);if(n.name.startsWith("gl_"))continue;const s=Nn(t,n.type),a={type:s,name:n.name,size:Mn(s),location:t.getAttribLocation(e,n.name)};r[n.name]=a}return r}function gi(e,t){const r={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const n=t.getActiveUniform(e,i),s=n.name.replace(/\[.*?\]$/,""),a=!!n.name.match(/\[.*?\]$/),o=Nn(t,n.type);r[s]={name:s,index:i,type:o,size:n.size,isArray:a,value:Tn(o,n.size)}}return r}function yi(e,t){const r=_n(e,e.VERTEX_SHADER,t.vertexSrc),n=_n(e,e.FRAGMENT_SHADER,t.fragmentSrc),i=e.createProgram();e.attachShader(i,r),e.attachShader(i,n);const s=t.extra?.transformFeedbackVaryings;if(s&&("function"!=typeof e.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(i,s.names,"separate"===s.bufferMode?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)||bn(e,i,r,n),t.attributeData=mi(i,e),t.uniformData=gi(i,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const r=Object.keys(t.attributeData);r.sort(((e,t)=>e>t?1:-1));for(let n=0;n<r.length;n++)t.attributeData[r[n]].location=n,e.bindAttribLocation(i,n,r[n]);e.linkProgram(i)}e.deleteShader(r),e.deleteShader(n);const a={};for(const r in t.uniformData){const n=t.uniformData[r];a[r]={location:e.getUniformLocation(i,r),value:Tn(n.type,n.size)}}return new pi(i,a)}let vi=0;const _i={textureCount:0,uboCount:0};class xi{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=vi++}systemCheck(){if(!jn())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const r=e.program,n=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(n.program)),t||(_i.textureCount=0,_i.uboCount=0,this.syncUniformGroup(e.uniformGroup,_i)),n}setUniforms(e){const t=this.shader.program,r=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(r.uniformData,e,this.renderer)}syncUniformGroup(e,t){const r=this.getGlProgram();e.static&&e.dirtyId===r.uniformDirtyGroups[e.id]||(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,t))}syncUniforms(e,t,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,r)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=Fn(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const r=this.getGlProgram();if(!e.static||0!==e.dirtyId||!r.uniformGroups[e.id]){e.dirtyId=0;const n=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,t);e.buffer.update(),n(r.uniformData,e.uniforms,this.renderer,_i,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[t])}createSyncBufferGroup(e,t,r){const{gl:n}=this.renderer;this.renderer.buffer.bind(e.buffer);const i=this.gl.getUniformBlockIndex(t.program,r);t.uniformBufferBindings[r]=this.shader.uniformBindCount,n.uniformBlockBinding(t.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;const s=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[s];if(a||(a=this._uboCache[s]=fi(e,this.shader.program.uniformData)),e.autoManage){const t=new Float32Array(a.size/4);e.buffer.update(t)}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,r){const n=e.uniforms,i=[`${r}-`];for(const e in n)i.push(e),t[e]&&i.push(t[e].type);return i.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,r=e.program,n=yi(t,r);return r.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}function bi(e,t=[]){return t[d.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[d.ADD]=[e.ONE,e.ONE],t[d.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[d.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[d.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[d.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[d.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[d.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[d.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[d.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[d.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[d.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[d.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[d.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[d.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[d.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[d.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[d.NONE]=[0,0],t[d.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[d.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[d.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[d.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[d.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[d.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[d.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[d.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[d.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[d.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[d.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[d.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}xi.extension={type:$.RendererSystem,name:"shader"},K.add(xi);const Ei=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=d.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Yn,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=bi(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,r=0;for(;t;)1&t&&this.map[r].call(this,!!(e.data&1<<r)),t>>=1,r++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(Ei.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(Ei.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],r=this.gl;2===t.length?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const r=this.checks.indexOf(e);t&&-1===r?this.checks.push(e):t||-1===r||this.checks.splice(r,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};let Ti=Ei;Ti.extension={type:$.RendererSystem,name:"state"},K.add(Ti);class wi{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=W.GC_MAX_IDLE,this.checkCountMax=W.GC_MAX_CHECK_COUNT,this.mode=W.GC_MODE}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==T.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let r=!1;for(let n=0;n<t.length;n++){const i=t[n];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),t[n]=null,r=!0)}if(r){let e=0;for(let r=0;r<t.length;r++)null!==t[r]&&(t[e++]=t[r]);t.length=e}}unload(e){const t=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(let t=e.children.length-1;t>=0;t--)this.unload(e.children[t])}destroy(){this.renderer=null}}function Si(e){let t;return t="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?{[g.UNSIGNED_BYTE]:{[p.RGBA]:e.RGBA8,[p.RGB]:e.RGB8,[p.RG]:e.RG8,[p.RED]:e.R8,[p.RGBA_INTEGER]:e.RGBA8UI,[p.RGB_INTEGER]:e.RGB8UI,[p.RG_INTEGER]:e.RG8UI,[p.RED_INTEGER]:e.R8UI,[p.ALPHA]:e.ALPHA,[p.LUMINANCE]:e.LUMINANCE,[p.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[g.BYTE]:{[p.RGBA]:e.RGBA8_SNORM,[p.RGB]:e.RGB8_SNORM,[p.RG]:e.RG8_SNORM,[p.RED]:e.R8_SNORM,[p.RGBA_INTEGER]:e.RGBA8I,[p.RGB_INTEGER]:e.RGB8I,[p.RG_INTEGER]:e.RG8I,[p.RED_INTEGER]:e.R8I},[g.UNSIGNED_SHORT]:{[p.RGBA_INTEGER]:e.RGBA16UI,[p.RGB_INTEGER]:e.RGB16UI,[p.RG_INTEGER]:e.RG16UI,[p.RED_INTEGER]:e.R16UI,[p.DEPTH_COMPONENT]:e.DEPTH_COMPONENT16},[g.SHORT]:{[p.RGBA_INTEGER]:e.RGBA16I,[p.RGB_INTEGER]:e.RGB16I,[p.RG_INTEGER]:e.RG16I,[p.RED_INTEGER]:e.R16I},[g.UNSIGNED_INT]:{[p.RGBA_INTEGER]:e.RGBA32UI,[p.RGB_INTEGER]:e.RGB32UI,[p.RG_INTEGER]:e.RG32UI,[p.RED_INTEGER]:e.R32UI,[p.DEPTH_COMPONENT]:e.DEPTH_COMPONENT24},[g.INT]:{[p.RGBA_INTEGER]:e.RGBA32I,[p.RGB_INTEGER]:e.RGB32I,[p.RG_INTEGER]:e.RG32I,[p.RED_INTEGER]:e.R32I},[g.FLOAT]:{[p.RGBA]:e.RGBA32F,[p.RGB]:e.RGB32F,[p.RG]:e.RG32F,[p.RED]:e.R32F,[p.DEPTH_COMPONENT]:e.DEPTH_COMPONENT32F},[g.HALF_FLOAT]:{[p.RGBA]:e.RGBA16F,[p.RGB]:e.RGB16F,[p.RG]:e.RG16F,[p.RED]:e.R16F},[g.UNSIGNED_SHORT_5_6_5]:{[p.RGB]:e.RGB565},[g.UNSIGNED_SHORT_4_4_4_4]:{[p.RGBA]:e.RGBA4},[g.UNSIGNED_SHORT_5_5_5_1]:{[p.RGBA]:e.RGB5_A1},[g.UNSIGNED_INT_2_10_10_10_REV]:{[p.RGBA]:e.RGB10_A2,[p.RGBA_INTEGER]:e.RGB10_A2UI},[g.UNSIGNED_INT_10F_11F_11F_REV]:{[p.RGB]:e.R11F_G11F_B10F},[g.UNSIGNED_INT_5_9_9_9_REV]:{[p.RGB]:e.RGB9_E5},[g.UNSIGNED_INT_24_8]:{[p.DEPTH_STENCIL]:e.DEPTH24_STENCIL8},[g.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[p.DEPTH_STENCIL]:e.DEPTH32F_STENCIL8}}:{[g.UNSIGNED_BYTE]:{[p.RGBA]:e.RGBA,[p.RGB]:e.RGB,[p.ALPHA]:e.ALPHA,[p.LUMINANCE]:e.LUMINANCE,[p.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[g.UNSIGNED_SHORT_5_6_5]:{[p.RGB]:e.RGB},[g.UNSIGNED_SHORT_4_4_4_4]:{[p.RGBA]:e.RGBA},[g.UNSIGNED_SHORT_5_5_5_1]:{[p.RGBA]:e.RGBA}},t}wi.extension={type:$.RendererSystem,name:"textureGC"},K.add(wi);class Ai{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=g.UNSIGNED_BYTE,this.internalFormat=p.RGBA,this.samplerType=0}}class Ci{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Sr,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=Si(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let e=0;e<t;e++)this.boundTextures[e]=null;this.emptyTextures={};const r=new Ai(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Ai(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let t=0;t<6;t++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let e=0;e<this.boundTextures.length;e++)this.bind(null,e)}bind(e,t=0){const{gl:r}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const n=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(e.target,n.texture)),n.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),this.updateTexture(e)):n.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let e=0;e<r.length;e++)r[e]===this.unknownTexture&&this.bind(null,e)}for(let n=0;n<r.length;n++)r[n]===e&&(this.currentLocation!==n&&(t.activeTexture(t.TEXTURE0+n),this.currentLocation=n),t.bindTexture(e.target,this.emptyTextures[e.target].texture),r[n]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:r,CONTEXT_UID:n}=this;if(r)for(let r=e-1;r>=0;--r){const e=t[r];if(e){e._glTextures[n].samplerType!==y.FLOAT&&this.renderer.texture.unbind(e)}}}initTexture(e){const t=new Ai(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){t.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,2===this.webGLVersion&&e.type===g.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const r=this.renderer;if(this.initTextureType(e,t),e.resource?.upload(r,e,t))t.samplerType!==y.FLOAT&&(this.hasIntegerTextures=!0);else{const n=e.realWidth,i=e.realHeight,s=r.gl;(t.width!==n||t.height!==i||t.dirtyId<0)&&(t.width=n,t.height=i,s.texImage2D(e.target,0,t.internalFormat,n,i,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:r}=this;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const t=this.managedTextures.indexOf(e);-1!==t&&tr(this.managedTextures,t,1)}}updateTextureStyle(e){const t=e._glTextures[this.CONTEXT_UID];t&&(e.mipmap!==x.POW2&&2===this.webGLVersion||e.isPowerOfTwo?t.mipmap=e.mipmap>=1:t.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?t.wrapMode=e.wrapMode:t.wrapMode=_.CLAMP,e.resource?.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const r=this.gl;if(t.mipmap&&e.mipmap!==x.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===v.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const t=this.renderer.context.extensions.anisotropicFiltering;if(t&&e.anisotropicLevel>0&&e.scaleMode===v.LINEAR){const n=Math.min(e.anisotropicLevel,r.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,t.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===v.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===v.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}Ci.extension={type:$.RendererSystem,name:"texture"},K.add(Ci);const Ri=new _e;class Pi{constructor(e){this.renderer=e,this._tempMatrix=new he}generateTexture(e,t){const{region:r,...n}=t||{},i=r||e.getLocalBounds(null,!0);0===i.width&&(i.width=1),0===i.height&&(i.height=1);const s=jr.create({width:i.width,height:i.height,...n});this._tempMatrix.tx=-i.x,this._tempMatrix.ty=-i.y;const a=e.transform;return e.transform=Ri,this.renderer.render(e,{renderTexture:s,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=a,s}destroy(){}}Pi.extension={type:[$.RendererSystem,$.CanvasRendererSystem],name:"textureGenerator"},K.add(Pi);class Ii{constructor(){this.clearBeforeRender=!0,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,1],this._backgroundColorString="#000000",this.color=this._backgroundColor,this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender,e.color&&(this.color="string"==typeof e.color?zt(e.color):e.color),this.alpha=e.alpha}get color(){return this._backgroundColor}set color(e){this._backgroundColor=e,this._backgroundColorString=Gt(e),Ut(e,this._backgroundColorRgba)}get alpha(){return this._backgroundColorRgba[3]}set alpha(e){this._backgroundColorRgba[3]=e}get colorRgba(){return this._backgroundColorRgba}get colorString(){return this._backgroundColorString}destroy(){}}Ii.extension={type:[$.RendererSystem,$.CanvasRendererSystem],name:"background"},K.add(Ii);class Mi{constructor(e){this.renderer=e}init(e){this.screen=new ne(0,0,e.width,e.height),this.element=e.view||W.ADAPTER.createCanvas(),this.resolution=e.resolution||W.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const r=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=r,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",r,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}Mi.extension={type:[$.RendererSystem,$.CanvasRendererSystem],name:"_view"},K.add(Mi);class ki{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:()=>(Dt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract)},prepare:{enumerable:!1,get:()=>(Dt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare)},interaction:{enumerable:!1,get:()=>(Dt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events)}})}init(e){for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}ki.extension={type:[$.RendererSystem,$.CanvasRendererSystem],name:"_plugin"},K.add(ki);class Di extends(r(Ae)){constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter((t=>e.systems[t])),r=[...t,...Object.keys(e.systems).filter((e=>!t.includes(e)))];for(const t of r)this.addSystem(e.systems[t],t)}addRunners(...e){e.forEach((e=>{this.runners[e]=new xe(e)}))}addSystem(e,t){const r=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=r,this._systemsHash[t]=r;for(const e in this.runners)this.runners[e].add(r);return this}emitWithCustomOptions(e,t){const r=Object.keys(this._systemsHash);e.items.forEach((n=>{const i=r.find((e=>this._systemsHash[e]===n));n[e.name](t[i])}))}destroy(){Object.values(this.runners).forEach((e=>{e.destroy()})),this._systemsHash={}}}class Ni{constructor(e){this.renderer=e}run(e){const t=this.renderer;t.emitWithCustomOptions(t.runners.init,e),e.hello&&console.log(`PixiJS 7.0.5 - ${t.rendererLogId} - https://pixijs.com`),t.resize(this.renderer.screen.width,this.renderer.screen.height)}destroy(){}}Ni.extension={type:[$.RendererSystem,$.CanvasRendererSystem],name:"startup"},K.add(Ni);class Oi{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:r}=this,n=e._glTransformFeedbacks[r]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:r,renderer:n}=this;t&&n.shader.bind(t),r.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:r,CONTEXT_UID:n}=this,i=t.createTransformFeedback();e._glTransformFeedbacks[n]=i,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,i);for(let i=0;i<e.buffers.length;i++){const s=e.buffers[i];s&&(r.buffer.update(s),s._glBuffers[n].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,i,s._glBuffers[n].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),i}disposeTransformFeedback(e,t){const r=e._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this);const i=this.renderer.buffer;if(i)for(let r=0;r<e.buffers.length;r++){const n=e.buffers[r];if(!n)continue;const s=n._glBuffers[this.CONTEXT_UID];s&&(s.refCount--,0!==s.refCount||t||i.dispose(n,t))}r&&(t||n.deleteTransformFeedback(r),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Oi.extension={type:$.RendererSystem,name:"transformFeedback"},K.add(Oi);const Bi=[];function Li(e){for(const t of Bi)if(t.test(e))return new t(e);throw new Error("Unable to auto-detect a suitable renderer.")}K.handleByList($.Renderer,Bi);const Fi="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",Ui=class extends Di{constructor(e){super(),e=Object.assign({},W.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new nn({projectionMatrix:new he},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Ui.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(Dt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&"notMultiplied"!==e.useContextAlpha,e.backgroundAlpha=!1===e.useContextAlpha?1:e.backgroundAlpha);const r={hello:e.hello,_plugin:Ui.__plugins,background:{alpha:e.backgroundAlpha,color:e.background??e.backgroundColor,clearBeforeRender:e.clearBeforeRender},_view:{height:e.height,width:e.width,autoDensity:e.autoDensity,resolution:e.resolution,view:e.view},context:{antialias:e.antialias,context:e.context,powerPreference:e.powerPreference,premultipliedAlpha:e.premultipliedAlpha,preserveDrawingBuffer:e.preserveDrawingBuffer}};this.startup.run(r)}static test(e){return!e?.forceCanvas&&Lt()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Dt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Dt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Dt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Dt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){Dt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return Dt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.color}set backgroundAlpha(e){Dt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return Dt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};let Gi=Ui;Gi.extension={type:$.Renderer,priority:1},Gi.__plugins={},Gi.__systems={},K.handleByMap($.RendererPlugin,Gi.__plugins),K.handleByMap($.RendererSystem,Gi.__systems),K.add(Gi);class zi{constructor(){this.texArray=null,this.blend=0,this.type=f.TRIANGLES,this.start=0,this.size=0,this.data=null}}class Hi{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}class ji{constructor(e){"number"==typeof e?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}class Xi{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const t=new Int32Array(e);for(let r=0;r<e;r++)t[r]=r;this.defaultGroupCache[e]=nn.from({uSamplers:t},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${e}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Wn(this.vertexSrc,r)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new he,default:this.defaultGroupCache[e]};return new $n(this.programCache[e],t)}generateSampleSrc(e){let t="";t+="\n",t+="\n";for(let r=0;r<e;r++)r>0&&(t+="\nelse "),r<e-1&&(t+=`if(vTextureId < ${r}.5)`),t+="\n{",t+=`\n\tcolor = texture2D(uSamplers[${r}], vTextureCoord);`,t+="\n}";return t+="\n",t+="\n",t}}class Vi extends Jr{constructor(e=!1){super(),this._buffer=new $r(null,e,!1),this._indexBuffer=new $r(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,g.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,g.FLOAT).addAttribute("aColor",this._buffer,4,!0,g.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,g.FLOAT).addIndex(this._indexBuffer)}}const Wi=class extends hn{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=Vi,this.vertexSize=6,this.state=Yn.for2d(),this.size=4*W.SPRITE_BATCH_SIZE,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultVertexSrc(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"}static get defaultFragmentTemplate(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"}setShaderGenerator({vertex:e=Wi.defaultVertexSrc,fragment:t=Wi.defaultFragmentTemplate}={}){this.shaderGenerator=new Xi(e,t)}contextChange(){const e=this.renderer.gl;W.PREFER_ENV===u.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),W.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=zn(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=Wi,r=this.size/4,n=Math.floor(r/this.MAX_TEXTURES)+1;for(;e.length<r;)e.push(new zi);for(;t.length<n;)t.push(new Hi);for(let e=0;e<this.MAX_TEXTURES;e++)this._tempBoundTextures[e]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,MAX_TEXTURES:t}=this,r=Wi._textureArrayPool,n=this.renderer.batch,i=this._tempBoundTextures,s=this.renderer.textureGC.count;let a=++Sr._globalBatch,o=0,l=r[0],h=0;n.copyBoundTextures(i,t);for(let u=0;u<this._bufferSize;++u){const c=e[u];e[u]=null,c._batchEnabled!==a&&(l.count>=t&&(n.boundArray(l,i,a,t),this.buildDrawCalls(l,h,u),h=u,l=r[++o],++a),c._batchEnabled=a,c.touched=s,l.elements[l.count++]=c)}l.count>0&&(n.boundArray(l,i,a,t),this.buildDrawCalls(l,h,this._bufferSize),++o,++a);for(let e=0;e<i.length;e++)i[e]=null;Sr._globalBatch=a}buildDrawCalls(e,t,r){const{_bufferedElements:n,_attributeBuffer:i,_indexBuffer:s,vertexSize:a}=this,o=Wi._drawCallPool;let l=this._dcIndex,h=this._aIndex,u=this._iIndex,c=o[l];c.start=this._iIndex,c.texArray=e;for(let d=t;d<r;++d){const r=n[d],f=r._texture.baseTexture,p=jt[f.alphaMode?1:0][r.blendMode];n[d]=null,t<d&&c.blend!==p&&(c.size=u-c.start,t=d,c=o[++l],c.texArray=e,c.start=u),this.packInterleavedGeometry(r,i,s,h,u),h+=r.vertexData.length/2*a,u+=r.indices.length,c.blend=p}t<r&&(c.size=u-c.start,++l),this._dcIndex=l,this._aIndex=h,this._iIndex=u}bindAndClearTexArray(e){const t=this.renderer.texture;for(let r=0;r<e.count;r++)t.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:r}=this;W.CAN_UPLOAD_SAME_BUFFER?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:r}=this.renderer,n=Wi._drawCallPool;let i=null;for(let s=0;s<e;s++){const{texArray:e,type:a,size:o,start:l,blend:h}=n[s];i!==e&&(i=e,this.bindAndClearTexArray(e)),this.state.blendMode=h,r.set(this.state),t.drawElements(a,o,t.UNSIGNED_SHORT,2*l)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),W.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=Zt(Math.ceil(e/8)),r=er(t),n=8*t;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._aBuffers[n];return i||(this._aBuffers[n]=i=new ji(n*this.vertexSize*4)),i}getIndexBuffer(e){const t=Zt(Math.ceil(e/12)),r=er(t),n=12*t;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._iBuffers[r];return i||(this._iBuffers[r]=i=new Uint16Array(n)),i}packInterleavedGeometry(e,t,r,n,i){const{uint32View:s,float32View:a}=t,o=n/this.vertexSize,l=e.uvs,h=e.indices,u=e.vertexData,c=e._texture.baseTexture._batchLocation,d=Math.min(e.worldAlpha,1),f=d<1&&e._texture.baseTexture.alphaMode?Wt(e._tintRGB,d):e._tintRGB+(255*d<<24);for(let e=0;e<u.length;e+=2)a[n++]=u[e],a[n++]=u[e+1],a[n++]=l[e],a[n++]=l[e+1],s[n++]=f,a[n++]=c;for(let e=0;e<h.length;e++)r[i++]=o+h[e]}};let $i=Wi;$i.extension={name:"batch",type:$.RendererPlugin},$i._drawCallPool=[],$i._textureArrayPool=[],K.add($i);class Yi{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class qi{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:r}=this,n=e._glBuffers[r]||this.createGLBuffer(e);t.bindBuffer(e.type,n.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:r,CONTEXT_UID:n}=this;if(this.boundBufferBases[t]!==e){const i=e._glBuffers[n]||this.createGLBuffer(e);this.boundBufferBases[t]=e,r.bindBufferBase(r.UNIFORM_BUFFER,t,i.buffer)}}bindBufferRange(e,t,r){const{gl:n,CONTEXT_UID:i}=this;r=r||0;const s=e._glBuffers[i]||this.createGLBuffer(e);n.bindBufferRange(n.UNIFORM_BUFFER,t||0,s.buffer,256*r,256)}update(e){const{gl:t,CONTEXT_UID:r}=this,n=e._glBuffers[r]||this.createGLBuffer(e);if(e._updateID!==n.updateID)if(n.updateID=e._updateID,t.bindBuffer(e.type,n.buffer),n.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const r=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;n.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,r)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const r=e._glBuffers[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this),r&&(t||n.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let r=0;r<t.length;r++)this.dispose(this.managedBuffers[t[r]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:r}=this;return e._glBuffers[t]=new Yi(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}qi.extension={type:$.RendererSystem,name:"buffer"},K.add(qi);class Ki{constructor(e){this.renderer=e}contextChange(e){let t;if(1===this.renderer.context.webGLVersion){const r=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,r)}else{const r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}t>=A.HIGH?this.multisample=A.HIGH:t>=A.MEDIUM?this.multisample=A.MEDIUM:t>=A.LOW?this.multisample=A.LOW:this.multisample=A.NONE}destroy(){}}Ki.extension={type:$.RendererSystem,name:"_multisample"},K.add(Ki);class Qi{constructor(e){this.renderer=e}render(e,t){const r=this.renderer;let n,i,s,a;if(t&&(n=t.renderTexture,i=t.clear,s=t.transform,a=t.skipUpdateTransform),this.renderingToScreen=!n,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=s,!r.context.isLost){if(n||(this.lastObjectRendered=e),!a){const t=e.enableTempParent();e.updateTransform(),e.disableTempParent(t)}r.renderTexture.bind(n),r.batch.currentRenderer.start(),(i??r.background.clearBeforeRender)&&r.renderTexture.clear(),e.render(r),r.batch.currentRenderer.flush(),n&&(t.blit&&r.framebuffer.blit(),n.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Qi.extension={type:$.RendererSystem,name:"objectRenderer"},K.add(Qi);["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");class Zi extends qn{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(Fi,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",e),this.alpha=1}_loadMatrix(e,t=!1){let r=e;t&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(e,t,r){return e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4],e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9],e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14],e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}tint(e,t){const r=[(e>>16&255)/255,0,0,0,0,0,(e>>8&255)/255,0,0,0,0,0,(255&e)/255,0,0,0,0,0,1,0];this._loadMatrix(r,t)}greyscale(e,t){const r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}blackAndWhite(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)}hue(e,t){e=(e||0)/180*Math.PI;const r=Math.cos(e),n=Math.sin(e),i=1/3,s=(0,Math.sqrt)(i),a=[r+(1-r)*i,i*(1-r)-s*n,i*(1-r)+s*n,0,0,i*(1-r)+s*n,r+i*(1-r),i*(1-r)-s*n,0,0,i*(1-r)-s*n,i*(1-r)+s*n,r+i*(1-r),0,0,0,0,0,1,0];this._loadMatrix(a,t)}contrast(e,t){const r=(e||0)+1,n=-.5*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,t)}saturate(e=0,t){const r=2*e/3+1,n=-.5*(r-1),i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,t)}desaturate(){this.saturate(-1)}negative(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)}sepia(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)}technicolor(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)}polaroid(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)}toBGR(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)}kodachrome(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)}browni(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)}vintage(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)}colorTone(e,t,r,n,i){const s=((r=r||16770432)>>16&255)/255,a=(r>>8&255)/255,o=(255&r)/255,l=((n=n||3375104)>>16&255)/255,h=(n>>8&255)/255,u=(255&n)/255,c=[.3,.59,.11,0,0,s,a,o,e=e||.2,0,l,h,u,t=t||.15,0,s-l,a-h,o-u,0,0];this._loadMatrix(c,i)}night(e,t){const r=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}predator(e,t){const r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,t)}lsd(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)}reset(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}Zi.prototype.grayscale=Zi.prototype.greyscale;W.SORTABLE_CHILDREN=!1;class Ji{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?ne.EMPTY:((e=e||new ne(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:r,b:n,c:i,d:s,tx:a,ty:o}=e,l=r*t.x+i*t.y+a,h=n*t.x+s*t.y+o;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)}addQuad(e){let t=this.minX,r=this.minY,n=this.maxX,i=this.maxY,s=e[0],a=e[1];t=s<t?s:t,r=a<r?a:r,n=s>n?s:n,i=a>i?a:i,s=e[2],a=e[3],t=s<t?s:t,r=a<r?a:r,n=s>n?s:n,i=a>i?a:i,s=e[4],a=e[5],t=s<t?s:t,r=a<r?a:r,n=s>n?s:n,i=a>i?a:i,s=e[6],a=e[7],t=s<t?s:t,r=a<r?a:r,n=s>n?s:n,i=a>i?a:i,this.minX=t,this.minY=r,this.maxX=n,this.maxY=i}addFrame(e,t,r,n,i){this.addFrameMatrix(e.worldTransform,t,r,n,i)}addFrameMatrix(e,t,r,n,i){const s=e.a,a=e.b,o=e.c,l=e.d,h=e.tx,u=e.ty;let c=this.minX,d=this.minY,f=this.maxX,p=this.maxY,m=s*t+o*r+h,g=a*t+l*r+u;c=m<c?m:c,d=g<d?g:d,f=m>f?m:f,p=g>p?g:p,m=s*n+o*r+h,g=a*n+l*r+u,c=m<c?m:c,d=g<d?g:d,f=m>f?m:f,p=g>p?g:p,m=s*t+o*i+h,g=a*t+l*i+u,c=m<c?m:c,d=g<d?g:d,f=m>f?m:f,p=g>p?g:p,m=s*n+o*i+h,g=a*n+l*i+u,c=m<c?m:c,d=g<d?g:d,f=m>f?m:f,p=g>p?g:p,this.minX=c,this.minY=d,this.maxX=f,this.maxY=p}addVertexData(e,t,r){let n=this.minX,i=this.minY,s=this.maxX,a=this.maxY;for(let o=t;o<r;o+=2){const t=e[o],r=e[o+1];n=t<n?t:n,i=r<i?r:i,s=t>s?t:s,a=r>a?r:a}this.minX=n,this.minY=i,this.maxX=s,this.maxY=a}addVertices(e,t,r,n){this.addVerticesMatrix(e.worldTransform,t,r,n)}addVerticesMatrix(e,t,r,n,i=0,s=i){const a=e.a,o=e.b,l=e.c,h=e.d,u=e.tx,c=e.ty;let d=this.minX,f=this.minY,p=this.maxX,m=this.maxY;for(let e=r;e<n;e+=2){const r=t[e],n=t[e+1],g=a*r+l*n+u,y=h*n+o*r+c;d=Math.min(d,g-i),p=Math.max(p,g+i),f=Math.min(f,y-s),m=Math.max(m,y+s)}this.minX=d,this.minY=f,this.maxX=p,this.maxY=m}addBounds(e){const t=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>i?e.maxY:i}addBoundsMask(e,t){const r=e.minX>t.minX?e.minX:t.minX,n=e.minY>t.minY?e.minY:t.minY,i=e.maxX<t.maxX?e.maxX:t.maxX,s=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=i&&n<=s){const e=this.minX,t=this.minY,a=this.maxX,o=this.maxY;this.minX=r<e?r:e,this.minY=n<t?n:t,this.maxX=i>a?i:a,this.maxY=s>o?s:o}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const r=e.minX>t.x?e.minX:t.x,n=e.minY>t.y?e.minY:t.y,i=e.maxX<t.x+t.width?e.maxX:t.x+t.width,s=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=i&&n<=s){const e=this.minX,t=this.minY,a=this.maxX,o=this.maxY;this.minX=r<e?r:e,this.minY=n<t?n:t,this.maxX=i>a?i:a,this.maxY=s>o?s:o}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,r,n,i,s){e-=i,t-=s,r+=i,n+=s,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>n?this.maxY:n}}class es extends Se.EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new _e,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Ji,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let r=0;r<t.length;++r){const n=t[r];Object.defineProperty(es.prototype,n,Object.getOwnPropertyDescriptor(e,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new ne),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new ne),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Ji);const t=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,i=this._boundsID;this._bounds=this._localBounds;const s=this.getBounds(!1,e);return this.parent=r,this.transform=t,this._bounds=n,this._bounds.updateID+=this._boundsID-i,s}toGlobal(e,t,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,r,n){return t&&(e=t.toGlobal(e,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,t=0,r=1,n=1,i=0,s=0,a=0,o=0,l=0){return this.position.x=e,this.position.y=t,this.scale.x=r||1,this.scale.y=n||1,this.rotation=i,this.skew.x=s,this.skew.y=a,this.pivot.x=o,this.pivot.y=l,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new ts),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*Z}set angle(e){this.transform.rotation=e*J}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1))}if(this._mask=e,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(0===e._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class ts extends es{constructor(){super(...arguments),this.sortDirty=null}}es.prototype.displayObjectUpdateTransform=es.prototype.updateTransform;const rs=new he;function ns(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}class is extends es{constructor(){super(),this.children=[],this.sortableChildren=W.SORTABLE_CHILDREN,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const r=this.getChildIndex(e),n=this.getChildIndex(t);this.children[r]=t,this.children[n]=e,this.onChildrenChange(r<n?r:n)}getChildIndex(e){const t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(e);Se.removeItems(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],r=this.children.indexOf(t);if(-1===r)return null;t.parent=null,t.transform._parentID=-1,Se.removeItems(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Se.removeItems(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const r=e,n=t-r;let i;if(n>0&&n<=t){i=this.children.splice(r,n);for(let e=0;e<i.length;++e)i[e].parent=null,i[e].transform&&(i[e].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let e=0;e<i.length;++e)i[e].emit("removed",this),this.emit("childRemoved",i[e],this,e);return i}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,r=this.children.length;t<r;++t){const r=this.children[t];r._lastSortedIndex=t,e||0===r.zIndex||(e=!0)}e&&this.children.length>1&&this.children.sort(ns),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const t=this.children[e];t.visible&&t.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(t.visible&&t.renderable)if(t.calculateBounds(),t._mask){const e=t._mask.isMaskData?t._mask.maskObject:t._mask;e?(e.calculateBounds(),this._bounds.addBoundsMask(t._bounds,e._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const r=super.getLocalBounds(e);if(!t)for(let e=0,t=this.children.length;e<t;++e){const t=this.children[e];t.visible&&t.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let r,n;this.cullArea?(r=this.cullArea,n=this.worldTransform):this._render!==is.prototype._render&&(r=this.getBounds(!0));const i=e.projection.transform;if(i&&(n?(n=rs.copyFrom(n),n.prepend(i)):n=i),r&&t.intersects(r,n))this._render(e);else if(this.cullArea)return;for(let t=0,r=this.children.length;t<r;++t){const r=this.children[t],n=r.cullable;r.cullable=n||!this.cullArea,r.render(e),r.cullable=n}}render(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,r=this.children.length;t<r;++t)this.children[t].render(e)}}renderAdvanced(e){const t=this.filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let e=0;e<t.length;e++)t[e].enabled&&this._enabledFilters.push(t[e])}const n=t&&this._enabledFilters?.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==S.NONE));if(n&&e.batch.flush(),t&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,r=this.children.length;t<r;++t)this.children[t].render(e)}n&&e.batch.flush(),r&&e.mask.pop(this),t&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t="boolean"==typeof e?e:e?.children,r=this.removeChildren(0,this.children.length);if(t)for(let t=0;t<r.length;++t)r[t].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}is.prototype.containerUpdateTransform=is.prototype.updateTransform;const ss=new te,as=new Uint16Array([0,1,2,0,2,3]);class os extends is{constructor(e){super(),this._anchor=new le(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=d.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||Hr.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=as,this.pluginName="batch",this.isSprite=!0,this._roundPixels=W.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Se.sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Se.sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const t=this.transform.worldTransform,r=t.a,n=t.b,i=t.c,s=t.d,a=t.tx,o=t.ty,l=this.vertexData,h=e.trim,u=e.orig,c=this._anchor;let d=0,f=0,p=0,m=0;if(h?(f=h.x-c._x*u.width,d=f+h.width,m=h.y-c._y*u.height,p=m+h.height):(f=-c._x*u.width,d=f+u.width,m=-c._y*u.height,p=m+u.height),l[0]=r*f+i*m+a,l[1]=s*m+n*f+o,l[2]=r*d+i*m+a,l[3]=s*m+n*d+o,l[4]=r*d+i*p+a,l[5]=s*p+n*d+o,l[6]=r*f+i*p+a,l[7]=s*p+n*f+o,this._roundPixels){const e=W.RESOLUTION;for(let t=0;t<l.length;++t)l[t]=Math.round(l[t]*e)/e}}calculateTrimmedVertices(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,t=this.vertexTrimmedData,r=e.orig,n=this._anchor,i=this.transform.worldTransform,s=i.a,a=i.b,o=i.c,l=i.d,h=i.tx,u=i.ty,c=-n._x*r.width,d=c+r.width,f=-n._y*r.height,p=f+r.height;t[0]=s*c+o*f+h,t[1]=l*f+a*c+u,t[2]=s*d+o*f+h,t[3]=l*f+a*d+u,t[4]=s*d+o*p+h,t[5]=l*p+a*d+u,t[6]=s*c+o*p+h,t[7]=l*p+a*c+u}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new Ji),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ne),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,ss);const t=this._texture.orig.width,r=this._texture.orig.height,n=-t*this.anchor.x;let i=0;return ss.x>=n&&ss.x<n+t&&(i=-r*this.anchor.y,ss.y>=i&&ss.y<i+r)}destroy(e){super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;if("boolean"==typeof e?e:e?.texture){const t="boolean"==typeof e?e:e?.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){const r=e instanceof Hr?e:Hr.from(e,t);return new os(r)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const t=Se.sign(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const t=Se.sign(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tint}set tint(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||Hr.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const ls=new he;es.prototype._cacheAsBitmap=!1,es.prototype._cacheData=null,es.prototype._cacheAsBitmapResolution=null,es.prototype._cacheAsBitmapMultisample=null;class hs{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(es.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(e){if(this._cacheAsBitmap===e)return;let t;this._cacheAsBitmap=e,e?(this._cacheData||(this._cacheData=new hs),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}),es.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},es.prototype._initCachedDisplayObject=function(e){if(this._cacheData?.sprite)return;const t=this.alpha;this.alpha=1,e.batch.flush();const r=this.getLocalBounds(null,!0).clone();if(this.filters?.length){const e=this.filters[0].padding;r.pad(e)}r.ceil(W.RESOLUTION);const n=e.renderTexture.current,i=e.renderTexture.sourceFrame.clone(),s=e.renderTexture.destinationFrame.clone(),a=e.projection.transform,o=jr.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:this.cacheAsBitmapMultisample??e.multisample}),l=`cacheAsBitmap_${Se.uid()}`;this._cacheData.textureCacheId=l,Sr.addToCache(o.baseTexture,l),Hr.addToCache(o,l);const h=this.transform.localTransform.copyTo(ls).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:o,clear:!0,transform:h,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=a,e.renderTexture.bind(n,i,s),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const u=new os(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-r.x/r.width,u.anchor.y=-r.y/r.height,u.alpha=t,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=u.containsPoint.bind(u)},es.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},es.prototype._initCachedDisplayObjectCanvas=function(e){if(this._cacheData?.sprite)return;const t=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;const n=e.canvasContext.activeContext,i=e._projTransform;t.ceil(W.RESOLUTION);const s=jr.create({width:t.width,height:t.height}),a=`cacheAsBitmap_${Se.uid()}`;this._cacheData.textureCacheId=a,Sr.addToCache(s.baseTexture,a),Hr.addToCache(s,a);const o=ls;this.transform.localTransform.copyTo(o),o.invert(),o.tx-=t.x,o.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:s,clear:!0,transform:o,skipUpdateTransform:!1}),e.canvasContext.activeContext=n,e._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const l=new os(s);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-t.x/t.width,l.anchor.y=-t.y/t.height,l.alpha=r,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)},es.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},es.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},es.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Sr.removeFromCache(this._cacheData.textureCacheId),Hr.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},es.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},es.prototype.name=null,is.prototype.getChildByName=function(e,t){for(let t=0,r=this.children.length;t<r;t++)if(this.children[t].name===e)return this.children[t];if(t)for(let t=0,r=this.children.length;t<r;t++){const r=this.children[t];if(!r.getChildByName)continue;const n=r.getChildByName(e,!0);if(n)return n}return null},es.prototype.getGlobalPosition=function(e=new te,t=!1){return this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};class us{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=us.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new te,this.page=new te,this.AT_TARGET=1,this.BUBBLING_PHASE=2,this.CAPTURING_PHASE=3,this.NONE=0,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,r,n,i){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class cs extends us{constructor(){super(...arguments),this.client=new te,this.movement=new te,this.offset=new te,this.global=new te,this.screen=new te}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,r,n,i,s,a,o,l,h,u,c,d,f,p){throw new Error("Method not implemented.")}}class ds extends cs{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class fs extends cs{constructor(){super(...arguments),this.DOM_DELTA_LINE=0,this.DOM_DELTA_PAGE=1,this.DOM_DELTA_PIXEL=2}}const ps=new te,ms=new te;class gs{constructor(e){this.dispatch=new Se.EventEmitter,this.moveOnAll=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort(((e,t)=>e.priority-t.priority))}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let r=0,n=t.length;r<n;r++)t[r].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){const r=this.hitTestRecursive(this.rootTarget,this.rootTarget.interactive,ps.set(e,t),this.hitTestFn,this.hitPruneFn);return r&&r[0]}propagate(e,t){if(!e.target)return;const r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let n=0,i=r.length-1;n<i;n++)if(e.currentTarget=r[n],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!e.propagationStopped&&!e.propagationImmediatelyStopped){e.eventPhase=e.BUBBLING_PHASE;for(let n=r.length-2;n>=0;n--)if(e.currentTarget=r[n],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,r=this.rootTarget){e.eventPhase=e.BUBBLING_PHASE;const n=r.children;if(n)for(let r=0;r<n.length;r++)this.all(e,t,n[r]);e.currentTarget=r,this.notifyTarget(e,t)}propagationPath(e){const t=[e];for(let r=0;r<2048&&e!==this.rootTarget;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestRecursive(e,t,r,n,i){if(!e||!e.visible)return null;if(i(e,r))return null;if(e.interactiveChildren&&e.children){const s=e.children;for(let a=s.length-1;a>=0;a--){const o=s[a],l=this.hitTestRecursive(o,t||o.interactive,r,n,i);if(l){if(l.length>0&&!l[l.length-1].parent)continue;return(l.length>0||e.interactive)&&l.push(e),l}}}return t&&n(e,r)?e.interactive?[e]:[]:null}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,ms),!e.hitArea.contains(ms.x,ms.y)))return!0;if(e._mask){const r=e._mask.isMaskData?e._mask.maskObject:e._mask;if(r&&!r.containsPoint?.(t))return!0}return!1}hitTestFn(e,t){return!!e.hitArea||!!e.containsPoint&&e.containsPoint(t)}notifyTarget(e,t){t=t??e.type;const r=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,r),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof ds))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),"touch"===t.pointerType)this.dispatchEvent(t,"touchstart");else if("mouse"===t.pointerType||"pen"===t.pointerType){const e=2===t.button;this.dispatchEvent(t,e?"rightdown":"mousedown")}this.trackingData(e.pointerId).pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){if(!(e instanceof ds))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.createPointerEvent(e),r="mouse"===t.pointerType||"pen"===t.pointerType,n=this.trackingData(e.pointerId),i=this.findMountedTarget(n.overTargets);if(n.overTargets&&i!==t.target){const n="mousemove"===e.type?"mouseout":"pointerout",s=this.createPointerEvent(e,n,i);if(this.dispatchEvent(s,"pointerout"),r&&this.dispatchEvent(s,"mouseout"),!t.composedPath().includes(i)){const n=this.createPointerEvent(e,"pointerleave",i);for(n.eventPhase=n.AT_TARGET;n.target&&!t.composedPath().includes(n.target);)n.currentTarget=n.target,this.notifyTarget(n),r&&this.notifyTarget(n,"mouseleave"),n.target=n.target.parent;this.freeEvent(n)}this.freeEvent(s)}if(i!==t.target){const n="mousemove"===e.type?"mouseover":"pointerover",s=this.clonePointerEvent(t,n);this.dispatchEvent(s,"pointerover"),r&&this.dispatchEvent(s,"mouseover");let a=i?.parent;for(;a&&a!==this.rootTarget.parent&&a!==t.target;)a=a.parent;if(!a||a===this.rootTarget.parent){const e=this.clonePointerEvent(t,"pointerenter");for(e.eventPhase=e.AT_TARGET;e.target&&e.target!==i&&e.target!==this.rootTarget.parent;)e.currentTarget=e.target,this.notifyTarget(e),r&&this.notifyTarget(e,"mouseenter"),e.target=e.target.parent;this.freeEvent(e)}this.freeEvent(s)}const s=this.moveOnAll?"all":"dispatchEvent";this[s](t,"pointermove"),"touch"===t.pointerType&&this[s](t,"touchmove"),r&&(this[s](t,"mousemove"),this.cursor=t.target?.cursor),n.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){if(!(e instanceof ds))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId),r=this.createPointerEvent(e),n="mouse"===r.pointerType||"pen"===r.pointerType;this.dispatchEvent(r,"pointerover"),n&&this.dispatchEvent(r,"mouseover"),"mouse"===r.pointerType&&(this.cursor=r.target?.cursor);const i=this.clonePointerEvent(r,"pointerenter");for(i.eventPhase=i.AT_TARGET;i.target&&i.target!==this.rootTarget.parent;)i.currentTarget=i.target,this.notifyTarget(i),n&&this.notifyTarget(i,"mouseenter"),i.target=i.target.parent;t.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(i)}mapPointerOut(e){if(!(e instanceof ds))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId);if(t.overTargets){const r="mouse"===e.pointerType||"pen"===e.pointerType,n=this.findMountedTarget(t.overTargets),i=this.createPointerEvent(e,"pointerout",n);this.dispatchEvent(i),r&&this.dispatchEvent(i,"mouseout");const s=this.createPointerEvent(e,"pointerleave",n);for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),r&&this.notifyTarget(s,"mouseleave"),s.target=s.target.parent;t.overTargets=null,this.freeEvent(i),this.freeEvent(s)}this.cursor=null}mapPointerUp(e){if(!(e instanceof ds))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=performance.now(),r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerup"),"touch"===r.pointerType)this.dispatchEvent(r,"touchend");else if("mouse"===r.pointerType||"pen"===r.pointerType){const e=2===r.button;this.dispatchEvent(r,e?"rightup":"mouseup")}const n=this.trackingData(e.pointerId),i=this.findMountedTarget(n.pressTargetsByButton[e.button]);let s=i;if(i&&!r.composedPath().includes(i)){let t=i;for(;t&&!r.composedPath().includes(t);){if(r.currentTarget=t,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType)this.notifyTarget(r,"touchendoutside");else if("mouse"===r.pointerType||"pen"===r.pointerType){const e=2===r.button;this.notifyTarget(r,e?"rightupoutside":"mouseupoutside")}t=t.parent}delete n.pressTargetsByButton[e.button],s=t}if(s){const i=this.clonePointerEvent(r,"click");i.target=s,i.path=null,n.clicksByButton[e.button]||(n.clicksByButton[e.button]={clickCount:0,target:i.target,timeStamp:t});const a=n.clicksByButton[e.button];a.target===i.target&&t-a.timeStamp<200?++a.clickCount:a.clickCount=1,a.target=i.target,a.timeStamp=t,i.detail=a.clickCount,"mouse"===i.pointerType?this.dispatchEvent(i,"click"):"touch"===i.pointerType&&this.dispatchEvent(i,"tap"),this.dispatchEvent(i,"pointertap"),this.freeEvent(i)}this.freeEvent(r)}mapPointerUpOutside(e){if(!(e instanceof ds))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId),r=this.findMountedTarget(t.pressTargetsByButton[e.button]),n=this.createPointerEvent(e);if(r){let i=r;for(;i;)n.currentTarget=i,this.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType?this.notifyTarget(n,"touchendoutside"):"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.notifyTarget(n,2===n.button?"rightupoutside":"mouseupoutside"),i=i.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(n)}mapWheel(e){if(!(e instanceof fs))return void console.warn("EventBoundary cannot map a non-wheel event as a wheel event");const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let r=1;r<e.length&&e[r].parent===t;r++)t=e[r];return t}createPointerEvent(e,t,r){const n=this.allocateEvent(ds);return this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=r??this.hitTest(n.global.x,n.global.y),"string"==typeof t&&(n.type=t),n}createWheelEvent(e){const t=this.allocateEvent(fs);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const r=this.allocateEvent(ds);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=t??r.type,r}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof ds&&t instanceof ds&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof cs&&t instanceof cs&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){const r=e.currentTarget._events[t];if(r)if("fn"in r)r.fn.call(r.context,e);else for(let t=0,n=r.length;t<n&&!e.propagationImmediatelyStopped;t++)r[t].fn.call(r[t].context,e)}}const ys={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class vs{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new gs(null),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new ds(null),this.rootWheelEvent=new fs(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}init(){const{view:e,resolution:t}=this.renderer;this.setTargetElement(e),this.resolution=t}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const r=this.cursorStyles[e];if(r)switch(typeof r){case"string":t&&(this.domElement.style.cursor=r);break;case"function":r(e);break;case"object":t&&Object.assign(this.domElement.style,r)}else t&&"string"==typeof e&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}onPointerDown(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;const t=this.normalizeToPointerData(e);if(this.autoPreventDefault&&t[0].isNormalized){(e.cancelable||!("cancelable"in e))&&e.preventDefault()}for(let e=0,r=t.length;e<r;e++){const r=t[e],n=this.bootstrapEvent(this.rootPointerEvent,r);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;const t=this.normalizeToPointerData(e);for(let e=0,r=t.length;e<r;e++){const r=this.bootstrapEvent(this.rootPointerEvent,t[e]);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const r=t!==this.domElement?"outside":"",n=this.normalizeToPointerData(e);for(let e=0,t=n.length;e<t;e++){const t=this.bootstrapEvent(this.rootPointerEvent,n[e]);t.type+=r,this.rootBoundary.mapEvent(t)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;const t=this.normalizeToPointerData(e);for(let e=0,r=t.length;e<r;e++){const r=this.bootstrapEvent(this.rootPointerEvent,t[e]);this.rootBoundary.mapEvent(r)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,r){let n;n=this.domElement.parentElement?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const i=1/this.resolution;e.x=(t-n.left)*(this.domElement.width/n.width)*i,e.y=(r-n.top)*(this.domElement.height/n.height)*i}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let r=0,n=e.changedTouches.length;r<n;r++){const n=e.changedTouches[r];void 0===n.button&&(n.button=0),void 0===n.buttons&&(n.buttons=1),void 0===n.isPrimary&&(n.isPrimary=1===e.touches.length&&"touchstart"===e.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,n.type=e.type,t.push(n)}else if(globalThis.MouseEvent&&(!(e instanceof MouseEvent)||this.supportsPointerEvents&&e instanceof globalThis.PointerEvent))t.push(e);else{const r=e;void 0===r.isPrimary&&(r.isPrimary=!0),void 0===r.width&&(r.width=1),void 0===r.height&&(r.height=1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="mouse"),void 0===r.pointerId&&(r.pointerId=1),void 0===r.pressure&&(r.pressure=.5),void 0===r.twist&&(r.twist=0),void 0===r.tangentialPressure&&(r.tangentialPressure=0),r.isNormalized=!0,t.push(r)}return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=ys[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}}vs.extension={name:"events",type:[$.RendererSystem,$.CanvasRendererSystem]},K.add(vs);const _s={interactive:!1,interactiveChildren:!0,hitArea:null,addEventListener(e,t,r){const n="function"==typeof t?void 0:t;e="boolean"==typeof r&&r||"object"==typeof r&&r.capture?`${e}capture`:e,t="function"==typeof t?t:t.handleEvent,this.on(e,t,n)},removeEventListener(e,t,r){const n="function"==typeof t?void 0:t;e="boolean"==typeof r&&r||"object"==typeof r&&r.capture?`${e}capture`:e,t="function"==typeof t?t:t.handleEvent,this.off(e,t,n)},dispatchEvent(e){if(!(e instanceof us))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};es.mixin(_s),es.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});class xs{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Se.isMobile.tablet||Se.isMobile.phone)&&this.createTouchHook();const t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex=2..toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",(()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const t=e.children;if(t)for(let e=0;e<t.length;e++)this.updateAccessibleObjects(t[e])}update(){const e=performance.now();if(Se.isMobile.android.device&&e<this.androidUpdateCount)return;if(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen)return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:t,y:r,width:n,height:i}=this.renderer.view.getBoundingClientRect(),{width:s,height:a,resolution:o}=this.renderer,l=n/s*o,h=i/a*o;let u=this.div;u.style.left=`${t}px`,u.style.top=`${r}px`,u.style.width=`${s}px`,u.style.height=`${a}px`;for(let e=0;e<this.children.length;e++){const t=this.children[e];if(t.renderId!==this.renderId)t._accessibleActive=!1,Se.removeItems(this.children,e,1),this.div.removeChild(t._accessibleDiv),this.pool.push(t._accessibleDiv),t._accessibleDiv=null,e--;else{u=t._accessibleDiv;let e=t.hitArea;const r=t.worldTransform;t.hitArea?(u.style.left=(r.tx+e.x*r.a)*l+"px",u.style.top=(r.ty+e.y*r.d)*h+"px",u.style.width=e.width*r.a*l+"px",u.style.height=e.height*r.d*h+"px"):(e=t.getBounds(),this.capHitArea(e),u.style.left=e.x*l+"px",u.style.top=e.y*h+"px",u.style.width=e.width*l+"px",u.style.height=e.height*h+"px",u.title!==t.accessibleTitle&&null!==t.accessibleTitle&&(u.title=t.accessibleTitle),u.getAttribute("aria-label")!==t.accessibleHint&&null!==t.accessibleHint&&u.setAttribute("aria-label",t.accessibleHint)),t.accessibleTitle===u.title&&t.tabIndex===u.tabIndex||(u.title=t.accessibleTitle,u.tabIndex=t.tabIndex,this.debug&&this.updateDebugHTML(u))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:r}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>r&&(e.height=r-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleHint&&null!==e.accessibleHint||(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){const{displayObject:r}=e.target,n=this.renderer.events.rootBoundary,i=Object.assign(new us(n),{target:r});n.rootTarget=this.renderer.lastObjectRendered,t.forEach((e=>n.dispatchEvent(i,e)))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){9===e.keyCode&&this.activate()}_onMouseMove(e){0===e.movementX&&0===e.movementY||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}xs.extension={name:"accessibility",type:[$.RendererPlugin,$.CanvasRendererPlugin]},K.add(xs);const bs=class{constructor(e){this.stage=new is,e=Object.assign({forceCanvas:!1},e),this.renderer=Li(e),bs._plugins.forEach((t=>{t.init.call(this,e)}))}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(e,t){const r=bs._plugins.slice(0);r.reverse(),r.forEach((e=>{e.destroy.call(this)})),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};let Es=bs;Es._plugins=[],K.handleByList($.Application,Es._plugins);class Ts{static init(e){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame((()=>this.resize())))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let e,t;if(this.cancelResize(),this._resizeTo===globalThis.window)e=globalThis.innerWidth,t=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:n}=this._resizeTo;e=r,t=n}this.renderer.resize(e,t),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Ts.extension=$.Application,K.add(Ts);class ws{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach((e=>{this._assetList.push(e)})),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<t;r++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Ss(e,t){if(Array.isArray(t)){for(const r of t)if(e.startsWith(`data:${r}`))return!0;return!1}return e.startsWith(`data:${t}`)}function As(e,t){const r=e.split("?")[0],n=Se.path.extname(r).toLowerCase();return Array.isArray(t)?t.includes(n.toLowerCase()):n.toLowerCase()===t}const Cs=(e,t)=>(Array.isArray(e)||(e=[e]),t?e.map((e=>"string"==typeof e?t(e):e)):e);function Rs(e,t,r,n,i){const s=t[r];for(let a=0;a<s.length;a++){const o=s[a];r<t.length-1?Rs(e.replace(n[r],o),t,r+1,n,i):i.push(e.replace(n[r],o))}}function Ps(e){const t=e.match(/\{(.*?)\}/g),r=[];if(t){const n=[];t.forEach((e=>{const t=e.substring(1,e.length-1).split(",");n.push(t)})),Rs(e,n,0,t,r)}else r.push(e);return r}const Is=e=>!Array.isArray(e);const Ms=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const r=Cs(e);let n;for(let e=0;e<this.parsers.length;e++){const i=this.parsers[e];if(i.test(t)){n=i.getCacheableAssets(r,t);break}}n||(n={},r.forEach((e=>{n[e]=t})));const i=Object.keys(n),s={cacheKeys:i,keys:r};if(r.forEach((e=>{this._cacheMap.set(e,s)})),i.forEach((e=>{this._cache.has(e)&&this._cache.get(e)!==t&&console.warn("[Cache] already has key:",e),this._cache.set(e,n[e])})),t instanceof Hr){const e=t;r.forEach((t=>{e.baseTexture!==Hr.EMPTY.baseTexture&&Sr.addToCache(e.baseTexture,t),Hr.addToCache(e,t)}))}}remove(e){if(this._cacheMap.get(e),!this._cacheMap.has(e))return void console.warn(`[Assets] Asset id ${e} was not found in the Cache`);const t=this._cacheMap.get(e);t.cacheKeys.forEach((e=>{this._cache.delete(e)})),t.keys.forEach((e=>{this._cacheMap.delete(e)}))}get parsers(){return this._parsers}};class ks{constructor(){this._parsers=[],this.promiseCache={}}reset(){this.promiseCache={}}_getLoadPromiseAndParser(e,t){const r={promise:null,parser:null};return r.promise=(async()=>{let n=null;for(let i=0;i<this.parsers.length;i++){const s=this.parsers[i];if(s.load&&s.test?.(e,t,this)){n=await s.load(e,t,this),r.parser=s;break}}if(!r.parser)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has being added`),null;for(let e=0;e<this.parsers.length;e++){const i=this.parsers[e];i.parse&&i.parse&&await(i.testParse?.(n,t,this))&&(n=await i.parse(n,t,this)||n,r.parser=i)}return n})(),r}async load(e,t){let r=0;const n={},i=Is(e),s=Cs(e,(e=>({src:e}))),a=s.length,o=s.map((async e=>{const i=Se.path.toAbsolute(e.src);if(!n[e.src])try{this.promiseCache[i]||(this.promiseCache[i]=this._getLoadPromiseAndParser(i,e)),n[e.src]=await this.promiseCache[i].promise,t&&t(++r/a)}catch(t){throw delete this.promiseCache[i],delete n[e.src],new Error(`[Loader.load] Failed to load ${i}.\n${t}`)}}));return await Promise.all(o),i?n[s[0].src]:n}async unload(e){const t=Cs(e,(e=>({src:e}))).map((async e=>{const t=Se.path.toAbsolute(e.src),r=this.promiseCache[t];if(r){const n=await r.promise;r.parser?.unload?.(n,e,this),delete this.promiseCache[t]}}));await Promise.all(t)}get parsers(){return this._parsers}}class Ds{constructor(){this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}prefer(...e){e.forEach((e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))})),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this._preferredOrder=[],this._resolverHash={},this._assetMap={},this._rootPath=null,this._basePath=null,this._manifest=null}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach((e=>{this.addBundle(e.name,e.assets)}))}addBundle(e,t){const r=[];Array.isArray(t)?t.forEach((e=>{"string"==typeof e.name?r.push(e.name):r.push(...e.name),this.add(e.name,e.srcs)})):Object.keys(t).forEach((e=>{r.push(e),this.add(e,t[e])})),this._bundles[e]=r}add(e,t,r){const n=Cs(e);n.forEach((e=>{this._assetMap[e]&&console.warn(`[Resolver] already has key: ${e} overwriting`)})),Array.isArray(t)||(t="string"==typeof t?Ps(t):[t]);const i=t.map((e=>{let t=e;if("string"==typeof e){let r=!1;for(let n=0;n<this._parsers.length;n++){const i=this._parsers[n];if(i.test(e)){t=i.parse(e),r=!0;break}}r||(t={src:e})}return t.format||(t.format=t.src.split(".").pop()),t.alias||(t.alias=n),(this._basePath||this._rootPath)&&(t.src=Se.path.toAbsolute(t.src,this._basePath,this._rootPath)),t.data=t.data??r,t}));n.forEach((e=>{this._assetMap[e]=i}))}resolveBundle(e){const t=Is(e);e=Cs(e);const r={};return e.forEach((e=>{const t=this._bundles[e];t&&(r[e]=this.resolve(t))})),t?r[e[0]]:r}resolveUrl(e){const t=this.resolve(e);if("string"!=typeof e){const e={};for(const r in t)e[r]=t[r].src;return e}return t.src}resolve(e){const t=Is(e);e=Cs(e);const r={};return e.forEach((e=>{if(!this._resolverHash[e])if(this._assetMap[e]){let t=this._assetMap[e];const r=this._getPreferredOrder(t),n=t[0];r?.priority.forEach((e=>{r.params[e].forEach((r=>{const n=t.filter((t=>!!t[e]&&t[e]===r));n.length&&(t=n)}))})),this._resolverHash[e]=t[0]??n}else{let t=e;(this._basePath||this._rootPath)&&(t=Se.path.toAbsolute(t,this._basePath,this._rootPath)),this._resolverHash[e]={src:t}}r[e]=this._resolverHash[e]})),t?r[e[0]]:r}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const t=e[0],r=this._preferredOrder.find((e=>e.params.format.includes(t.format)));if(r)return r}return this._preferredOrder[0]}}const Ns=new class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Ds,this.loader=new ks,this.cache=Ms,this._backgroundLoader=new ws(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized)return void console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");if(this._initialized=!0,e.basePath&&(this.resolver.basePath=e.basePath),e.manifest){let t=e.manifest;"string"==typeof t&&(t=await this.load(t)),this.resolver.addManifest(t)}const t=e.texturePreference?.resolution??1,r="number"==typeof t?[t]:t;let n=[];if(e.texturePreference?.format){const t=e.texturePreference?.format;n="string"==typeof t?[t]:t;for(const e of this._detections)await e.test()||(n=await e.remove(n))}else for(const e of this._detections)await e.test()&&(n=await e.add(n));this.resolver.prefer({params:{format:n,resolution:r}})}add(e,t,r){this.resolver.add(e,t,r)}async load(e,t){this._initialized||await this.init();const r=Is(e),n=Cs(e).map((e=>"string"!=typeof e?(this.resolver.add(e.src,e),e.src):e)),i=this.resolver.resolve(n),s=await this._mapLoadToResolve(i,t);return r?s[n[0]]:s}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let r=!1;"string"==typeof e&&(r=!0,e=[e]);const n=this.resolver.resolveBundle(e),i={},s=Object.keys(n);let a=0,o=0;const l=()=>{t?.(++a/o)},h=s.map((e=>{const t=n[e];return o+=Object.keys(t).length,this._mapLoadToResolve(t,l).then((t=>{i[e]=t}))}));return await Promise.all(h),r?i[e[0]]:i}async backgroundLoad(e){this._initialized||await this.init(),"string"==typeof e&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),"string"==typeof e&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach((e=>{this._backgroundLoader.add(Object.values(e))}))}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if("string"==typeof e)return Ms.get(e);const t={};for(let r=0;r<e.length;r++)t[r]=Ms.get(e[r]);return t}async _mapLoadToResolve(e,t){const r=Object.values(e),n=Object.keys(e);this._backgroundLoader.active=!1;const i=await this.loader.load(r,t);this._backgroundLoader.active=!0;const s={};return r.forEach(((e,t)=>{const r=i[e.src],a=[e.src];e.alias&&a.push(...e.alias),s[n[t]]=r,Ms.set(a,r)})),s}async unload(e){this._initialized||await this.init();const t=Cs(e).map((e=>"string"!=typeof e?e.src:e)),r=this.resolver.resolve(t);await this._unloadFromResolved(r)}async unloadBundle(e){this._initialized||await this.init(),e=Cs(e);const t=this.resolver.resolveBundle(e),r=Object.keys(t).map((e=>this._unloadFromResolved(t[e])));await Promise.all(r)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach((e=>{Ms.remove(e.src)})),await this.loader.unload(t)}get detections(){return this._detections}};K.handleByList($.LoadParser,Ns.loader.parsers).handleByList($.ResolveParser,Ns.resolver.parsers).handleByList($.CacheParser,Ns.cache.parsers).handleByList($.DetectionParser,Ns.detections);const Os={loader:$.LoadParser,resolver:$.ResolveParser,cache:$.CacheParser,detection:$.DetectionParser};K.handle($.Asset,(e=>{const t=e.ref;Object.entries(Os).filter((([e])=>!!t[e])).forEach((([e,r])=>K.add(Object.assign(t[e],{extension:t[e].extension??r}))))}),(e=>{const t=e.ref;Object.keys(Os).filter((e=>!!t[e])).forEach((e=>K.remove(t[e])))}));const Bs={extension:$.CacheParser,test:e=>Array.isArray(e)&&e.every((e=>e instanceof Hr)),getCacheableAssets:(e,t)=>{const r={};return e.forEach((e=>{t.forEach(((t,n)=>{r[e+(0===n?"":n+1)]=t}))})),r}};K.add(Bs);var Ls=(e=>(e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e))(Ls||{});const Fs={extension:{type:$.LoadParser,priority:Ls.Low},test:e=>Se.path.extname(e).includes(".json"),async load(e){const t=await W.ADAPTER.fetch(e);return await t.json()}};K.add(Fs);const Us={extension:{type:$.LoadParser,priority:Ls.Low},test:e=>Se.path.extname(e).includes(".txt"),async load(e){const t=await W.ADAPTER.fetch(e);return await t.text()}};K.add(Us);const Gs=["normal","bold","100","200","300","400","500","600","700","800","900"],zs=[".ttf",".otf",".woff",".woff2"],Hs=["font/ttf","font/otf","font/woff","font/woff2"];const js={extension:{type:$.LoadParser,priority:Ls.Low},test:e=>Ss(e,Hs)||As(e,zs),async load(e,t){if(!globalThis.navigator.onLine)throw new Error("[loadWebFont] Cannot load font - navigator is offline");const r=W.ADAPTER.getFontFaceSet();if(r){const n=[],i=t.data?.family??function(e){const t=Se.path.extname(e);return Se.path.basename(e,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}(e),s=t.data?.weights?.filter((e=>Gs.includes(e)))??["normal"],a=t.data??{};for(let t=0;t<s.length;t++){const o=s[t],l=new FontFace(i,`url(${encodeURI(e)})`,{...a,weight:o});await l.load(),r.add(l),n.push(l)}return 1===n.length?n[0]:n}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(e){(Array.isArray(e)?e:[e]).forEach((e=>W.ADAPTER.getFontFaceSet().delete(e)))}};K.add(js);let Xs,Vs=0;const Ws={id:"checkImageBitmap",code:"\n    async function checkImageBitmap()\n    {\n        try\n        {\n            if (typeof createImageBitmap !== 'function') return false;\n\n            const response = await fetch('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=');\n            const imageBlob =  await response.blob();\n            const imageBitmap = await createImageBitmap(imageBlob);\n\n            return imageBitmap.width === 1 && imageBitmap.height === 1;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    }\n    checkImageBitmap().then((result) => { self.postMessage(result); });\n    "},$s={id:"loadImageBitmap",code:"\n    async function loadImageBitmap(url)\n    {\n        const response = await fetch(url);\n\n        if (!response.ok)\n        {\n            throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: `\n                + `${response.status} ${response.statusText}`);\n        }\n\n        const imageBlob =  await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n\n        return imageBitmap;\n    }\n    self.onmessage = async (event) =>\n    {\n        try\n        {\n            const imageBitmap = await loadImageBitmap(event.data.data[0]);\n\n            self.postMessage({\n                data: imageBitmap,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            }, [imageBitmap]);\n        }\n        catch(e)\n        {\n            self.postMessage({\n                error: e,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            });\n        }\n    };"};let Ys;const qs=new class{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise((e=>{const t=URL.createObjectURL(new Blob([Ws.code],{type:"application/javascript"})),r=new Worker(t);r.addEventListener("message",(n=>{r.terminate(),URL.revokeObjectURL(t),e(n.data)}))}))),this._isImageBitmapSupported}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){void 0===Xs&&(Xs=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<Xs&&(Ys||(Ys=URL.createObjectURL(new Blob([$s.code],{type:"application/javascript"}))),this._createdWorkers++,e=new Worker(Ys),e.addEventListener("message",(e=>{this.complete(e.data),this.returnWorker(e.target),this.next()}))),e}returnWorker(e){this.workerPool.push(e)}complete(e){void 0!==e.error?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const r=new Promise(((r,n)=>{this.queue.push({id:e,arguments:t,resolve:r,reject:n})}));return this.next(),r}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const t=this.queue.pop(),r=t.id;this.resolveHash[Vs]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:Vs++,id:r})}};function Ks(e,t,r){const n=new Hr(e);return n.baseTexture.on("dispose",(()=>{delete t.promiseCache[r]})),n}const Qs=[".jpeg",".jpg",".png",".webp",".avif"],Zs=["image/jpeg","image/png","image/webp","image/avif"];const Js={extension:{type:$.LoadParser,priority:Ls.High},config:{preferWorkers:!0},test:e=>Ss(e,Zs)||As(e,Qs),async load(e,t,r){let n=null;n=globalThis.createImageBitmap?this.config.preferWorkers&&await qs.isImageBitmapSupported()?await qs.loadImageBitmap(e):await async function(e){const t=await W.ADAPTER.fetch(e);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${e}: ${t.status} ${t.statusText}`);const r=await t.blob();return await createImageBitmap(r)}(e):await new Promise((t=>{n=new Image,n.crossOrigin="anonymous",n.src=e,n.complete?t(n):n.onload=()=>{t(n)}}));const i=new Sr(n,{resolution:Se.getResolutionOfUrl(e),...t.data});return i.resource.src=e,Ks(i,r,e)},unload(e){e.destroy(!0)}};K.add(Js);$.LoadParser,Ls.High;const ea={extension:$.ResolveParser,test:Js.test,parse:e=>({resolution:parseFloat(W.RETINA_PREFIX.exec(e)?.[1]??"1"),format:e.split(".").pop(),src:e})};K.add(ea);const ta={extension:{type:$.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e=await W.ADAPTER.fetch("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=").then((e=>e.blob()));return createImageBitmap(e).then((()=>!0),(()=>!1))},add:async e=>[...e,"avif"],remove:async e=>e.filter((e=>"avif"!==e))};K.add(ta);const ra={extension:{type:$.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e=await W.ADAPTER.fetch("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=").then((e=>e.blob()));return createImageBitmap(e).then((()=>!0),(()=>!1))},add:async e=>[...e,"webp"],remove:async e=>e.filter((e=>"webp"!==e))};K.add(ra);const na=["png","jpg","jpeg"],ia={extension:{type:$.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...na],remove:async e=>e.filter((e=>!na.includes(e)))};K.add(ia);var sa=(e=>(e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e))(sa||{});const aa={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};class oa extends Er{constructor(e,t={width:1,height:1,autoLoad:!0}){let r,n;"string"==typeof e?(r=e,n=new Uint8Array):(r=null,n=e),super(n,t),this.origin=r,this.buffer=n?new ji(n):null,this.origin&&!1!==t.autoLoad&&this.load(),n?.length&&(this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}async load(){const e=await fetch(this.origin),t=await e.blob(),r=await t.arrayBuffer();return this.data=new Uint32Array(r),this.buffer=new ji(r),this.loaded=!0,this.onBlobLoaded(r),this.update(),this}}class la extends oa{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=la._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||la._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,r){const n=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let e=0,t=this.levels;e<t;e++){const{levelID:t,levelWidth:r,levelHeight:i,levelBuffer:s}=this._levelBuffers[e];n.compressedTexImage2D(n.TEXTURE_2D,t,this.format,r,i,0,s)}return!0}onBlobLoaded(){this._levelBuffers=la._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(e,t,r,n,i,s,a){const o=new Array(r);let l=e.byteOffset,h=s,u=a,c=h+n-1&~(n-1),d=u+i-1&~(i-1),f=c*d*aa[t];for(let s=0;s<r;s++)o[s]={levelID:s,levelWidth:r>1?h:c,levelHeight:r>1?u:d,levelBuffer:new Uint8Array(e.buffer,l,f)},l+=f,h=h>>1||1,u=u>>1||1,c=h+n-1&~(n-1),d=u+i-1&~(i-1),f=c*d*aa[t];return o}}let ha,ua;function ca(){ua={s3tc:ha.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:ha.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:ha.getExtension("WEBGL_compressed_texture_etc"),etc1:ha.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:ha.getExtension("WEBGL_compressed_texture_pvrtc")||ha.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:ha.getExtension("WEBGL_compressed_texture_atc"),astc:ha.getExtension("WEBGL_compressed_texture_astc")}}const da={extension:{type:$.DetectionParser,priority:2},test:async()=>{const e=W.ADAPTER.createCanvas().getContext("webgl");return e?(ha=e,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async e=>{ua||ca();const t=[];for(const e in ua){ua[e]&&t.push(e)}return[...t,...e]},remove:async e=>(ua||ca(),e.filter((e=>!(e in ua))))};K.add(da);const fa=124,pa=3,ma=4,ga=7,ya=19,va=2,_a=0,xa=1,ba=2,Ea=3;const Ta={827611204:sa.COMPRESSED_RGBA_S3TC_DXT1_EXT,861165636:sa.COMPRESSED_RGBA_S3TC_DXT3_EXT,894720068:sa.COMPRESSED_RGBA_S3TC_DXT5_EXT},wa={70:sa.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:sa.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:sa.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:sa.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:sa.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:sa.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:sa.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:sa.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:sa.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function Sa(e){const t=new Uint32Array(e);if(542327876!==t[0])throw new Error("Invalid DDS file magic word");const r=new Uint32Array(e,0,fa/Uint32Array.BYTES_PER_ELEMENT),n=r[pa],i=r[ma],s=r[ga],a=new Uint32Array(e,ya*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),o=a[1];if(4&o){const r=a[va];if(808540228!==r){const t=Ta[r],a=new Uint8Array(e,128);return[new la(a,{format:t,width:i,height:n,levels:s})]}const o=128,l=new Uint32Array(t.buffer,o,20/Uint32Array.BYTES_PER_ELEMENT),h=l[_a],u=l[xa],c=l[ba],d=l[Ea],f=wa[h];if(void 0===f)throw new Error(`DDSParser cannot parse texture data with DXGI format ${h}`);if(4===c)throw new Error("DDSParser does not support cubemap textures");if(6===u)throw new Error("DDSParser does not supported 3D texture data");const p=new Array,m=148;if(1===d)p.push(new Uint8Array(e,m));else{const t=aa[f];let r=0,a=i,o=n;for(let e=0;e<s;e++){r+=Math.max(1,a+3&-4)*Math.max(1,o+3&-4)*t,a>>>=1,o>>>=1}let l=m;for(let t=0;t<d;t++)p.push(new Uint8Array(e,l,r)),l+=r}return p.map((e=>new la(e,{format:f,width:i,height:n,levels:s})))}if(64&o)throw new Error("DDSParser does not support uncompressed texture data.");if(512&o)throw new Error("DDSParser does not supported YUV uncompressed texture data.");if(131072&o)throw new Error("DDSParser does not support single-channel (lumninance) texture data!");if(2&o)throw new Error("DDSParser does not support single-channel (alpha) texture data!");throw new Error("DDSParser failed to load a texture file due to an unknown reason!")}const Aa=[171,75,84,88,32,49,49,187,13,10,26,10],Ca=12,Ra=16,Pa=24,Ia=28,Ma=36,ka=40,Da=44,Na=48,Oa=52,Ba=56,La=60,Fa={[g.UNSIGNED_BYTE]:1,[g.UNSIGNED_SHORT]:2,[g.INT]:4,[g.UNSIGNED_INT]:4,[g.FLOAT]:4,[g.HALF_FLOAT]:8},Ua={[p.RGBA]:4,[p.RGB]:3,[p.RG]:2,[p.RED]:1,[p.LUMINANCE]:1,[p.LUMINANCE_ALPHA]:2,[p.ALPHA]:1},Ga={[g.UNSIGNED_SHORT_4_4_4_4]:2,[g.UNSIGNED_SHORT_5_5_5_1]:2,[g.UNSIGNED_SHORT_5_6_5]:2};function za(e,t,r=!1){const n=new DataView(t);if(!function(e,t){for(let r=0;r<Aa.length;r++)if(t.getUint8(r)!==Aa[r])return console.error(`${e} is not a valid *.ktx file!`),!1;return!0}(e,n))return null;const i=67305985===n.getUint32(Ca,!0),s=n.getUint32(Ra,i),a=n.getUint32(Pa,i),o=n.getUint32(Ia,i),l=n.getUint32(Ma,i),h=n.getUint32(ka,i)||1,u=n.getUint32(Da,i)||1,c=n.getUint32(Na,i)||1,d=n.getUint32(Oa,i),f=n.getUint32(Ba,i),p=n.getUint32(La,i);if(0===h||1!==u)throw new Error("Only 2D textures are supported");if(1!==d)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==c)throw new Error("WebGL does not support array textures");const m=l+3&-4,y=h+3&-4,v=new Array(c);let _,x=l*h;if(0===s&&(x=m*y),_=0!==s?Fa[s]?Fa[s]*Ua[a]:Ga[s]:aa[o],void 0===_)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const b=r?function(e,t,r){const n=new Map;let i=0;for(;i<t;){const s=e.getUint32(64+i,r),a=64+i+4,o=3-(s+3)%4;if(0===s||s>t-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&0!==e.getUint8(a+l);l++);if(-1===l){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const h=(new TextDecoder).decode(new Uint8Array(e.buffer,a,l)),u=new DataView(e.buffer,a+l+1,s-l-1);n.set(h,u),i+=4+s+o}return n}(n,p,i):null;let E=x*_,T=l,w=h,S=m,A=y,C=64+p;for(let e=0;e<f;e++){const r=n.getUint32(C,i);let a=C+4;for(let r=0;r<c;r++){let n=v[r];n||(n=v[r]=new Array(f)),n[e]={levelID:e,levelWidth:f>1||0!==s?T:S,levelHeight:f>1||0!==s?w:A,levelBuffer:new Uint8Array(t,a,E)},a+=E}C+=r+4,C=C%4!=0?C+4-C%4:C,T=T>>1||1,w=w>>1||1,S=T+4-1&-4,A=w+4-1&-4,E=S*A*_}return 0!==s?{uncompressed:v.map((e=>{let t=e[0].levelBuffer,r=!1;return s===g.FLOAT?t=new Float32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4):s===g.UNSIGNED_INT?(r=!0,t=new Uint32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)):s===g.INT&&(r=!0,t=new Int32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)),{resource:new Er(t,{width:e[0].levelWidth,height:e[0].levelHeight}),type:s,format:r?Ha(a):a}})),kvData:b}:{compressed:v.map((e=>new la(null,{format:o,width:l,height:h,levels:f,levelBuffers:e}))),kvData:b}}function Ha(e){switch(e){case p.RGBA:return p.RGBA_INTEGER;case p.RGB:return p.RGB_INTEGER;case p.RG:return p.RG_INTEGER;case p.RED:return p.RED_INTEGER;default:return e}}const ja={extension:{type:$.LoadParser,priority:Ls.High},test:e=>As(e,".dds"),async load(e,t,r){const n=await W.ADAPTER.fetch(e),i=Sa(await n.arrayBuffer()).map((n=>Ks(new Sr(n,{mipmap:x.OFF,alphaMode:b.NO_PREMULTIPLIED_ALPHA,resolution:Se.getResolutionOfUrl(e),...t.data}),r,e)));return 1===i.length?i[0]:i},unload(e){Array.isArray(e)?e.forEach((e=>e.destroy(!0))):e.destroy(!0)}};K.add(ja);const Xa={extension:{type:$.LoadParser,priority:Ls.High},test:e=>As(e,".ktx"),async load(e,t,r){const n=await W.ADAPTER.fetch(e),i=await n.arrayBuffer(),{compressed:s,uncompressed:a,kvData:o}=za(e,i),l=s??a,h={mipmap:x.OFF,alphaMode:b.NO_PREMULTIPLIED_ALPHA,resolution:Se.getResolutionOfUrl(e),...t.data},u=l.map((t=>{l===a&&Object.assign(h,{type:t.type,format:t.format});const n=new Sr(t,h);return n.ktxKeyValueData=o,Ks(n,r,e)}));return 1===u.length?u[0]:u},unload(e){Array.isArray(e)?e.forEach((e=>e.destroy(!0))):e.destroy(!0)}};K.add(Xa);const Va={extension:$.ResolveParser,test:e=>{const t=e.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(t)},parse:e=>{if("ktx"===e.split("?")[0].split(".").pop()){const t=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(t.some((t=>e.endsWith(t))))return{resolution:parseFloat(W.RETINA_PREFIX.exec(e)?.[1]??"1"),format:t.find((t=>e.endsWith(t))),src:e}}return{resolution:parseFloat(W.RETINA_PREFIX.exec(e)?.[1]??"1"),format:e.split(".").pop(),src:e}}};K.add(Va);const Wa=new ne,$a=class{constructor(e){this.renderer=e}async image(e,t,r){const n=new Image;return n.src=await this.base64(e,t,r),n}async base64(e,t,r){const n=this.canvas(e);if(void 0!==n.toDataURL)return n.toDataURL(t,r);if(void 0!==n.convertToBlob){const e=await n.convertToBlob({type:t,quality:r});return await new Promise((t=>{const r=new FileReader;r.onload=()=>t(r.result),r.readAsDataURL(e)}))}throw new Error("Extract.base64() requires ICanvas.toDataURL or ICanvas.convertToBlob to be implemented")}canvas(e,t){const r=this.renderer;let n,i,s=!1,a=!1;e&&(e instanceof jr?i=e:(i=this.renderer.generateTexture(e),a=!0)),i?(n=i.baseTexture.resolution,t=t??i.frame,s=!1,r.renderTexture.bind(i)):(n=r.resolution,t||((t=Wa).width=r.width,t.height=r.height),s=!0,r.renderTexture.bind(null));const o=Math.round(t.width*n),l=Math.round(t.height*n);let h=new Se.CanvasRenderTarget(o,l,1);const u=new Uint8Array(4*o*l),c=r.gl;c.readPixels(Math.round(t.x*n),Math.round(t.y*n),o,l,c.RGBA,c.UNSIGNED_BYTE,u);const d=h.context.getImageData(0,0,o,l);if($a.arrayPostDivide(u,d.data),h.context.putImageData(d,0,0),s){const e=new Se.CanvasRenderTarget(h.width,h.height,1);e.context.scale(1,-1),e.context.drawImage(h.canvas,0,-l),h.destroy(),h=e}return a&&i.destroy(!0),h.canvas}pixels(e,t){const r=this.renderer;let n,i,s=!1;e&&(e instanceof jr?i=e:(i=this.renderer.generateTexture(e),s=!0)),i?(n=i.baseTexture.resolution,t=t??i.frame,r.renderTexture.bind(i)):(n=r.resolution,t||((t=Wa).width=r.width,t.height=r.height),r.renderTexture.bind(null));const a=Math.round(t.width*n),o=Math.round(t.height*n),l=new Uint8Array(4*a*o),h=r.gl;return h.readPixels(Math.round(t.x*n),Math.round(t.y*n),a,o,h.RGBA,h.UNSIGNED_BYTE,l),s&&i.destroy(!0),$a.arrayPostDivide(l,l),l}destroy(){this.renderer=null}static arrayPostDivide(e,t){for(let r=0;r<e.length;r+=4){const n=t[r+3]=e[r+3];0!==n?(t[r]=Math.round(Math.min(255*e[r]/n,255)),t[r+1]=Math.round(Math.min(255*e[r+1]/n,255)),t[r+2]=Math.round(Math.min(255*e[r+2]/n,255))):(t[r]=e[r],t[r+1]=e[r+1],t[r+2]=e[r+2])}}};let Ya=$a;Ya.extension={name:"extract",type:$.RendererSystem},K.add(Ya);var qa=(e=>(e.MITER="miter",e.BEVEL="bevel",e.ROUND="round",e))(qa||{}),Ka=(e=>(e.BUTT="butt",e.ROUND="round",e.SQUARE="square",e))(Ka||{});const Qa={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(e,t=20){if(!this.adaptive||!e||isNaN(e))return t;let r=Math.ceil(e/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}};class Za{constructor(){this.color=16777215,this.alpha=1,this.texture=Hr.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Za;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=Hr.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}function Ja(e,t=!1){const r=e.length;if(r<6)return;let n=0;for(let t=0,i=e[r-2],s=e[r-1];t<r;t+=2){const r=e[t],a=e[t+1];n+=(r-i)*(a+s),i=r,s=a}if(!t&&n>0||t&&n<=0){const t=r/2;for(let n=t+t%2;n<r;n+=2){const t=r-n-2,i=r-n-1,s=n,a=n+1;[e[t],e[s]]=[e[s],e[t]],[e[i],e[a]]=[e[a],e[i]]}}}const eo={build(e){e.points=e.shape.points.slice()},triangulate(e,t){let r=e.points;const n=e.holes,i=t.points,s=t.indices;if(r.length>=6){Ja(r,!1);const e=[];for(let t=0;t<n.length;t++){const i=n[t];Ja(i.points,!0),e.push(r.length/2),r=r.concat(i.points)}const t=Se.earcut(r,e,2);if(!t)return;const a=i.length/2;for(let e=0;e<t.length;e+=3)s.push(t[e]+a),s.push(t[e+1]+a),s.push(t[e+2]+a);for(let e=0;e<r.length;e++)i.push(r[e])}}},to={build(e){const t=e.points;let r,n,i,s,a,o;if(e.type===ee.CIRC){const t=e.shape;r=t.x,n=t.y,a=o=t.radius,i=s=0}else if(e.type===ee.ELIP){const t=e.shape;r=t.x,n=t.y,a=t.width,o=t.height,i=s=0}else{const t=e.shape,l=t.width/2,h=t.height/2;r=t.x+l,n=t.y+h,a=o=Math.max(0,Math.min(t.radius,Math.min(l,h))),i=l-a,s=h-o}if(!(a>=0&&o>=0&&i>=0&&s>=0))return void(t.length=0);const l=Math.ceil(2.3*Math.sqrt(a+o)),h=8*l+(i?4:0)+(s?4:0);if(t.length=h,0===h)return;if(0===l)return t.length=8,t[0]=t[6]=r+i,t[1]=t[3]=n+s,t[2]=t[4]=r-i,void(t[5]=t[7]=n-s);let u=0,c=4*l+(i?2:0)+2,d=c,f=h;{const e=i+a,o=s,l=r+e,h=r-e,p=n+o;if(t[u++]=l,t[u++]=p,t[--c]=p,t[--c]=h,s){const e=n-o;t[d++]=h,t[d++]=e,t[--f]=e,t[--f]=l}}for(let e=1;e<l;e++){const h=Math.PI/2*(e/l),p=i+Math.cos(h)*a,m=s+Math.sin(h)*o,g=r+p,y=r-p,v=n+m,_=n-m;t[u++]=g,t[u++]=v,t[--c]=v,t[--c]=y,t[d++]=y,t[d++]=_,t[--f]=_,t[--f]=g}{const e=s+o,a=r+i,l=r-i,h=n+e,c=n-e;t[u++]=a,t[u++]=h,t[--f]=c,t[--f]=a,i&&(t[u++]=l,t[u++]=h,t[--f]=c,t[--f]=l)}},triangulate(e,t){const r=e.points,n=t.points,i=t.indices;if(0===r.length)return;let s=n.length/2;const a=s;let o,l;if(e.type!==ee.RREC){const t=e.shape;o=t.x,l=t.y}else{const t=e.shape;o=t.x+t.width/2,l=t.y+t.height/2}const h=e.matrix;n.push(e.matrix?h.a*o+h.c*l+h.tx:o,e.matrix?h.b*o+h.d*l+h.ty:l),s++,n.push(r[0],r[1]);for(let e=2;e<r.length;e+=2)n.push(r[e],r[e+1]),i.push(s++,a,s);i.push(a+1,a,s)}},ro={build(e){const t=e.shape,r=t.x,n=t.y,i=t.width,s=t.height,a=e.points;a.length=0,i>=0&&s>=0&&a.push(r,n,r+i,n,r+i,n+s,r,n+s)},triangulate(e,t){const r=e.points,n=t.points;if(0===r.length)return;const i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},no={build(e){to.build(e)},triangulate(e,t){to.triangulate(e,t)}};function io(e,t,r,n,i,s,a,o){let l,h;a?(l=n,h=-r):(l=-n,h=r);const u=e-r*i+l,c=t-n*i+h,d=e+r*s+l,f=t+n*s+h;return o.push(u,c),o.push(d,f),2}function so(e,t,r,n,i,s,a,o){const l=r-e,h=n-t;let u=Math.atan2(l,h),c=Math.atan2(i-e,s-t);o&&u<c?u+=2*Math.PI:!o&&u>c&&(c+=2*Math.PI);let d=u;const f=c-u,p=Math.abs(f),m=Math.sqrt(l*l+h*h),g=1+(15*p*Math.sqrt(m)/Math.PI>>0),y=f/g;if(d+=y,o){a.push(e,t),a.push(r,n);for(let r=1,n=d;r<g;r++,n+=y)a.push(e,t),a.push(e+Math.sin(n)*m,t+Math.cos(n)*m);a.push(e,t),a.push(i,s)}else{a.push(r,n),a.push(e,t);for(let r=1,n=d;r<g;r++,n+=y)a.push(e+Math.sin(n)*m,t+Math.cos(n)*m),a.push(e,t);a.push(i,s),a.push(e,t)}return 2*g}function ao(e,t){e.lineStyle.native?function(e,t){let r=0;const n=e.shape,i=e.points||n.points,s=n.type!==ee.POLY||n.closeStroke;if(0===i.length)return;const a=t.points,o=t.indices,l=i.length/2,h=a.length/2;let u=h;for(a.push(i[0],i[1]),r=1;r<l;r++)a.push(i[2*r],i[2*r+1]),o.push(u,u+1),u++;s&&o.push(u,h)}(e,t):function(e,t){const r=e.shape;let n=e.points||r.points.slice();const i=t.closePointEps;if(0===n.length)return;const s=e.lineStyle,a=new te(n[0],n[1]),o=new te(n[n.length-2],n[n.length-1]),l=r.type!==ee.POLY||r.closeStroke,h=Math.abs(a.x-o.x)<i&&Math.abs(a.y-o.y)<i;if(l){n=n.slice(),h&&(n.pop(),n.pop(),o.set(n[n.length-2],n[n.length-1]));const e=.5*(a.x+o.x),t=.5*(o.y+a.y);n.unshift(e,t),n.push(e,t)}const u=t.points,c=n.length/2;let d=n.length;const f=u.length/2,p=s.width/2,m=p*p,g=s.miterLimit*s.miterLimit;let y=n[0],v=n[1],_=n[2],x=n[3],b=0,E=0,T=-(v-x),w=y-_,S=0,A=0,C=Math.sqrt(T*T+w*w);T/=C,w/=C,T*=p,w*=p;const R=s.alignment,P=2*(1-R),I=2*R;l||(s.cap===Ka.ROUND?d+=so(y-T*(P-I)*.5,v-w*(P-I)*.5,y-T*P,v-w*P,y+T*I,v+w*I,u,!0)+2:s.cap===Ka.SQUARE&&(d+=io(y,v,T,w,P,I,!0,u))),u.push(y-T*P,v-w*P),u.push(y+T*I,v+w*I);for(let e=1;e<c-1;++e){y=n[2*(e-1)],v=n[2*(e-1)+1],_=n[2*e],x=n[2*e+1],b=n[2*(e+1)],E=n[2*(e+1)+1],T=-(v-x),w=y-_,C=Math.sqrt(T*T+w*w),T/=C,w/=C,T*=p,w*=p,S=-(x-E),A=_-b,C=Math.sqrt(S*S+A*A),S/=C,A/=C,S*=p,A*=p;const t=_-y,r=v-x,i=_-b,a=E-x,o=t*i+r*a,l=r*i-a*t,h=l<0;if(Math.abs(l)<.001*Math.abs(o)){u.push(_-T*P,x-w*P),u.push(_+T*I,x+w*I),o>=0&&(s.join===qa.ROUND?d+=so(_,x,_-T*P,x-w*P,_-S*P,x-A*P,u,!1)+4:d+=2,u.push(_-S*I,x-A*I),u.push(_+S*P,x+A*P));continue}const c=(-T+y)*(-w+x)-(-T+_)*(-w+v),f=(-S+b)*(-A+x)-(-S+_)*(-A+E),R=(t*f-i*c)/l,M=(a*c-r*f)/l,k=(R-_)*(R-_)+(M-x)*(M-x),D=_+(R-_)*P,N=x+(M-x)*P,O=_-(R-_)*I,B=x-(M-x)*I,L=h?P:I;k<=Math.min(t*t+r*r,i*i+a*a)+L*L*m?s.join===qa.BEVEL||k/m>g?(h?(u.push(D,N),u.push(_+T*I,x+w*I),u.push(D,N),u.push(_+S*I,x+A*I)):(u.push(_-T*P,x-w*P),u.push(O,B),u.push(_-S*P,x-A*P),u.push(O,B)),d+=2):s.join===qa.ROUND?h?(u.push(D,N),u.push(_+T*I,x+w*I),d+=so(_,x,_+T*I,x+w*I,_+S*I,x+A*I,u,!0)+4,u.push(D,N),u.push(_+S*I,x+A*I)):(u.push(_-T*P,x-w*P),u.push(O,B),d+=so(_,x,_-T*P,x-w*P,_-S*P,x-A*P,u,!1)+4,u.push(_-S*P,x-A*P),u.push(O,B)):(u.push(D,N),u.push(O,B)):(u.push(_-T*P,x-w*P),u.push(_+T*I,x+w*I),s.join===qa.ROUND?d+=h?so(_,x,_+T*I,x+w*I,_+S*I,x+A*I,u,!0)+2:so(_,x,_-T*P,x-w*P,_-S*P,x-A*P,u,!1)+2:s.join===qa.MITER&&k/m<=g&&(h?(u.push(O,B),u.push(O,B)):(u.push(D,N),u.push(D,N)),d+=2),u.push(_-S*P,x-A*P),u.push(_+S*I,x+A*I),d+=2)}y=n[2*(c-2)],v=n[2*(c-2)+1],_=n[2*(c-1)],x=n[2*(c-1)+1],T=-(v-x),w=y-_,C=Math.sqrt(T*T+w*w),T/=C,w/=C,T*=p,w*=p,u.push(_-T*P,x-w*P),u.push(_+T*I,x+w*I),l||(s.cap===Ka.ROUND?d+=so(_-T*(P-I)*.5,x-w*(P-I)*.5,_-T*P,x-w*P,_+T*I,x+w*I,u,!1)+2:s.cap===Ka.SQUARE&&(d+=io(_,x,T,w,P,I,!1,u)));const M=t.indices,k=Qa.epsilon*Qa.epsilon;for(let e=f;e<d+f-2;++e)y=u[2*e],v=u[2*e+1],_=u[2*(e+1)],x=u[2*(e+1)+1],b=u[2*(e+2)],E=u[2*(e+2)+1],Math.abs(y*(x-E)+_*(E-v)+b*(v-x))<k||M.push(e,e+1,e+2)}(e,t)}class oo{static curveTo(e,t,r,n,i,s){const a=s[s.length-2],o=s[s.length-1]-t,l=a-e,h=n-t,u=r-e,c=Math.abs(o*u-l*h);if(c<1e-8||0===i)return s[s.length-2]===e&&s[s.length-1]===t||s.push(e,t),null;const d=o*o+l*l,f=h*h+u*u,p=o*h+l*u,m=i*Math.sqrt(d)/c,g=i*Math.sqrt(f)/c,y=m*p/d,v=g*p/f,_=m*u+g*l,x=m*h+g*o,b=l*(g+y),E=o*(g+y),T=u*(m+v),w=h*(m+v);return{cx:_+e,cy:x+t,radius:i,startAngle:Math.atan2(E-x,b-_),endAngle:Math.atan2(w-x,T-_),anticlockwise:l*h>u*o}}static arc(e,t,r,n,i,s,a,o,l){const h=a-s,u=Qa._segmentsCount(Math.abs(h)*i,40*Math.ceil(Math.abs(h)/Q)),c=h/(2*u),d=2*c,f=Math.cos(c),p=Math.sin(c),m=u-1,g=m%1/m;for(let e=0;e<=m;++e){const t=c+s+d*(e+g*e),a=Math.cos(t),o=-Math.sin(t);l.push((f*a+p*o)*i+r,(f*-o+p*a)*i+n)}}}class lo{static curveLength(e,t,r,n,i,s,a,o){let l=0,h=0,u=0,c=0,d=0,f=0,p=0,m=0,g=0,y=0,v=0,_=e,x=t;for(let b=1;b<=10;++b)h=b/10,u=h*h,c=u*h,d=1-h,f=d*d,p=f*d,m=p*e+3*f*h*r+3*d*u*i+c*a,g=p*t+3*f*h*n+3*d*u*s+c*o,y=_-m,v=x-g,_=m,x=g,l+=Math.sqrt(y*y+v*v);return l}static curveTo(e,t,r,n,i,s,a){const o=a[a.length-2],l=a[a.length-1];a.length-=2;const h=Qa._segmentsCount(lo.curveLength(o,l,e,t,r,n,i,s));let u=0,c=0,d=0,f=0,p=0;a.push(o,l);for(let m=1,g=0;m<=h;++m)g=m/h,u=1-g,c=u*u,d=c*u,f=g*g,p=f*g,a.push(d*o+3*c*g*e+3*u*f*r+p*i,d*l+3*c*g*t+3*u*f*n+p*s)}}class ho{static curveLength(e,t,r,n,i,s){const a=e-2*r+i,o=t-2*n+s,l=2*r-2*e,h=2*n-2*t,u=4*(a*a+o*o),c=4*(a*l+o*h),d=l*l+h*h,f=2*Math.sqrt(u+c+d),p=Math.sqrt(u),m=2*u*p,g=2*Math.sqrt(d),y=c/p;return(m*f+p*c*(f-g)+(4*d*u-c*c)*Math.log((2*p+y+f)/(y+g)))/(4*m)}static curveTo(e,t,r,n,i){const s=i[i.length-2],a=i[i.length-1],o=Qa._segmentsCount(ho.curveLength(s,a,e,t,r,n));let l=0,h=0;for(let u=1;u<=o;++u){const c=u/o;l=s+(e-s)*c,h=a+(t-a)*c,i.push(l+(e+(r-e)*c-l)*c,h+(t+(n-t)*c-h)*c)}}}class uo{constructor(){this.reset()}begin(e,t,r){this.reset(),this.style=e,this.start=t,this.attribStart=r}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}const co={[ee.POLY]:eo,[ee.CIRC]:to,[ee.ELIP]:to,[ee.RECT]:ro,[ee.RREC]:no},fo=[],po=[];class mo{constructor(e,t=null,r=null,n=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=t,this.matrix=n,this.type=e.type}clone(){return new mo(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const go=new te,yo=class extends Vi{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Ji,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),po.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),fo.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,r=null,n=null){const i=new mo(e,t,r,n);return this.graphicsData.push(i),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const r=new mo(e,null,null,t),n=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=n.lineStyle,n.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let r=0;r<t.length;++r){const n=t[r];if(n.fillStyle.visible&&(n.shape&&(n.matrix?n.matrix.applyInverse(e,go):go.copyFrom(e),n.shape.contains(go.x,go.y)))){let e=!1;if(n.holes)for(let t=0;t<n.holes.length;t++){if(n.holes[t].shape.contains(go.x,go.y)){e=!0;break}}if(!e)return!0}}return!1}updateBatches(){if(!this.graphicsData.length)return void(this.batchable=!0);if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let r=null,n=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],n=r.style);for(let i=this.shapeIndex;i<t.length;i++){this.shapeIndex++;const s=t[i],a=s.fillStyle,o=s.lineStyle;co[s.type].build(s),s.matrix&&this.transformPoints(s.points,s.matrix),(a.visible||o.visible)&&this.processHoles(s.holes);for(let t=0;t<2;t++){const i=0===t?a:o;if(!i.visible)continue;const l=i.texture.baseTexture,h=this.indices.length,u=this.points.length/2;l.wrapMode=_.REPEAT,0===t?this.processFill(s):this.processLine(s);const c=this.points.length/2-u;0!==c&&(r&&!this._compareStyles(n,i)&&(r.end(h,u),r=null),r||(r=fo.pop()||new uo,r.begin(i,h,u),this.batches.push(r),n=i),this.addUvs(this.points,e,i.texture,u,c,i.matrix))}}const i=this.indices.length,s=this.points.length/2;if(r&&r.end(i,s),0===this.batches.length)return void(this.batchable=!0);const a=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t)&&(e.texture.baseTexture===t.texture.baseTexture&&(e.color+e.alpha===t.color+t.alpha&&!!e.native==!!t.native))}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const t=this.graphicsData[e],r=t.fillStyle,n=t.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(n&&!n.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,r=e.length;t<r;t++){const r=e[t];for(let e=0;e<r.size;e++){const t=r.start+e;this.indicesUint16[t]=this.indicesUint16[t]-r.attribStart}}}isBatchable(){if(this.points.length>131070)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<2*yo.BATCHABLE_SIZE}buildDrawCalls(){let e=++Sr._globalBatch;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),po.push(this.drawCalls[e]);this.drawCalls.length=0;const t=this.colors,r=this.textureIds;let n=po.pop();n||(n=new zi,n.texArray=new Hi),n.texArray.count=0,n.start=0,n.size=0,n.type=f.TRIANGLES;let i=0,s=null,a=0,o=!1,l=f.TRIANGLES,h=0;this.drawCalls.push(n);for(let u=0;u<this.batches.length;u++){const c=this.batches[u],d=8,p=c.style,m=p.texture.baseTexture;o!==!!p.native&&(o=!!p.native,l=o?f.LINES:f.TRIANGLES,s=null,i=d,e++),s!==m&&(s=m,m._batchEnabled!==e&&(i===d&&(e++,i=0,n.size>0&&(n=po.pop(),n||(n=new zi,n.texArray=new Hi),this.drawCalls.push(n)),n.start=h,n.size=0,n.texArray.count=0,n.type=l),m.touched=1,m._batchEnabled=e,m._batchLocation=i,m.wrapMode=_.REPEAT,n.texArray.elements[n.texArray.count++]=m,i++)),n.size+=c.size,h+=c.size,a=m._batchLocation,this.addColors(t,p.color,p.alpha,c.attribSize,c.attribStart),this.addTextureIds(r,a,c.attribSize,c.attribStart)}Sr._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,r=this.colors,n=this.textureIds,i=new ArrayBuffer(12*e.length),s=new Float32Array(i),a=new Uint32Array(i);let o=0;for(let i=0;i<e.length/2;i++)s[o++]=e[2*i],s[o++]=e[2*i+1],s[o++]=t[2*i],s[o++]=t[2*i+1],a[o++]=r[i],s[o++]=n[i];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)}processFill(e){if(e.holes.length)eo.triangulate(e,this);else{co[e.type].triangulate(e,this)}}processLine(e){ao(e,this);for(let t=0;t<e.holes.length;t++)ao(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const r=e[t];co[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let r=0;r<e.length/2;r++){const n=e[2*r],i=e[2*r+1];e[2*r]=t.a*n+t.c*i+t.tx,e[2*r+1]=t.b*n+t.d*i+t.ty}}addColors(e,t,r,n,i=0){const s=Se.premultiplyTint((t>>16)+(65280&t)+((255&t)<<16),r);e.length=Math.max(e.length,i+n);for(let t=0;t<n;t++)e[i+t]=s}addTextureIds(e,t,r,n=0){e.length=Math.max(e.length,n+r);for(let i=0;i<r;i++)e[n+i]=t}addUvs(e,t,r,n,i,s=null){let a=0;const o=t.length,l=r.frame;for(;a<i;){let r=e[2*(n+a)],i=e[2*(n+a)+1];if(s){const e=s.a*r+s.c*i+s.tx;i=s.b*r+s.d*i+s.ty,r=e}a++,t.push(r/l.width,i/l.height)}const h=r.baseTexture;(l.width<h.width||l.height<h.height)&&this.adjustUvs(t,r,o,i)}adjustUvs(e,t,r,n){const i=t.baseTexture,s=1e-6,a=r+2*n,o=t.frame,l=o.width/i.width,h=o.height/i.height;let u=o.x/o.width,c=o.y/o.height,d=Math.floor(e[r]+s),f=Math.floor(e[r+1]+s);for(let t=r+2;t<a;t+=2)d=Math.min(d,Math.floor(e[t]+s)),f=Math.min(f,Math.floor(e[t+1]+s));u-=d,c-=f;for(let t=r;t<a;t+=2)e[t]=(e[t]+u)*l,e[t+1]=(e[t+1]+c)*h}};let vo=yo;vo.BATCHABLE_SIZE=100;class _o extends Za{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Ka.BUTT,this.join=qa.MITER,this.miterLimit=10}clone(){const e=new _o;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const xo=new Float32Array(3),bo={},Eo=class extends is{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Za,this._lineStyle=new _o,this._matrix=null,this._holeMode=!1,this.state=Yn.for2d(),this._geometry=e||new vo,this._geometry.refCount++,this._transformID=-1,this.tint=16777215,this.blendMode=d.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Eo(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tint}set tint(e){this._tint=e}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,r=1,n=.5,i=!1){return"number"==typeof e&&(e={width:e,color:t,alpha:r,alignment:n,native:i}),this.lineTextureStyle(e)}lineTextureStyle(e){e=Object.assign({width:0,texture:Hr.WHITE,color:e?.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Ka.BUTT,join:qa.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();const t=e.width>0&&e.alpha>0;return t?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:t},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new ae,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new ae,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,n=r[r.length-2],i=r[r.length-1];return n===e&&i===t||r.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,r,n){this._initCurve();const i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),ho.curveTo(e,t,r,n,i),this}bezierCurveTo(e,t,r,n,i,s){return this._initCurve(),lo.curveTo(e,t,r,n,i,s,this.currentPath.points),this}arcTo(e,t,r,n,i){this._initCurve(e,t);const s=this.currentPath.points,a=oo.curveTo(e,t,r,n,i,s);if(a){const{cx:e,cy:t,radius:r,startAngle:n,endAngle:i,anticlockwise:s}=a;this.arc(e,t,r,n,i,s)}return this}arc(e,t,r,n,i,s=!1){if(n===i)return this;!s&&i<=n?i+=Q:s&&n<=i&&(n+=Q);if(0===i-n)return this;const a=e+Math.cos(n)*r,o=t+Math.sin(n)*r,l=this._geometry.closePointEps;let h=this.currentPath?this.currentPath.points:null;if(h){const e=Math.abs(h[h.length-2]-a),t=Math.abs(h[h.length-1]-o);e<l&&t<l||h.push(a,o)}else this.moveTo(a,o),h=this.currentPath.points;return oo.arc(a,o,e,t,r,n,i,s,h),this}beginFill(e=0,t=1){return this.beginTextureFill({texture:Hr.WHITE,color:e,alpha:t})}beginTextureFill(e){e=Object.assign({texture:Hr.WHITE,color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();const t=e.alpha>0;return t?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:t},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,r,n){return this.drawShape(new ne(e,t,r,n))}drawRoundedRect(e,t,r,n,i){return this.drawShape(new oe(e,t,r,n,i))}drawCircle(e,t,r){return this.drawShape(new ie(e,t,r))}drawEllipse(e,t,r,n){return this.drawShape(new se(e,t,r,n))}drawPolygon(...e){let t,r=!0;const n=e[0];n.points?(r=n.closeStroke,t=n.points):t=Array.isArray(e[0])?e[0]:e;const i=new ae(t);return i.closeStroke=r,this.drawShape(i),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return!(1!==e.length||e[0].shape.type!==ee.RECT||e[0].matrix||e[0].holes.length||e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,r=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(e.points);for(let n=0;n<r;n++){const r=e.batches[n],i=r.style.color,s=new Float32Array(this.vertexData.buffer,8*r.attribStart,2*r.attribSize),a=new Float32Array(e.uvsFloat32.buffer,8*r.attribStart,2*r.attribSize),o={vertexData:s,blendMode:t,indices:new Uint16Array(e.indicesUint16.buffer,2*r.start,r.size),uvs:a,_batchRGB:Se.hex2rgb(i),_tintRGB:i,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[n]=o}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,r=this.batches.length;t<r;t++){const r=this.batches[t];r.worldAlpha=this.worldAlpha*r.alpha,e.plugins[this.pluginName].render(r)}}}_renderDirect(e){const t=this._resolveDirectShader(e),r=this._geometry,n=this.tint,i=this.worldAlpha,s=t.uniforms,a=r.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(n>>16&255)/255*i,s.tint[1]=(n>>8&255)/255*i,s.tint[2]=(255&n)/255*i,s.tint[3]=i,e.shader.bind(t),e.geometry.bind(r,t),e.state.set(this.state);for(let t=0,n=a.length;t<n;t++)this._renderDrawCallDirect(e,r.drawCalls[t])}_renderDrawCallDirect(e,t){const{texArray:r,type:n,size:i,start:s}=t,a=r.count;for(let t=0;t<a;t++)e.texture.bind(r.elements[t],t);e.geometry.draw(n,i,s)}_resolveDirectShader(e){let t=this.shader;const r=this.pluginName;if(!t){if(!bo[r]){const{MAX_TEXTURES:t}=e.plugins[r],n=new Int32Array(t);for(let e=0;e<t;e++)n[e]=e;const i={tint:new Float32Array([1,1,1,1]),translationMatrix:new he,default:nn.from({uSamplers:n},!0)},s=e.plugins[r]._shader.program;bo[r]=new $n(s,i)}t=bo[r]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:r,maxX:n,maxY:i}=e.bounds;this._bounds.addFrame(this.transform,t,r,n,i)}containsPoint(e){return this.worldTransform.applyInverse(e,Eo._TEMP_POINT),this._geometry.containsPoint(Eo._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this.tint;const e=Se.hex2rgb(this.tint,xo);for(let t=0;t<this.batches.length;t++){const r=this.batches[t],n=r._batchRGB,i=(e[0]*n[0]*255<<16)+(e[1]*n[1]*255<<8)+(0|e[2]*n[2]*255);r._tintRGB=(i>>16)+(65280&i)+((255&i)<<16)}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,r=t.a,n=t.b,i=t.c,s=t.d,a=t.tx,o=t.ty,l=this._geometry.points,h=this.vertexData;let u=0;for(let e=0;e<l.length;e+=2){const t=l[e],c=l[e+1];h[u++]=r*t+i*c+a,h[u++]=s*c+n*t+o}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};let To=Eo;To._TEMP_POINT=new te;class wo{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const t=this.uvBuffer.data;this.data&&this.data.length===t.length||(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}const So=new te,Ao=new ae,Co=class extends is{constructor(e,t,r,n=f.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=r||Yn.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=W.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===f.TRIANGLES&&t.length<2*Co.BATCHABLE_SIZE?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const n=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[n]),e.plugins[n].render(this)}calculateVertices(){const e=this.geometry.buffers[0],t=e.data,r=e._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));const n=this.transform.worldTransform,i=n.a,s=n.b,a=n.c,o=n.d,l=n.tx,h=n.ty,u=this.vertexData;for(let e=0;e<u.length/2;e++){const r=t[2*e],n=t[2*e+1];u[2*e]=i*r+a*n+l,u[2*e+1]=s*r+o*n+h}if(this._roundPixels){const e=W.RESOLUTION;for(let t=0;t<u.length;++t)u[t]=Math.round(u[t]*e)/e}this.vertexDirty=r}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new wo(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,So);const t=this.geometry.getBuffer("aVertexPosition").data,r=Ao.points,n=this.geometry.getIndex().data,i=n.length,s=4===this.drawMode?3:1;for(let e=0;e+2<i;e+=s){const i=2*n[e],s=2*n[e+1],a=2*n[e+2];if(r[0]=t[i],r[1]=t[i+1],r[2]=t[s],r[3]=t[s+1],r[4]=t[a],r[5]=t[a+1],Ao.contains(So.x,So.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let Ro=Co;Ro.BATCHABLE_SIZE=100;class Po extends $n{constructor(e,t){const r={uSampler:e,alpha:1,uTextureMatrix:he.IDENTITY,uColor:new Float32Array([1,1,1,1])};(t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t)).uniforms&&Object.assign(r,t.uniforms),super(t.program||Wn.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),r),this._colorDirty=!1,this.uvMatrix=new Qn(e),this.batchable=void 0===t.program,this.pluginName=t.pluginName,this.tint=t.tint,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16),this._colorDirty=!0)}get tint(){return this._tint}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture;Se.premultiplyTintToRgba(this._tint,this._alpha,this.uniforms.uColor,e.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class Io extends Jr{constructor(e,t,r){super();const n=new $r(e),i=new $r(t,!0),s=new $r(r,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,g.FLOAT).addAttribute("aTextureCoord",i,2,!1,g.FLOAT).addIndex(s),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}class Mo{constructor(e,t,r){this.geometry=new Jr,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let r=0;r<e.length;++r){let n=e[r];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||g.FLOAT,offset:n.offset},t[r]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let t=0;this.indexBuffer=new $r(Se.createIndicesForQuads(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let e=0;e<this.dynamicProperties.length;++e){const r=this.dynamicProperties[e];r.offset=t,t+=r.size,this.dynamicStride+=r.size}const r=new ArrayBuffer(this.size*this.dynamicStride*16);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new $r(this.dynamicData,!1,!1);let n=0;this.staticStride=0;for(let e=0;e<this.staticProperties.length;++e){const t=this.staticProperties[e];t.offset=n,n+=t.size,this.staticStride+=t.size}const i=new ArrayBuffer(this.size*this.staticStride*16);this.staticData=new Float32Array(i),this.staticDataUint32=new Uint32Array(i),this.staticBuffer=new $r(this.staticData,!0,!1);for(let t=0;t<this.dynamicProperties.length;++t){const r=this.dynamicProperties[t];e.addAttribute(r.attributeName,this.dynamicBuffer,0,r.type===g.UNSIGNED_BYTE,r.type,4*this.dynamicStride,4*r.offset)}for(let t=0;t<this.staticProperties.length;++t){const r=this.staticProperties[t];e.addAttribute(r.attributeName,this.staticBuffer,0,r.type===g.UNSIGNED_BYTE,r.type,4*this.staticStride,4*r.offset)}}uploadDynamic(e,t,r){for(let n=0;n<this.dynamicProperties.length;n++){const i=this.dynamicProperties[n];i.uploadFunction(e,t,r,i.type===g.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,r){for(let n=0;n<this.staticProperties.length;n++){const i=this.staticProperties[n];i.uploadFunction(e,t,r,i.type===g.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}class ko extends hn{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new he,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:g.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=$n.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),this.state=Yn.for2d()}render(e){const t=e.children,r=e._maxSize,n=e._batchSize,i=this.renderer;let s=t.length;if(0===s)return;s>r&&!e.autoResize&&(s=r);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const o=t[0]._texture.baseTexture,l=o.alphaMode>0;this.state.blendMode=Se.correctBlendMode(e.blendMode,l),i.state.set(this.state);const h=i.gl,u=e.worldTransform.copyTo(this.tempMatrix);u.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=u.toArray(!0),this.shader.uniforms.uColor=Se.premultiplyRgba(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,l),this.shader.uniforms.uSampler=o,this.renderer.shader.bind(this.shader);let c=!1;for(let r=0,o=0;r<s;r+=n,o+=1){let l=s-r;l>n&&(l=n),o>=a.length&&a.push(this._generateOneMoreBuffer(e));const u=a[o];u.uploadDynamic(t,r,l);const d=e._bufferUpdateIDs[o]||0;c=c||u._updateID<d,c&&(u._updateID=e._updateID,u.uploadStatic(t,r,l)),i.geometry.bind(u.geometry),h.drawElements(h.TRIANGLES,6*l,h.UNSIGNED_SHORT,0)}}generateBuffers(e){const t=[],r=e._maxSize,n=e._batchSize,i=e._properties;for(let e=0;e<r;e+=n)t.push(new Mo(this.properties,i,n));return t}_generateOneMoreBuffer(e){const t=e._batchSize,r=e._properties;return new Mo(this.properties,r,t)}uploadVertices(e,t,r,n,i,s){let a=0,o=0,l=0,h=0;for(let u=0;u<r;++u){const r=e[t+u],c=r._texture,d=r.scale.x,f=r.scale.y,p=c.trim,m=c.orig;p?(o=p.x-r.anchor.x*m.width,a=o+p.width,h=p.y-r.anchor.y*m.height,l=h+p.height):(a=m.width*(1-r.anchor.x),o=m.width*-r.anchor.x,l=m.height*(1-r.anchor.y),h=m.height*-r.anchor.y),n[s]=o*d,n[s+1]=h*f,n[s+i]=a*d,n[s+i+1]=h*f,n[s+2*i]=a*d,n[s+2*i+1]=l*f,n[s+3*i]=o*d,n[s+3*i+1]=l*f,s+=4*i}}uploadPosition(e,t,r,n,i,s){for(let a=0;a<r;a++){const r=e[t+a].position;n[s]=r.x,n[s+1]=r.y,n[s+i]=r.x,n[s+i+1]=r.y,n[s+2*i]=r.x,n[s+2*i+1]=r.y,n[s+3*i]=r.x,n[s+3*i+1]=r.y,s+=4*i}}uploadRotation(e,t,r,n,i,s){for(let a=0;a<r;a++){const r=e[t+a].rotation;n[s]=r,n[s+i]=r,n[s+2*i]=r,n[s+3*i]=r,s+=4*i}}uploadUvs(e,t,r,n,i,s){for(let a=0;a<r;++a){const r=e[t+a]._texture._uvs;r?(n[s]=r.x0,n[s+1]=r.y0,n[s+i]=r.x1,n[s+i+1]=r.y1,n[s+2*i]=r.x2,n[s+2*i+1]=r.y2,n[s+3*i]=r.x3,n[s+3*i+1]=r.y3,s+=4*i):(n[s]=0,n[s+1]=0,n[s+i]=0,n[s+i+1]=0,n[s+2*i]=0,n[s+2*i+1]=0,n[s+3*i]=0,n[s+3*i+1]=0,s+=4*i)}}uploadTint(e,t,r,n,i,s){for(let a=0;a<r;++a){const r=e[t+a],o=r._texture.baseTexture.alphaMode>0,l=r.alpha,h=l<1&&o?Se.premultiplyTint(r._tintRGB,l):r._tintRGB+(255*l<<24);n[s]=h,n[s+i]=h,n[s+2*i]=h,n[s+3*i]=h,s+=4*i}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}ko.extension={name:"particle",type:$.RendererPlugin},K.add(ko),W.UPLOADS_PER_FRAME=4;var Do=(e=>(e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",e))(Do||{});const No={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Do.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Oo=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];class Bo{constructor(e){this.styleID=0,this.reset(),Uo(this,e,e)}clone(){const e={};return Uo(e,this,No),new Bo(e)}reset(){Uo(this,No,No)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=Fo(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=Fo(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=Fo(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e="number"==typeof this.fontSize?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let e=t.length-1;e>=0;e--){let r=t[e].trim();/([\"\'])[^\'\"]+\1/.test(r)||Oo.includes(r)||(r=`"${r}"`),t[e]=r}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}}function Lo(e){return"number"==typeof e?Se.hex2string(e):("string"==typeof e&&e.startsWith("0x")&&(e=e.replace("0x","#")),e)}function Fo(e){if(Array.isArray(e)){for(let t=0;t<e.length;++t)e[t]=Lo(e[t]);return e}return Lo(e)}function Uo(e,t,r){for(const n in r)Array.isArray(t[n])?e[n]=t[n].slice():e[n]=t[n]}const Go={willReadFrequently:!0};class zo{constructor(e,t,r,n,i,s,a,o,l){this.text=e,this.style=t,this.width=r,this.height=n,this.lines=i,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=o,this.fontProperties=l}static measureText(e,t,r,n=zo._canvas){r=null==r?t.wordWrap:r;const i=t.toFontString(),s=zo.measureFont(i);0===s.fontSize&&(s.fontSize=t.fontSize,s.ascent=t.fontSize);const a=n.getContext("2d",Go);a.font=i;const o=(r?zo.wordWrap(e,t,n):e).split(/(?:\r\n|\r|\n)/),l=new Array(o.length);let h=0;for(let e=0;e<o.length;e++){const r=a.measureText(o[e]).width+(o[e].length-1)*t.letterSpacing;l[e]=r,h=Math.max(h,r)}let u=h+t.strokeThickness;t.dropShadow&&(u+=t.dropShadowDistance);const c=t.lineHeight||s.fontSize+t.strokeThickness;let d=Math.max(c,s.fontSize+2*t.strokeThickness)+(o.length-1)*(c+t.leading);return t.dropShadow&&(d+=t.dropShadowDistance),new zo(e,t,u,d,o,l,c+t.leading,h,s)}static wordWrap(e,t,r=zo._canvas){const n=r.getContext("2d",Go);let i=0,s="",a="";const o=Object.create(null),{letterSpacing:l,whiteSpace:h}=t,u=zo.collapseSpaces(h),c=zo.collapseNewlines(h);let d=!u;const f=t.wordWrapWidth+l,p=zo.tokenize(e);for(let e=0;e<p.length;e++){let r=p[e];if(zo.isNewline(r)){if(!c){a+=zo.addLine(s),d=!u,s="",i=0;continue}r=" "}if(u){const e=zo.isBreakingSpace(r),t=zo.isBreakingSpace(s[s.length-1]);if(e&&t)continue}const h=zo.getFromCache(r,l,o,n);if(h>f)if(""!==s&&(a+=zo.addLine(s),s="",i=0),zo.canBreakWords(r,t.breakWords)){const e=zo.wordWrapSplit(r);for(let h=0;h<e.length;h++){let u=e[h],c=1;for(;e[h+c];){const n=e[h+c],i=u[u.length-1];if(zo.canBreakChars(i,n,r,h,t.breakWords))break;u+=n,c++}h+=u.length-1;const p=zo.getFromCache(u,l,o,n);p+i>f&&(a+=zo.addLine(s),d=!1,s="",i=0),s+=u,i+=p}}else{s.length>0&&(a+=zo.addLine(s),s="",i=0);const t=e===p.length-1;a+=zo.addLine(r,!t),d=!1,s="",i=0}else h+i>f&&(d=!1,a+=zo.addLine(s),s="",i=0),(s.length>0||!zo.isBreakingSpace(r)||d)&&(s+=r,i+=h)}return a+=zo.addLine(s,!1),a}static addLine(e,t=!0){return e=zo.trimRight(e),e=t?`${e}\n`:e}static getFromCache(e,t,r,n){let i=r[e];if("number"!=typeof i){const s=e.length*t;i=n.measureText(e).width+s,r[e]=i}return i}static collapseSpaces(e){return"normal"===e||"pre-line"===e}static collapseNewlines(e){return"normal"===e}static trimRight(e){if("string"!=typeof e)return"";for(let t=e.length-1;t>=0;t--){const r=e[t];if(!zo.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static isNewline(e){return"string"==typeof e&&zo._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return"string"==typeof e&&zo._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let r="";if("string"!=typeof e)return t;for(let n=0;n<e.length;n++){const i=e[n],s=e[n+1];zo.isBreakingSpace(i,s)||zo.isNewline(i)?(""!==r&&(t.push(r),r=""),t.push(i)):r+=i}return""!==r&&t.push(r),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,r,n,i){return!0}static wordWrapSplit(e){return e.split("")}static measureFont(e){if(zo._fonts[e])return zo._fonts[e];const t={ascent:0,descent:0,fontSize:0},r=zo._canvas,n=zo._context;n.font=e;const i=zo.METRICS_STRING+zo.BASELINE_SYMBOL,s=Math.ceil(n.measureText(i).width);let a=Math.ceil(n.measureText(zo.BASELINE_SYMBOL).width);const o=Math.ceil(zo.HEIGHT_MULTIPLIER*a);a=a*zo.BASELINE_MULTIPLIER|0,r.width=s,r.height=o,n.fillStyle="#f00",n.fillRect(0,0,s,o),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(i,0,a);const l=n.getImageData(0,0,s,o).data,h=l.length,u=4*s;let c=0,d=0,f=!1;for(c=0;c<a;++c){for(let e=0;e<u;e+=4)if(255!==l[d+e]){f=!0;break}if(f)break;d+=u}for(t.ascent=a-c,d=h-u,f=!1,c=o;c>a;--c){for(let e=0;e<u;e+=4)if(255!==l[d+e]){f=!0;break}if(f)break;d-=u}return t.descent=c-a,t.fontSize=t.ascent+t.descent,zo._fonts[e]=t,t}static clearMetrics(e=""){e?delete zo._fonts[e]:zo._fonts={}}static get _canvas(){if(!zo.__canvas){let e;try{const t=new OffscreenCanvas(0,0);if(t.getContext("2d",Go)?.measureText)return zo.__canvas=t,t;e=W.ADAPTER.createCanvas()}catch(t){e=W.ADAPTER.createCanvas()}e.width=e.height=10,zo.__canvas=e}return zo.__canvas}static get _context(){return zo.__context||(zo.__context=zo._canvas.getContext("2d",Go)),zo.__context}}zo._fonts={},zo.METRICS_STRING="|q",zo.BASELINE_SYMBOL="M",zo.BASELINE_MULTIPLIER=1.4,zo.HEIGHT_MULTIPLIER=2,zo._newlines=[10,13],zo._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const Ho={texture:!0,children:!1,baseTexture:!0},jo=class extends os{constructor(e,t,r){let n=!1;r||(r=W.ADAPTER.createCanvas(),n=!0),r.width=3,r.height=3;const i=Hr.from(r);i.orig=new ne,i.trim=new ne,super(i),this._ownCanvas=n,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=W.RESOLUTION,this._autoResolution=!0,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const r=this.context,n=zo.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),i=n.width,s=n.height,a=n.lines,o=n.lineHeight,l=n.lineWidths,h=n.maxLineWidth,u=n.fontProperties;let c,d;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,i)+2*t.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+2*t.padding)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=t.strokeThickness,r.textBaseline=t.textBaseline,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit;const f=t.dropShadow?2:1;for(let e=0;e<f;++e){const i=t.dropShadow&&0===e,f=i?Math.ceil(Math.max(1,s)+2*t.padding):0,p=f*this._resolution;if(i){r.fillStyle="black",r.strokeStyle="black";const e=t.dropShadowColor,n=Se.hex2rgb("number"==typeof e?e:Se.string2hex(e)),i=t.dropShadowBlur*this._resolution,s=t.dropShadowDistance*this._resolution;r.shadowColor=`rgba(${255*n[0]},${255*n[1]},${255*n[2]},${t.dropShadowAlpha})`,r.shadowBlur=i,r.shadowOffsetX=Math.cos(t.dropShadowAngle)*s,r.shadowOffsetY=Math.sin(t.dropShadowAngle)*s+p}else r.fillStyle=this._generateFillStyle(t,a,n),r.strokeStyle=t.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let m=(o-u.fontSize)/2;o-u.fontSize<0&&(m=0);for(let e=0;e<a.length;e++)c=t.strokeThickness/2,d=t.strokeThickness/2+e*o+u.ascent+m,"right"===t.align?c+=h-l[e]:"center"===t.align&&(c+=(h-l[e])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[e],c+t.padding,d+t.padding-f,!0),t.fill&&this.drawLetterSpacing(a[e],c+t.padding,d+t.padding-f)}this.updateTexture()}drawLetterSpacing(e,t,r,n=!1){const i=this._style.letterSpacing,s=jo.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===i||s)return s&&(this.context.letterSpacing=i,this.context.textLetterSpacing=i),void(n?this.context.strokeText(e,t,r):this.context.fillText(e,t,r));let a=t;const o=Array.from?Array.from(e):e.split("");let l=this.context.measureText(e).width,h=0;for(let e=0;e<o.length;++e){const t=o[e];n?this.context.strokeText(t,a,r):this.context.fillText(t,a,r);let s="";for(let t=e+1;t<o.length;++t)s+=o[t];h=this.context.measureText(s).width,a+=l-h+i,l=h}}updateTexture(){const e=this.canvas;if(this._style.trim){const t=Se.trimCanvas(e);t.data&&(e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0))}const t=this._texture,r=this._style,n=r.trim?0:r.padding,i=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-n,t.trim.y=-n,t.orig.width=t._frame.width-2*n,t.orig.height=t._frame.height-2*n,this._onTextureUpdate(),i.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),-1===this._textureID&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,r){const n=e.fill;if(!Array.isArray(n))return n;if(1===n.length)return n[0];let i;const s=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,o=this.canvas.width/this._resolution-s-2*a,l=this.canvas.height/this._resolution-s-2*a,h=n.slice(),u=e.fillGradientStops.slice();if(!u.length){const e=h.length+1;for(let t=1;t<e;++t)u.push(t/e)}if(h.unshift(n[0]),u.unshift(0),h.push(n[n.length-1]),u.push(1),e.fillGradientType===Do.LINEAR_VERTICAL){i=this.context.createLinearGradient(o/2,a,o/2,l+a);const n=r.fontProperties.fontSize+e.strokeThickness;for(let e=0;e<t.length;e++){const s=r.lineHeight*(e-1)+n,a=r.lineHeight*e;let o=a;e>0&&s>a&&(o=(a+s)/2);const c=a+n,d=r.lineHeight*(e+1);let f=c;e+1<t.length&&d<c&&(f=(c+d)/2);const p=(f-o)/l;for(let e=0;e<h.length;e++){let t=0;t="number"==typeof u[e]?u[e]:e/h.length;let r=Math.min(1,Math.max(0,o/l+t*p));r=Number(r.toFixed(5)),i.addColorStop(r,h[e])}}}else{i=this.context.createLinearGradient(a,l/2,o+a,l/2);const e=h.length+1;let t=1;for(let r=0;r<h.length;r++){let n;n="number"==typeof u[r]?u[r]:t/e,i.addColorStop(n,h[r]),t++}}return i}destroy(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},Ho,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=Se.sign(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=Se.sign(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},this._style=e instanceof Bo?e:new Bo(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(null==e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};let Xo=jo;Xo.experimentalLetterSpacing=!1;class Vo{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function Wo(e,t){let r=!1;if(e?._textures?.length)for(let n=0;n<e._textures.length;n++)if(e._textures[n]instanceof Hr){const i=e._textures[n].baseTexture;t.includes(i)||(t.push(i),r=!0)}return r}function $o(e,t){if(e.baseTexture instanceof Sr){const r=e.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function Yo(e,t){if(e._texture&&e._texture instanceof Hr){const r=e._texture.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function qo(e,t){return t instanceof Xo&&(t.updateText(!0),!0)}function Ko(e,t){if(t instanceof Bo){const e=t.toFontString();return zo.measureFont(e),!0}return!1}function Qo(e,t){if(e instanceof Xo){t.includes(e.style)||t.push(e.style),t.includes(e)||t.push(e);const r=e._texture.baseTexture;return t.includes(r)||t.push(r),!0}return!1}function Zo(e,t){return e instanceof Bo&&(t.includes(e)||t.push(e),!0)}class Jo{constructor(e){this.limiter=new Vo(W.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(Qo),this.registerFindHook(Zo),this.registerFindHook(Wo),this.registerFindHook($o),this.registerFindHook(Yo),this.registerUploadHook(qo),this.registerUploadHook(Ko)}upload(e){return new Promise((t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,Te.system.addOnce(this.tick,this,be.UTILITY))):t()}))}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed)for(let r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)Te.system.addOnce(this.tick,this,be.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,r=e.length;t<r;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof is)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&Te.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}}function el(e,t){return t instanceof Sr&&(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0)}function tl(e,t){if(!(t instanceof To))return!1;const{geometry:r}=t;t.finishPoly(),r.updateBatches();const{batches:n}=r;for(let t=0;t<n.length;t++){const{texture:r}=n[t].style;r&&el(e,r.baseTexture)}return r.batchable||e.geometry.bind(r,t._resolveDirectShader(e)),!0}function rl(e,t){return e instanceof To&&(t.push(e),!0)}class nl extends Jo{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(rl),this.registerUploadHook(el),this.registerUploadHook(tl)}}nl.extension={name:"prepare",type:$.RendererSystem},K.add(nl);const il=class{constructor(e,t,r=null){this.linkedSheets=[],this._texture=e instanceof Hr?e:null,this.baseTexture=e instanceof Sr?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;const n=this.baseTexture.resource;this.resolution=this._updateResolution(r||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let r=Se.getResolutionOfUrl(e,null);return null===r&&(r=parseFloat(t??"1")),1!==r&&this.baseTexture.setResolution(r),r}parse(){return new Promise((e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=il.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()}))}_processFrames(e){let t=e;const r=il.BATCH_SIZE;for(;t-e<r&&t<this._frameKeys.length;){const e=this._frameKeys[t],r=this._frames[e],n=r.frame;if(n){let t=null,i=null;const s=!1!==r.trimmed&&r.sourceSize?r.sourceSize:r.frame,a=new ne(0,0,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution);t=r.rotated?new ne(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.h)/this.resolution,Math.floor(n.w)/this.resolution):new ne(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution),!1!==r.trimmed&&r.spriteSourceSize&&(i=new ne(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution)),this.textures[e]=new Hr(this.baseTexture,t,a,i,r.rotated?2:0,r.anchor),Hr.addToCache(this.textures[e],e)}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let r=0;r<e[t].length;r++){const n=e[t][r];this.animations[t].push(this.textures[n])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*il.BATCH_SIZE),this._batchIndex++,setTimeout((()=>{this._batchIndex*il.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())}),0)}destroy(e=!1){for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let sl=il;sl.BATCH_SIZE=1e3;const al=["jpg","png","jpeg","avif","webp"];function ol(e,t,r){const n={};if(e.forEach((e=>{n[e]=t})),Object.keys(t.textures).forEach((e=>{n[e]=t.textures[e]})),!r){const r=Se.path.dirname(e[0]);t.linkedSheets.forEach(((e,i)=>{const s=ol([`${r}/${t.data.meta.related_multi_packs[i]}`],e,!0);Object.assign(n,s)}))}return n}const ll={extension:$.Asset,cache:{test:e=>e instanceof sl,getCacheableAssets:(e,t)=>ol(e,t,!1)},resolver:{test:e=>{const t=e.split("?")[0].split("."),r=t.pop(),n=t.pop();return"json"===r&&al.includes(n)},parse:e=>{const t=e.split(".");return{resolution:parseFloat(W.RETINA_PREFIX.exec(e)?.[1]??"1"),format:t[t.length-2],src:e}}},loader:{extension:{type:$.LoadParser,priority:Ls.Normal},testParse:async(e,t)=>Se.path.extname(t.src).includes(".json")&&!!e.frames,async parse(e,t,r){let n=Se.path.dirname(t.src);n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");const i=n+e.meta.image,s=(await r.load([i]))[i],a=new sl(s.baseTexture,e,t.src);await a.parse();const o=e?.meta?.related_multi_packs;if(Array.isArray(o)){const e=[];for(const i of o){if("string"!=typeof i)continue;const s=n+i;t.data?.ignoreMultiPack||e.push(r.load({src:s,data:{ignoreMultiPack:!0}}))}const i=await Promise.all(e);a.linkedSheets=i,i.forEach((e=>{e.linkedSheets=[a].concat(a.linkedSheets.filter((t=>t!==e)))}))}return a},unload(e){e.destroy(!0)}}};K.add(ll);new te;var hl="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n";const ul=new he;class cl extends hn{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new tn,this.state=Yn.for2d()}contextChange(){const e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=$n.from(hl,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",t),this.shader=e.context.webGLVersion>1?$n.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",t):$n.from(hl,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",t)}render(e){const t=this.renderer,r=this.quad;let n=r.vertices;n[0]=n[6]=e._width*-e.anchor.x,n[1]=n[3]=e._height*-e.anchor.y,n[2]=n[4]=e._width*(1-e.anchor.x),n[5]=n[7]=e._height*(1-e.anchor.y);const i=e.uvRespectAnchor?e.anchor.x:0,s=e.uvRespectAnchor?e.anchor.y:0;n=r.uvs,n[0]=n[6]=-i,n[1]=n[3]=-s,n[2]=n[4]=1-i,n[5]=n[7]=1-s,r.invalidate();const a=e._texture,o=a.baseTexture,l=o.alphaMode>0,h=e.tileTransform.localTransform,u=e.uvMatrix;let c=o.isPowerOfTwo&&a.frame.width===o.width&&a.frame.height===o.height;c&&(o._glTextures[t.CONTEXT_UID]?c=o.wrapMode!==_.CLAMP:o.wrapMode===_.CLAMP&&(o.wrapMode=_.REPEAT));const d=c?this.simpleShader:this.shader,f=a.width,p=a.height,m=e._width,g=e._height;ul.set(h.a*f/m,h.b*f/g,h.c*p/m,h.d*p/g,h.tx/m,h.ty/g),ul.invert(),c?ul.prepend(u.mapCoord):(d.uniforms.uMapCoord=u.mapCoord.toArray(!0),d.uniforms.uClampFrame=u.uClampFrame,d.uniforms.uClampOffset=u.uClampOffset),d.uniforms.uTransform=ul.toArray(!0),d.uniforms.uColor=Se.premultiplyTintToRgba(e.tint,e.worldAlpha,d.uniforms.uColor,l),d.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),d.uniforms.uSampler=a,t.shader.bind(d),t.geometry.bind(r),this.state.blendMode=Se.correctBlendMode(e.blendMode,l),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}cl.extension={name:"tilingSprite",type:$.RendererPlugin},K.add(cl);class dl{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class fl{static test(e){return"string"==typeof e&&e.startsWith("info face=")}static parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const e in t){const n=t[e].match(/^[a-z]+/gm)[0],i=t[e].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(const e in i){const t=i[e].split("="),r=t[0],n=t[1].replace(/"/gm,""),a=parseFloat(n),o=isNaN(a)?n:a;s[r]=o}r[n].push(s)}const n=new dl;return r.info.forEach((e=>n.info.push({face:e.face,size:parseInt(e.size,10)}))),r.common.forEach((e=>n.common.push({lineHeight:parseInt(e.lineHeight,10)}))),r.page.forEach((e=>n.page.push({id:parseInt(e.id,10),file:e.file}))),r.char.forEach((e=>n.char.push({id:parseInt(e.id,10),page:parseInt(e.page,10),x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xoffset:parseInt(e.xoffset,10),yoffset:parseInt(e.yoffset,10),xadvance:parseInt(e.xadvance,10)}))),r.kerning.forEach((e=>n.kerning.push({first:parseInt(e.first,10),second:parseInt(e.second,10),amount:parseInt(e.amount,10)}))),r.distanceField.forEach((e=>n.distanceField.push({distanceRange:parseInt(e.distanceRange,10),fieldType:e.fieldType}))),n}}class pl{static test(e){const t=e;return"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")}static parse(e){const t=new dl,r=e.getElementsByTagName("info"),n=e.getElementsByTagName("common"),i=e.getElementsByTagName("page"),s=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),o=e.getElementsByTagName("distanceField");for(let e=0;e<r.length;e++)t.info.push({face:r[e].getAttribute("face"),size:parseInt(r[e].getAttribute("size"),10)});for(let e=0;e<n.length;e++)t.common.push({lineHeight:parseInt(n[e].getAttribute("lineHeight"),10)});for(let e=0;e<i.length;e++)t.page.push({id:parseInt(i[e].getAttribute("id"),10)||0,file:i[e].getAttribute("file")});for(let e=0;e<s.length;e++){const r=s[e];t.char.push({id:parseInt(r.getAttribute("id"),10),page:parseInt(r.getAttribute("page"),10)||0,x:parseInt(r.getAttribute("x"),10),y:parseInt(r.getAttribute("y"),10),width:parseInt(r.getAttribute("width"),10),height:parseInt(r.getAttribute("height"),10),xoffset:parseInt(r.getAttribute("xoffset"),10),yoffset:parseInt(r.getAttribute("yoffset"),10),xadvance:parseInt(r.getAttribute("xadvance"),10)})}for(let e=0;e<a.length;e++)t.kerning.push({first:parseInt(a[e].getAttribute("first"),10),second:parseInt(a[e].getAttribute("second"),10),amount:parseInt(a[e].getAttribute("amount"),10)});for(let e=0;e<o.length;e++)t.distanceField.push({fieldType:o[e].getAttribute("fieldType"),distanceRange:parseInt(o[e].getAttribute("distanceRange"),10)});return t}}class ml{static test(e){return!("string"!=typeof e||!e.includes("<font>"))&&pl.test(W.ADAPTER.parseXML(e))}static parse(e){return pl.parse(W.ADAPTER.parseXML(e))}}const gl=[fl,pl,ml];function yl(e){for(let t=0;t<gl.length;t++)if(gl[t].test(e))return gl[t];return null}function vl(e,t,r,n,i,s){const a=r.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];let o;const l=r.dropShadow?r.dropShadowDistance:0,h=r.padding||0,u=e.width/n-l-2*h,c=e.height/n-l-2*h,d=a.slice(),f=r.fillGradientStops.slice();if(!f.length){const e=d.length+1;for(let t=1;t<e;++t)f.push(t/e)}if(d.unshift(a[0]),f.unshift(0),d.push(a[a.length-1]),f.push(1),r.fillGradientType===Do.LINEAR_VERTICAL){o=t.createLinearGradient(u/2,h,u/2,c+h);let e=0;const n=(s.fontProperties.fontSize+r.strokeThickness)/c;for(let t=0;t<i.length;t++){const r=s.lineHeight*t;for(let t=0;t<d.length;t++){let i=0;i="number"==typeof f[t]?f[t]:t/d.length;const s=r/c+i*n;let a=Math.max(e,s);a=Math.min(a,1),o.addColorStop(a,d[t]),e=a}}}else{o=t.createLinearGradient(h,c/2,u+h,c/2);const e=d.length+1;let r=1;for(let t=0;t<d.length;t++){let n;n="number"==typeof f[t]?f[t]:r/e,o.addColorStop(n,d[t]),r++}}return o}function _l(e,t,r,n,i,s,a){const o=r.text,l=r.fontProperties;t.translate(n,i),t.scale(s,s);const h=a.strokeThickness/2,u=-a.strokeThickness/2;if(t.font=a.toFontString(),t.lineWidth=a.strokeThickness,t.textBaseline=a.textBaseline,t.lineJoin=a.lineJoin,t.miterLimit=a.miterLimit,t.fillStyle=vl(e,t,a,s,[o],r),t.strokeStyle=a.stroke,a.dropShadow){const e=a.dropShadowColor,r=Se.hex2rgb("number"==typeof e?e:Se.string2hex(e)),n=a.dropShadowBlur*s,i=a.dropShadowDistance*s;t.shadowColor=`rgba(${255*r[0]},${255*r[1]},${255*r[2]},${a.dropShadowAlpha})`,t.shadowBlur=n,t.shadowOffsetX=Math.cos(a.dropShadowAngle)*i,t.shadowOffsetY=Math.sin(a.dropShadowAngle)*i}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;a.stroke&&a.strokeThickness&&t.strokeText(o,h,u+r.lineHeight-l.descent),a.fill&&t.fillText(o,h,u+r.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function xl(e){return Array.from?Array.from(e):e.split("")}function bl(e){"string"==typeof e&&(e=[e]);const t=[];for(let r=0,n=e.length;r<n;r++){const n=e[r];if(Array.isArray(n)){if(2!==n.length)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const e=n[0].charCodeAt(0),r=n[1].charCodeAt(0);if(r<e)throw new Error("[BitmapFont]: Invalid character range.");for(let n=e,i=r;n<=i;n++)t.push(String.fromCharCode(n))}else t.push(...xl(n))}if(0===t.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}function El(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}const Tl=class{constructor(e,t,r){const[n]=e.info,[i]=e.common,[s]=e.page,[a]=e.distanceField,o=Se.getResolutionOfUrl(s.file),l={};this._ownsTextures=r,this.font=n.face,this.size=n.size,this.lineHeight=i.lineHeight/o,this.chars={},this.pageTextures=l;for(let r=0;r<e.page.length;r++){const{id:n,file:i}=e.page[r];l[n]=t instanceof Array?t[r]:t[i],a?.fieldType&&"none"!==a.fieldType&&(l[n].baseTexture.alphaMode=b.NO_PREMULTIPLIED_ALPHA,l[n].baseTexture.mipmap=x.OFF)}for(let t=0;t<e.char.length;t++){const{id:r,page:n}=e.char[t];let{x:i,y:s,width:a,height:h,xoffset:u,yoffset:c,xadvance:d}=e.char[t];i/=o,s/=o,a/=o,h/=o,u/=o,c/=o,d/=o;const f=new ne(i+l[n].frame.x/o,s+l[n].frame.y/o,a,h);this.chars[r]={xOffset:u,yOffset:c,xAdvance:d,kerning:{},texture:new Hr(l[n].baseTexture,f),page:n}}for(let t=0;t<e.kerning.length;t++){let{first:r,second:n,amount:i}=e.kerning[t];r/=o,n/=o,i/=o,this.chars[n]&&(this.chars[n].kerning[r]=i)}this.distanceFieldRange=a?.distanceRange,this.distanceFieldType=a?.fieldType?.toLowerCase()??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,r){let n;if(e instanceof dl)n=e;else{const t=yl(e);if(!t)throw new Error("Unrecognized data format for font.");n=t.parse(e)}t instanceof Hr&&(t=[t]);const i=new Tl(n,t,r);return Tl.available[i.font]=i,i}static uninstall(e){const t=Tl.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete Tl.available[e]}static from(e,t,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:n,padding:i,resolution:s,textureWidth:a,textureHeight:o,...l}=Object.assign({},Tl.defaultOptions,r),h=bl(n),u=t instanceof Bo?t:new Bo(t),c=a,d=new dl;d.info[0]={face:u.fontFamily,size:u.fontSize},d.common[0]={lineHeight:u.fontSize};let f,p,m,g=0,y=0,v=0;const _=[],x=[];for(let e=0;e<h.length;e++){f||(f=W.ADAPTER.createCanvas(),f.width=a,f.height=o,p=f.getContext("2d"),m=new Sr(f,{resolution:s,...l}),_.push(m),x.push(new Hr(m)),d.page.push({id:x.length-1,file:""}));const t=h[e],r=zo.measureText(t,u,!1,f),n=r.width,b=Math.ceil(r.height),E=Math.ceil(("italic"===u.fontStyle?2:1)*n);if(y>=o-b*s){if(0===y)throw new Error(`[BitmapFont] textureHeight ${o}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${t}')`);--e,f=null,p=null,m=null,y=0,g=0,v=0;continue}if(v=Math.max(b+r.fontProperties.descent,v),E*s+g>=c){if(0===g)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${t}')`);--e,y+=v*s,y=Math.ceil(y),g=0,v=0;continue}_l(f,p,r,g,y,s,u);const T=El(r.text);d.char.push({id:T,page:x.length-1,x:g/s,y:y/s,width:E,height:b,xoffset:0,yoffset:0,xadvance:Math.ceil(n-(u.dropShadow?u.dropShadowDistance:0)-(u.stroke?u.strokeThickness:0))}),g+=(E+2*i)*s,g=Math.ceil(g)}for(let e=0,t=h.length;e<t;e++){const r=h[e];for(let e=0;e<t;e++){const t=h[e],n=p.measureText(r).width,i=p.measureText(t).width,s=p.measureText(r+t).width-(n+i);s&&d.kerning.push({first:El(r),second:El(t),amount:s})}}const b=new Tl(d,x,!0);return void 0!==Tl.available[e]&&Tl.uninstall(e),Tl.available[e]=b,b}};let wl=Tl;wl.ALPHA=[["a","z"],["A","Z"]," "],wl.NUMERIC=[["0","9"]],wl.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],wl.ASCII=[[" ","~"]],wl.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Tl.ALPHANUMERIC},wl.available={};const Sl=[],Al=[],Cl=[],Rl=class extends is{constructor(e,t={}){super(),this._tint=16777215;const{align:r,tint:n,maxWidth:i,letterSpacing:s,fontName:a,fontSize:o}=Object.assign({},Rl.styleDefaults,t);if(!wl.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tint=n,this._font=void 0,this._fontName=a,this._fontSize=o,this.text=e,this._maxWidth=i,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new le((()=>{this.dirty=!0}),this,0,0),this._roundPixels=W.ROUND_PIXELS,this.dirty=!0,this._resolution=W.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const e=wl.available[this._fontName],t=this.fontSize,r=t/e.size,n=new te,i=[],s=[],a=[],o=xl(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),l=this._maxWidth*e.size/t,h="none"===e.distanceFieldType?Sl:Al;let u=null,c=0,f=0,p=0,m=-1,g=0,y=0,v=0,_=0;for(let t=0;t<o.length;t++){const r=o[t],h=El(r);if(/(?:\s)/.test(r)&&(m=t,g=c,_++),"\r"===r||"\n"===r){s.push(c),a.push(-1),f=Math.max(f,c),++p,++y,n.x=0,n.y+=e.lineHeight,u=null,_=0;continue}const d=e.chars[h];if(!d)continue;u&&d.kerning[u]&&(n.x+=d.kerning[u]);const x=Cl.pop()||{texture:Hr.EMPTY,line:0,charCode:0,prevSpaces:0,position:new te};x.texture=d.texture,x.line=p,x.charCode=h,x.position.x=n.x+d.xOffset+this._letterSpacing/2,x.position.y=n.y+d.yOffset,x.prevSpaces=_,i.push(x),c=x.position.x+Math.max(d.xAdvance-d.xOffset,d.texture.orig.width),n.x+=d.xAdvance+this._letterSpacing,v=Math.max(v,d.yOffset+d.texture.height),u=h,-1!==m&&l>0&&n.x>l&&(++y,Se.removeItems(i,1+m-y,1+t-m),t=m,m=-1,s.push(g),a.push(i.length>0?i[i.length-1].prevSpaces:0),f=Math.max(f,g),p++,n.x=0,n.y+=e.lineHeight,u=null,_=0)}const x=o[o.length-1];"\r"!==x&&"\n"!==x&&(/(?:\s)/.test(x)&&(c=g),s.push(c),f=Math.max(f,c),a.push(-1));const b=[];for(let e=0;e<=p;e++){let t=0;"right"===this._align?t=f-s[e]:"center"===this._align?t=(f-s[e])/2:"justify"===this._align&&(t=a[e]<0?0:(f-s[e])/a[e]),b.push(t)}const E=i.length,T={},w=[],S=this._activePagesMeshData;h.push(...S);for(let t=0;t<E;t++){const r=i[t].texture,n=r.baseTexture.uid;if(!T[n]){let t=h.pop();if(!t){const r=new Io;let n,i;"none"===e.distanceFieldType?(n=new Po(Hr.EMPTY),i=d.NORMAL):(n=new Po(Hr.EMPTY,{program:Wn.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),i=d.NORMAL_NPM);const s=new Ro(r,n);s.blendMode=i,t={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:s,vertices:null,uvs:null,indices:null}}t.index=0,t.indexCount=0,t.vertexCount=0,t.uvsCount=0,t.total=0;const{_textureCache:i}=this;i[n]=i[n]||new Hr(r.baseTexture),t.mesh.texture=i[n],t.mesh.tint=this._tint,w.push(t),T[n]=t}T[n].total++}for(let e=0;e<S.length;e++)w.includes(S[e])||this.removeChild(S[e].mesh);for(let e=0;e<w.length;e++)w[e].mesh.parent!==this&&this.addChild(w[e].mesh);this._activePagesMeshData=w;for(const e in T){const t=T[e],r=t.total;if(!(t.indices?.length>6*r)||t.vertices.length<2*Ro.BATCHABLE_SIZE)t.vertices=new Float32Array(8*r),t.uvs=new Float32Array(8*r),t.indices=new Uint16Array(6*r);else{const e=t.total,r=t.vertices;for(let t=8*e;t<r.length;t++)r[t]=0}t.mesh.size=6*r}for(let e=0;e<E;e++){const t=i[e];let n=t.position.x+b[t.line]*("justify"===this._align?t.prevSpaces:1);this._roundPixels&&(n=Math.round(n));const s=n*r,a=t.position.y*r,o=t.texture,l=T[o.baseTexture.uid],h=o.frame,u=o._uvs,c=l.index++;l.indices[6*c+0]=0+4*c,l.indices[6*c+1]=1+4*c,l.indices[6*c+2]=2+4*c,l.indices[6*c+3]=0+4*c,l.indices[6*c+4]=2+4*c,l.indices[6*c+5]=3+4*c,l.vertices[8*c+0]=s,l.vertices[8*c+1]=a,l.vertices[8*c+2]=s+h.width*r,l.vertices[8*c+3]=a,l.vertices[8*c+4]=s+h.width*r,l.vertices[8*c+5]=a+h.height*r,l.vertices[8*c+6]=s,l.vertices[8*c+7]=a+h.height*r,l.uvs[8*c+0]=u.x0,l.uvs[8*c+1]=u.y0,l.uvs[8*c+2]=u.x1,l.uvs[8*c+3]=u.y1,l.uvs[8*c+4]=u.x2,l.uvs[8*c+5]=u.y2,l.uvs[8*c+6]=u.x3,l.uvs[8*c+7]=u.y3}this._textWidth=f*r,this._textHeight=(n.y+e.lineHeight)*r;for(const e in T){const t=T[e];if(0!==this.anchor.x||0!==this.anchor.y){let e=0;const r=this._textWidth*this.anchor.x,n=this._textHeight*this.anchor.y;for(let i=0;i<t.total;i++)t.vertices[e++]-=r,t.vertices[e++]-=n,t.vertices[e++]-=r,t.vertices[e++]-=n,t.vertices[e++]-=r,t.vertices[e++]-=n,t.vertices[e++]-=r,t.vertices[e++]-=n}this._maxLineHeight=v*r;const n=t.mesh.geometry.getBuffer("aVertexPosition"),i=t.mesh.geometry.getBuffer("aTextureCoord"),s=t.mesh.geometry.getIndex();n.data=t.vertices,i.data=t.uvs,s.data=t.indices,n.update(),i.update(),s.update()}for(let e=0;e<i.length;e++)Cl.push(i[e]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:r,size:n}=wl.available[this._fontName];if("none"!==r){const{a:r,b:i,c:s,d:a}=this.worldTransform,o=Math.sqrt(r*r+i*i),l=Math.sqrt(s*s+a*a),h=(Math.abs(o)+Math.abs(l))/2,u=this.fontSize/n,c=e._view.resolution;for(const e of this._activePagesMeshData)e.mesh.shader.uniforms.uFWidth=h*t*u*c}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=wl.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tint}set tint(e){if(this._tint!==e){this._tint=e;for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!wl.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??wl.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){"number"==typeof e?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(null==e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,r="none"===wl.available[this._fontName].distanceFieldType?Sl:Al;r.push(...this._activePagesMeshData);for(const e of this._activePagesMeshData)this.removeChild(e.mesh);this._activePagesMeshData=[],r.filter((e=>t[e.mesh.texture.baseTexture.uid])).forEach((e=>{e.mesh.texture=Hr.EMPTY}));for(const e in t){t[e].destroy(),delete t[e]}this._font=null,this._textureCache=null,super.destroy(e)}};Rl.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const Pl=[".xml",".fnt"],Il={extension:{type:$.LoadParser,priority:Ls.Normal},test:e=>Pl.includes(Se.path.extname(e)),testParse:async e=>fl.test(e)||ml.test(e),async parse(e,t,r){const n=fl.test(e)?fl.parse(e):ml.parse(e),{src:i}=t,{page:s}=n,a=[];for(let e=0;e<s.length;++e){const t=s[e].file,r=Se.path.join(Se.path.dirname(i),t);a.push(r)}const o=await r.load(a),l=a.map((e=>o[e]));return wl.install(n,l,!0)},load:async(e,t)=>(await W.ADAPTER.fetch(e)).text(),unload(e){e.destroy()}};K.add(Il);class Ml extends r(h).Component{root=null;running=!0;previousFrameTime=0;renderer=void 0;needsResize=!0;observer=void 0;stage=void 0;constructor(e){super(e)}componentDidMount(){console.log("Mount Pixi.js Sketch"),this.renderer=new Gi({width:800,height:800,background:0}),this.root.appendChild(this.renderer.view),this.stage=new is,this.observer=new ResizeObserver((()=>{this.needsResize=!0})),this.observer.observe(this.root),this.setup(),globalThis.requestAnimationFrame(this.animate.bind(this))}animate(){if(!this.running)return;this.needsResize&&(this.resize(),this.needsResize=!1);const e=Date.now(),t=(r=e-this.previousFrameTime,i=250,r<(n=0)?n:r>i?i:r);var r,n,i;this.previousFrameTime=e;const s=t/1e3;this.update(s),this.renderer.render(this.stage),globalThis.requestAnimationFrame(this.animate.bind(this))}setup(){this.sketch=new this.props.impl(this.renderer,this.stage)}update(e){this.sketch.update(e)}resize(){const e=this.root.clientWidth,t=this.root.clientHeight;this.renderer.resize(e,t),this.sketch.resized(e,t)}componentWillUnmount(){console.log("Unmount Pixi.js Sketch"),this.running=!1,this.root.removeChild(this.renderer.view)}shouldComponentUpdate(e,t,r){return!1}render(){return(0,a.jsx)("div",{className:this.props.className,ref:e=>this.root=e})}}var kl=Ml;var Dl=class{constructor(e,t){this.renderer=e,this.stage=t}update(e){}resized(e,t){}},Nl={};h=s("acw62");const Ol=Symbol(),Bl=Symbol(),Ll=Symbol();let Fl=(e,t)=>new Proxy(e,t);const Ul=Object.getPrototypeOf,Gl=new WeakMap,zl=e=>e&&(Gl.has(e)?Gl.get(e):Ul(e)===Object.prototype||Ul(e)===Array.prototype),Hl=e=>"object"==typeof e&&null!==e,jl=new WeakMap,Xl=e=>e[Ll]||e,Vl=(e,t,r)=>{if(!zl(e))return e;const n=Xl(e),i=(s=n,Object.isFrozen(s)||Object.values(Object.getOwnPropertyDescriptors(s)).some((e=>!e.writable)));var s;let a=r&&r.get(n);return a&&a[1].f===i||(a=((e,t)=>{const r={f:t};let n=!1;const i=(t,i)=>{if(!n){let n=r.a.get(e);n||(n=new Set,r.a.set(e,n)),i&&n.has(Ol)||n.add(t)}},s={get:(t,n)=>n===Ll?e:(i(n),Vl(t[n],r.a,r.c)),has:(t,s)=>s===Bl?(n=!0,r.a.delete(e),!0):(i(s),s in t),getOwnPropertyDescriptor:(e,t)=>(i(t,!0),Object.getOwnPropertyDescriptor(e,t)),ownKeys:e=>(i(Ol),Reflect.ownKeys(e))};return t&&(s.set=s.deleteProperty=()=>!1),[s,r]})(n,i),a[1].p=Fl(i?(e=>{let t=jl.get(e);if(!t){if(Array.isArray(e))t=Array.from(e);else{const r=Object.getOwnPropertyDescriptors(e);Object.values(r).forEach((e=>{e.configurable=!0})),t=Object.create(Ul(e),r)}jl.set(e,t)}return t})(n):n,a[0]),r&&r.set(n,a)),a[1].a=t,a[1].c=r,a[1].p},Wl=(e,t)=>{const r=Reflect.ownKeys(e),n=Reflect.ownKeys(t);return r.length!==n.length||r.some(((e,t)=>e!==n[t]))},$l=(e,t,r,n)=>{if(Object.is(e,t))return!1;if(!Hl(e)||!Hl(t))return!0;const i=r.get(Xl(e));if(!i)return!0;if(n){const r=n.get(e);if(r&&r.n===t)return r.g;n.set(e,{n:t,g:!1})}let s=null;for(const a of i){const i=a===Ol?Wl(e,t):$l(e[a],t[a],r,n);if(!0!==i&&!1!==i||(s=i),s)break}return null===s&&(s=!0),n&&n.set(e,{n:t,g:s}),s},Yl=e=>zl(e)&&e[Ll]||null,ql=(e,t=!0)=>{Gl.set(e,t)};var Kl,Ql,Zl,Jl,eh,th,rh;Kl=s("30Ie1");var nh=function(e){return"object"==typeof e&&null!==e},ih=Symbol(),sh=new WeakSet,ah=function(e,t,r,n,i,s,a,o,l){return void 0===e&&(e=Object.is),void 0===t&&(t=function(e,t){return new Proxy(e,t)}),void 0===r&&(r=function(e){return nh(e)&&!sh.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)}),void 0===n&&(n=function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}}),void 0===i&&(i=new WeakMap),void 0===s&&(s=function(e,t,r,s){void 0===s&&(s=n);var a=i.get(t);if((null==a?void 0:a[0])===r)return a[1];var o=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return ql(o,!0),i.set(t,[r,o]),Reflect.ownKeys(e).forEach((function(r){var n=Reflect.get(e,r,t);sh.has(n)?(ql(n,!1),o[r]=n):n instanceof Promise?Object.defineProperty(o,r,{get:function(){return s(n)}}):null!=n&&n[ih]?o[r]=hh(n,s):o[r]=n})),Object.freeze(o)}),void 0===a&&(a=new WeakMap),void 0===o&&(o=[1]),void 0===l&&(l=function(n){if(!nh(n))throw new Error("object required");var i=a.get(n);if(i)return i;var l=o[0],h=new Set,u=function(e,t){void 0===t&&(t=++o[0]),l!==t&&(l=t,h.forEach((function(r){return r(e,t)})))},c=new Map,d=function(e){var t=c.get(e);return c.delete(e),t},f=Array.isArray(n)?[]:Object.create(Object.getPrototypeOf(n)),p=t(f,{get:function(e,t,r){return t===ih?[e,r,l,s,h]:Reflect.get(e,t,r)},deleteProperty:function(e,t){var r,n=Reflect.get(e,t),i=null==n||null==(r=n[ih])?void 0:r[4];i&&i.delete(d(t));var s=Reflect.deleteProperty(e,t);return s&&u(["delete",[t],n]),s},set:function(t,n,i,s){var a,o,l=Reflect.has(t,n),h=Reflect.get(t,n,s);if(l&&e(h,i))return!0;var f=null==h||null==(a=h[ih])?void 0:a[4];f&&f.delete(d(n)),nh(i)&&(i=Yl(i)||i);var p=i;if(null!=(o=Object.getOwnPropertyDescriptor(t,n))&&o.set);else if(i instanceof Promise)i.then((function(e){i.status="fulfilled",i.value=e,u(["resolve",[n],e])})).catch((function(e){i.status="rejected",i.reason=e,u(["reject",[n],e])}));else{var m,g;null!=(m=i)&&m[ih]||!r(i)||(p=lh(i)),null!=(g=p)&&g[ih]&&p[ih][4].add(function(e){var t=c.get(e);return t||(t=function(t,r){var n=[].concat(t);n[1]=[e].concat(n[1]),u(n,r)},c.set(e,t)),t}(n))}return Reflect.set(t,n,p,s),u(["set",[n],i,h]),!0}});return a.set(n,p),Reflect.ownKeys(n).forEach((function(e){var t=Object.getOwnPropertyDescriptor(n,e);t.get||t.set?Object.defineProperty(f,e,t):p[e]=n[e]})),p}),[l,ih,sh,e,t,r,n,i,s,a,o]},oh=ah()[0];function lh(e){return void 0===e&&(e={}),oh(e)}function hh(e,t){var r=e[ih],n=r[0],i=r[1],s=r[2];return(0,r[3])(n,i,s,t)}Ql=function(e){var t=null==e?void 0:e[ih];return null==t?void 0:t[2]},Zl=lh,Jl=function(e){return sh.add(e),e},eh=hh,th=function(e,t,r){var n,i=[],s=e[ih][4],a=function e(a){i.push(a),r?t(i.splice(0)):n||(n=Promise.resolve().then((function(){n=void 0,s.has(e)&&t(i.splice(0))})))};return s.add(a),function(){return s.delete(a)}},rh=ah;var uh=h.use,ch=Kl.useSyncExternalStore;Object.defineProperty(Nl,"getVersion",{enumerable:!0,get:function(){return Ql}}),Object.defineProperty(Nl,"proxy",{enumerable:!0,get:function(){return Zl}}),Object.defineProperty(Nl,"ref",{enumerable:!0,get:function(){return Jl}}),Object.defineProperty(Nl,"snapshot",{enumerable:!0,get:function(){return eh}}),Object.defineProperty(Nl,"subscribe",{enumerable:!0,get:function(){return th}}),Object.defineProperty(Nl,"unstable_buildProxyFunction",{enumerable:!0,get:function(){return rh}}),Nl.useSnapshot=function(e,t){var r=null==t?void 0:t.sync,n=h.useRef(),i=h.useRef(),s=!0,a=ch(h.useCallback((function(t){var n=th(e,t,r);return t(),n}),[e,r]),(function(){var t=eh(e,uh);try{if(!s&&n.current&&i.current&&!$l(n.current,t,i.current,new WeakMap))return n.current}catch(e){}return t}),(function(){return eh(e,uh)}));s=!1;var o=new WeakMap;h.useEffect((function(){n.current=a,i.current=o}));var l=h.useMemo((function(){return new WeakMap}),[]);return Vl(a,o,l)};const dh=(0,Nl.proxy)({points:10,xFrequency:1,yFrequency:1});class fh extends Dl{TWO_PI=6.28318;positions=[];radius=10;t=0;nextT=0;current=0;old=1;constructor(e,t){super(e,t),this.renderTarget=[jr.create({width:e.width,height:e.height}),jr.create({width:e.width,height:e.height})],this.onScreen=[os.from(this.renderTarget[0]),os.from(this.renderTarget[1])],this.g=new To,this.g.position.set(e.width/2,e.height/2)}update(e){this.t+=e;const t=this.t*this.TWO_PI*.1,r=Math.cos(t*dh.xFrequency)*this.radius,n=Math.sin(t*dh.yFrequency)*this.radius;this.g.clear().lineStyle(2,16777215,.01);const i=this.positions.length;for(let e=0;e<i;e++){let t=this.positions[e];this.g.moveTo(t.x,t.y).lineTo(r,n);for(let r=0;r<i;r++){if(e==r)continue;let n=this.positions[r];this.g.moveTo(t.x,t.y).lineTo(n.x,n.y)}}this.t>this.nextT&&(this.nextT=this.t+.075,this.addPosition(r,n)),[this.old,this.current]=[this.current,this.old];let s=new is;this.onScreen[this.old].alpha=.99,s.addChild(this.onScreen[this.old]),s.addChild(this.g),this.renderer.render(s,{renderTexture:this.renderTarget[this.current]}),this.stage.removeChild(this.onScreen[this.old]),this.onScreen[this.current].alpha=1,this.stage.addChild(this.onScreen[this.current])}addPosition(e,t){for(this.positions.push({x:e,y:t});this.positions.length>dh.points;)this.positions.shift()}resized(e,t){this.renderTarget[0].resize(e,t,!0),this.renderTarget[1].resize(e,t,!0),this.g.position.set(e/2,t/2),this.radius=.46*Math.min(e,t)}}function ph(){const e=(0,Nl.useSnapshot)(dh);return(0,a.jsx)("div",{children:(0,a.jsxs)(h.Profiler,{id:"MainProfile",onRender:(e,t,r)=>{console.log(`Profiler onRender() ${e} ${t} ${r}ms`)},children:[(0,a.jsxs)("div",{className:"MZ3kha_controlPanel",children:[(0,a.jsxs)("label",{htmlFor:"xFrequency",children:["xFrequency ",Math.round(100*e.xFrequency)/100]}),(0,a.jsx)("input",{id:"xFrequency",type:"range",min:"0.5",max:"5",step:"0.05",value:e.xFrequency,onChange:e=>{dh.xFrequency=parseFloat(e.target.value)}}),(0,a.jsxs)("label",{htmlFor:"yFrequency",children:["yFrequency ",Math.round(100*e.yFrequency)/100]}),(0,a.jsx)("input",{id:"yFrequency",type:"range",min:"0.5",max:"5",step:"0.05",value:e.yFrequency,onChange:e=>{dh.yFrequency=parseFloat(e.target.value)}}),(0,a.jsxs)("label",{htmlFor:"pointsCount",children:["points ",e.points]}),(0,a.jsx)("input",{id:"pointsCount",type:"range",min:"4",max:"20",step:"1",value:e.points,onChange:e=>{dh.points=Math.round(parseFloat(e.target.value))}})]}),(0,a.jsx)(kl,{className:"MZ3kha_mainAppDisplay",impl:fh})]})})}o(document.getElementById("mainApp")).render(r(h).createElement(ph));
//# sourceMappingURL=index.66816c6d.js.map
